<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>è¡Œä¸ºæ¨¡å¼ | Binb&#39;s Blog</title>
<meta name="keywords" content="è®¾è®¡æ¨¡å¼">
<meta name="description" content="èŒè´£é“¾æ¨¡å¼â€”â€”åŠ è–ª èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ï¼šä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆ">
<meta name="author" content="chance7bin">
<link rel="canonical" href="https://chance7bin.github.io/posts/basic/pattern/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.be81eec981a615a87a88f121642d7eebde74d033438693944db2fd6b827284ff.css" integrity="" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity=""
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<link rel="icon" type="image/png" sizes="32x32" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<link rel="apple-touch-icon" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<link rel="mask-icon" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="è¡Œä¸ºæ¨¡å¼" />
<meta property="og:description" content="èŒè´£é“¾æ¨¡å¼â€”â€”åŠ è–ª èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ï¼šä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆ" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chance7bin.github.io/posts/basic/pattern/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-14T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-09-14T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="è¡Œä¸ºæ¨¡å¼"/>
<meta name="twitter:description" content="èŒè´£é“¾æ¨¡å¼â€”â€”åŠ è–ª èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ï¼šä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆ"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "ğŸ“š æ–‡ç« ",
      "item": "https://chance7bin.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ğŸ“• è®¡ç®—æœºåŸºç¡€",
      "item": "https://chance7bin.github.io/posts/basic/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "è®¾è®¡æ¨¡å¼",
      "item": "https://chance7bin.github.io/posts/basic/pattern/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "è¡Œä¸ºæ¨¡å¼",
      "item": "https://chance7bin.github.io/posts/basic/pattern/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "è¡Œä¸ºæ¨¡å¼",
  "name": "è¡Œä¸ºæ¨¡å¼",
  "description": "èŒè´£é“¾æ¨¡å¼â€”â€”åŠ è–ª èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ï¼šä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆ",
  "keywords": [
    "è®¾è®¡æ¨¡å¼"
  ],
  "articleBody": "èŒè´£é“¾æ¨¡å¼â€”â€”åŠ è–ª èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ï¼šä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™ä¸ªå¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚\nç»“æ„å›¾ ä»£ç å®ç° Handler\n1 2 3 4 5 6 7 8 9 public abstract class Handler { Handler successor; public void setSuccessor(Handler successor) { this.successor = successor; } abstract void request(int type); } ConcreteHandler\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Handler1 extends Handler{ @Override void request(int type) { if (type \u003c 10){ System.out.println(\"handler 1 print\"); } else if (super.successor != null) { super.successor.request(type); } else { System.out.println(\"can't solve\"); } } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 public class Handler2 extends Handler{ @Override void request(int type) { if (type \u003c 20){ System.out.println(\"handler 2 print\"); } else if (super.successor != null) { super.successor.request(type); } else { System.out.println(\"can't solve\"); } } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 public class Handler3 extends Handler{ @Override void request(int type) { if (type \u003c 30){ System.out.println(\"handler 2 print\"); } else if (super.successor != null) { super.successor.request(type); } else { System.out.println(\"can't solve\"); } } } Client\n1 2 3 4 5 6 7 8 9 10 11 public static void main(String[] args) { Handler1 handler1 = new Handler1(); Handler2 handler2 = new Handler2(); Handler3 handler3 = new Handler3(); handler1.setSuccessor(handler2); handler2.setSuccessor(handler3); int[] test = {5,15,25,35}; for (int i : test) { handler1.request(i); } } 1 2 3 4 handler 1 print handler 2 print handler 2 print can't solve èŒè´£é“¾çš„å¥½å¤„ å½“å®¢æˆ·æäº¤ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œè¯·æ±‚æ˜¯æ²¿é“¾ä¼ é€’ç›´è‡³æœ‰ä¸€ä¸ªConcreteHandlerå¯¹è±¡è´Ÿè´£å¤„ç†å®ƒã€‚\nè¿™å°±ä½¿å¾—æ¥æ”¶è€…å’Œå‘é€è€…éƒ½æ²¡æœ‰å¯¹æ–¹çš„æ˜ç¡®ä¿¡æ¯ï¼Œä¸”é“¾ä¸­çš„å¯¹è±¡è‡ªå·±ä¹Ÿå¹¶ä¸çŸ¥é“é“¾çš„ç»“æ„ã€‚ç»“æœæ˜¯èŒè´£é“¾å¯ç®€åŒ–å¯¹è±¡çš„ç›¸äº’è¿æ¥ï¼Œå®ƒä»¬ä»…éœ€ä¿æŒä¸€ä¸ªæŒ‡å‘å…¶åç»§è€…çš„å¼•ç”¨ï¼Œè€Œä¸éœ€ä¿æŒå®ƒæ‰€æœ‰çš„å€™é€‰æ¥å—è€…çš„å¼•ç”¨ã€‚è¿™å¤§å¤§é™ä½äº†è€¦åˆåº¦ã€‚\nç”±äºæ˜¯åœ¨å®¢æˆ·ç«¯æ¥å®šä¹‰é“¾çš„ç»“æ„ï¼Œå¯ä»¥éšæ—¶åœ°å¢åŠ æˆ–ä¿®æ”¹å¤„ç†ä¸€ä¸ªè¯·æ±‚çš„ç»“æ„ã€‚å¢å¼ºäº†ç»™å¯¹è±¡æŒ‡æ´¾èŒè´£çš„çµæ´»æ€§ã€‚\nå‘½ä»¤æ¨¡å¼â€”â€”ç‚¹èœ å‘½ä»¤æ¨¡å¼ï¼ˆCommand)ï¼Œå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–;å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚\nç»“æ„å›¾ ä»£ç å®ç° Receiver\n1 2 3 4 5 6 7 8 9 public class Receiver { void action1(){ System.out.println(\"action1\"); } void action2(){ System.out.println(\"action2\"); } } Command\n1 2 3 4 5 6 7 8 9 public abstract class Commend { Receiver receiver; public Commend(Receiver receiver) { this.receiver = receiver; } abstract void execute(); } ConcreteCommand\n1 2 3 4 5 6 7 8 9 10 public class ConcreteCommend1 extends Commend{ public ConcreteCommend1(Receiver receiver) { super(receiver); } @Override void execute() { receiver.action1(); } } Invoker\n1 2 3 4 5 6 7 8 9 10 11 12 public class Invoker { Commend commend; public Invoker(Commend commend) { this.commend = commend; } void execute(){ commend.execute(); } } Client\n1 2 3 4 5 6 public static void main(String[] args) { Receiver receiver = new Receiver(); ConcreteCommend1 concreteCommend1 = new ConcreteCommend1(receiver); Invoker invoker = new Invoker(concreteCommend1); invoker.execute(); } å‘½ä»¤æ¨¡å¼ä½œç”¨ ç¬¬ä¸€ï¼Œå®ƒèƒ½è¾ƒå®¹æ˜“åœ°è®¾è®¡ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—ï¼›\nç¬¬äºŒï¼Œåœ¨éœ€è¦çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¾ƒå®¹æ˜“åœ°å°†å‘½ä»¤è®°å…¥æ—¥å¿—ï¼›\nç¬¬ä¸‰ï¼Œå…è®¸æ¥æ”¶è¯·æ±‚çš„ä¸€æ–¹å†³å®šæ˜¯å¦è¦å¦å†³è¯·æ±‚ã€‚\nç¬¬å››ï¼Œå¯ä»¥å®¹æ˜“åœ°å®ç°å¯¹è¯·æ±‚çš„æ’¤é”€å’Œé‡åš;\nç¬¬äº”ï¼Œç”±äºåŠ è¿›æ–°çš„å…·ä½“å‘½ä»¤ç±»ä¸å½±å“å…¶ä»–çš„ç±»ï¼Œå› æ­¤å¢åŠ æ–°çš„å…·ä½“å‘½ä»¤ç±»å¾ˆå®¹æ˜“ã€‚\nå…¶å®è¿˜æœ‰æœ€å…³é”®çš„ä¼˜ç‚¹å°±æ˜¯å‘½ä»¤æ¨¡å¼æŠŠè¯·æ±‚ä¸€ä¸ªæ“ä½œçš„å¯¹è±¡ä¸çŸ¥é“æ€ä¹ˆæ‰§è¡Œä¸€ä¸ªæ“ä½œçš„å¯¹è±¡åˆ†å‰²å¼€ã€‚\nå‘½ä»¤æ¨¡å¼æ”¯æŒæ’¤é”€/æ¢å¤æ“ä½œåŠŸèƒ½ï¼Œä½†è¿˜ä¸æ¸…æ¥šæ˜¯å¦éœ€è¦è¿™ä¸ªåŠŸèƒ½æ—¶ï¼Œè¦ä¸è¦å®ç°å‘½ä»¤æ¨¡å¼ï¼Ÿ\nåº”è¯¥æ˜¯ä¸è¦å®ç°ã€‚æ•æ·å¼€å‘åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼Œä¸è¦ä¸ºä»£ç æ·»åŠ åŸºäºçŒœæµ‹çš„ã€å®é™…ä¸éœ€è¦çš„åŠŸèƒ½ã€‚å¦‚æœä¸æ¸…æ¥šä¸€ä¸ªç³»ç»Ÿæ˜¯å¦éœ€è¦å‘½ä»¤æ¨¡å¼ï¼Œä¸€èˆ¬å°±ä¸è¦ç€æ€¥å»å®ç°å®ƒï¼Œäº‹å®ä¸Šï¼Œåœ¨éœ€è¦çš„æ—¶å€™é€šè¿‡é‡æ„å®ç°è¿™ä¸ªæ¨¡å¼å¹¶ä¸å›°éš¾ï¼Œåªæœ‰åœ¨çœŸæ­£éœ€è¦å¦‚æ’¤é”€/æ¢å¤æ“ä½œç­‰åŠŸèƒ½æ—¶ï¼ŒæŠŠåŸæ¥çš„ä»£ç é‡æ„ä¸ºå‘½ä»¤æ¨¡å¼æ‰æœ‰æ„ä¹‰ã€‚\nè¿­ä»£å™¨æ¨¡å¼â€”â€”æ£€ç¥¨ è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator)ï¼Œæä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚\nè·³è¿‡â€¦\nä¸­ä»‹è€…æ¨¡å¼â€”â€”è”åˆå›½ ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator)ï¼Œç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚\nç»“æ„å›¾ ä»£ç å®ç° Mediator\n1 2 3 4 public abstract class Mediator { abstract void send(String msg, Colleague colleague); } Colleague\n1 2 3 4 5 6 7 8 9 10 11 12 13 public abstract class Colleague { Mediator mediator; public Colleague(Mediator mediator) { this.mediator = mediator; } abstract void sendMessage(String msg); abstract void print(String msg); } ConcreteColleague\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class Colleague1 extends Colleague{ public Colleague1(Mediator mediator) { super(mediator); } @Override void sendMessage(String msg) { super.mediator.send(msg, this); } @Override void print(String msg) { System.out.println(\"colleague 1 receive: \" + msg); } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class Colleague2 extends Colleague{ public Colleague2(Mediator mediator) { super(mediator); } @Override void sendMessage(String msg) { super.mediator.send(msg, this); } @Override void print(String msg) { System.out.println(\"colleague 2 receive: \" + msg); } } ConcreteMediator\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 public class ConcreteMediator extends Mediator{ Colleague1 colleague1; Colleague2 colleague2; public void setColleague1(Colleague1 colleague1) { this.colleague1 = colleague1; } public void setColleague2(Colleague2 colleague2) { this.colleague2 = colleague2; } @Override void send(String msg, Colleague colleague) { if (colleague instanceof Colleague1){ colleague2.print(msg); } else colleague1.print(msg); } } 1 2 colleague 2 receive: hello man colleague 1 receive: see you man ä¸­ä»‹è€…æ¨¡å¼ä¼˜ç¼ºç‚¹ ä¸­ä»‹è€…æ¨¡å¼å¾ˆå®¹æ˜“åœ¨ç³»ç»Ÿä¸­åº”ç”¨ï¼Œä¹Ÿå¾ˆå®¹æ˜“åœ¨ç³»ç»Ÿä¸­è¯¯ç”¨ã€‚å½“ç³»ç»Ÿå‡ºç°äº†â€œå¤šå¯¹å¤šâ€äº¤äº’å¤æ‚çš„å¯¹è±¡ç¾¤æ—¶ï¼Œä¸è¦æ€¥äºä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼Œè€Œè¦å…ˆåæ€ç³»ç»Ÿåœ¨è®¾è®¡ä¸Šæ˜¯ä¸æ˜¯åˆç†ã€‚\nä¸­ä»‹è€…æ¨¡å¼çš„ä¼˜ç‚¹é¦–å…ˆæ˜¯Mediatorçš„å‡ºç°å‡å°‘äº†å„ä¸ªColleagueçš„è€¦åˆï¼Œä½¿å¾—å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨å„ä¸ªColleagueç±»å’ŒMediatorï¼Œæ¯”å¦‚ä»»ä½•å›½å®¶çš„æ”¹å˜ä¸ä¼šå½±å“åˆ°å…¶ä»–å›½å®¶ï¼Œè€Œåªæ˜¯ä¸å®‰ç†ä¼šå‘ç”Ÿå˜åŒ–ã€‚å…¶æ¬¡ï¼Œç”±äºæŠŠå¯¹è±¡å¦‚ä½•åä½œè¿›è¡Œäº†æŠ½è±¡ï¼Œå°†ä¸­ä»‹ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¦‚å¿µå¹¶å°†å…¶å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¿™æ ·å…³æ³¨çš„å¯¹è±¡å°±ä»å¯¹è±¡å„è‡ªæœ¬èº«çš„è¡Œä¸ºè½¬ç§»åˆ°å®ƒä»¬ä¹‹é—´çš„äº¤äº’ä¸Šæ¥ï¼Œä¹Ÿå°±æ˜¯ç«™åœ¨ä¸€ä¸ªæ›´å®è§‚çš„è§’åº¦å»çœ‹å¾…ç³»ç»Ÿã€‚\nç”±äºConcreteMediator æ§åˆ¶äº†é›†ä¸­åŒ–ï¼Œäºæ˜¯å°±æŠŠäº¤äº’å¤æ‚æ€§å˜ä¸ºäº†ä¸­ä»‹è€…çš„å¤æ‚æ€§ï¼Œè¿™å°±ä½¿å¾—ä¸­ä»‹è€…ä¼šå˜å¾—æ¯”ä»»ä½•ä¸€ä¸ª ConcreteColleagueéƒ½å¤æ‚ã€‚\nä¸­ä»‹è€…æ¨¡å¼ä¸€èˆ¬åº”ç”¨äºä¸€ç»„å¯¹è±¡ä»¥å®šä¹‰è‰¯å¥½ä½†æ˜¯å¤æ‚çš„æ–¹å¼è¿›è¡Œé€šä¿¡çš„åœºåˆï¼Œæ¯”å¦‚çª—ä½“Formå¯¹è±¡ï¼ˆè®¡ç®—å™¨ï¼‰ï¼Œä»¥åŠæƒ³å®šåˆ¶ä¸€ä¸ªåˆ†å¸ƒåœ¨å¤šä¸ªç±»ä¸­çš„è¡Œä¸ºï¼Œè€Œåˆä¸æƒ³ç”Ÿæˆå¤ªå¤šçš„å­ç±»çš„åœºåˆã€‚\nå¤‡å¿˜å½•æ¨¡å¼â€”â€”å­˜è¿›åº¦ å¤‡å¿˜å½•(Memento)ï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚\nç»“æ„å›¾ ä»£ç å®ç° å‘èµ·äººï¼ˆOriginatorï¼‰ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 public class Originator { // éœ€è¦ä¿å­˜çš„å±æ€§ï¼Œå¯èƒ½æœ‰å¤šä¸ª int hp = 100; int attack = 10; int defence = 10; public Memento save(){ // åˆ›å»ºå¤‡å¿˜å½•,å°†å½“å‰éœ€è¦ä¿å­˜çš„ä¿¡æ¯å¯¼å…¥å¹¶å®ä¾‹åŒ–å‡ºä¸€ä¸ªMementoå¯¹è±¡ return new Memento(attack,defence); } public void grow(){ hp += 10; attack += 10; defence += 10; System.out.println(\"grow...\"); } public void reload(Memento memento){ // æ¢å¤å¤‡å¿˜å½•ï¼Œå°† Mementoå¯¼å…¥å¹¶å°†ç›¸å…³æ•°æ®æ¢å¤ attack = memento.attack; defence = memento.defence; System.out.println(\"reload...\"); } @Override public String toString() { return \"Originator{\" + \"hp=\" + hp + \", attack=\" + attack + \", defence=\" + defence + '}'; } // éœ€è¦ä¿å­˜çš„å±æ€§ï¼Œå¯èƒ½æœ‰å¤šä¸ª // getter and setter... } å¤‡å¿˜å½•ï¼ˆMementoï¼‰ç±»\n1 2 3 4 5 6 7 8 9 10 public class Memento { int attack; int defence; public Memento(int attack, int defence) { this.attack = attack; this.defence = defence; } } ç®¡ç†è€…ï¼ˆCaretakerï¼‰ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 public class CareTaker { Memento memento; public Memento getMemento() { return memento; } public void setMemento(Memento memento) { this.memento = memento; } } å®¢æˆ·ç«¯ç¨‹åº\n1 2 3 4 5 6 7 8 9 10 11 public static void main(String[] args) { Originator originator = new Originator(); CareTaker careTaker = new CareTaker(); System.out.println(originator); // ä¿å­˜çŠ¶æ€æ—¶ï¼Œç”±äºæœ‰äº†å¾ˆå¥½çš„å°è£…,å¯ä»¥éšè— Originatorçš„å®ç°ç»†èŠ‚ careTaker.setMemento(originator.save()); originator.grow(); System.out.println(originator); originator.reload(careTaker.getMemento()); System.out.println(originator); } åº”ç”¨ Mementoæ¨¡å¼æ¯”è¾ƒé€‚ç”¨äºåŠŸèƒ½æ¯”è¾ƒå¤æ‚çš„ï¼Œä½†éœ€è¦ç»´æŠ¤æˆ–è®°å½•å±æ€§å†å²çš„ç±»ï¼Œæˆ–è€…éœ€è¦ä¿å­˜çš„å±æ€§åªæ˜¯ä¼—å¤šå±æ€§ä¸­çš„ä¸€å°éƒ¨åˆ†æ—¶ï¼ŒOriginatorå¯ä»¥æ ¹æ®ä¿å­˜çš„Mementoä¿¡æ¯è¿˜åŸåˆ°å‰ä¸€çŠ¶æ€ã€‚\n**å¦‚æœåœ¨æŸä¸ªç³»ç»Ÿä¸­ä½¿ç”¨å‘½ä»¤æ¨¡å¼æ—¶ï¼Œéœ€è¦å®ç°å‘½ä»¤çš„æ’¤é”€åŠŸèƒ½ï¼Œé‚£ä¹ˆå‘½ä»¤æ¨¡å¼å¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•æ¨¡å¼æ¥å­˜å‚¨å¯æ’¤é”€æ“ä½œçš„çŠ¶æ€ã€‚**æœ‰æ—¶ä¸€äº›å¯¹è±¡çš„å†…éƒ¨ä¿¡æ¯å¿…é¡»ä¿å­˜åœ¨å¯¹è±¡ä»¥å¤–çš„åœ°æ–¹ï¼Œä½†æ˜¯å¿…é¡»è¦ç”±å¯¹è±¡è‡ªå·±è¯»å–ï¼Œè¿™æ—¶ï¼Œä½¿ç”¨å¤‡å¿˜å½•å¯ä»¥æŠŠå¤æ‚çš„å¯¹è±¡å†…éƒ¨ä¿¡æ¯å¯¹å…¶ä»–çš„å¯¹è±¡å±è”½èµ·æ¥ï¼Œä»è€Œå¯ä»¥æ°å½“åœ°ä¿æŒå°è£…çš„è¾¹ç•Œã€‚\nå½“è§’è‰²çš„çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½è¿™ä¸ªçŠ¶æ€æ— æ•ˆï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨æš‚æ—¶å­˜å‚¨èµ·æ¥çš„å¤‡å¿˜å½•å°†çŠ¶æ€å¤åŸã€‚\nè§‚å¯Ÿè€…æ¨¡å¼â€”â€”BOSSæ¥äº† è§‚å¯Ÿè€…æ¨¡å¼åˆå«åšå‘å¸ƒ-è®¢é˜…ï¼ˆPublish/Subscribeï¼‰æ¨¡å¼ã€‚è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚\nç¤ºä¾‹ç»“æ„å›¾\nç»“æ„å›¾ ä»£ç å®ç° Observer\n1 2 3 public interface Observer { void update(); } Notifier\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 public class Notifier { List\u003cObserver\u003e observers = new ArrayList\u003c\u003e(); String state; public void attach(Observer observer){ observers.add(observer); } public void detach(Observer observer){ observers.remove(observer); } public void notify2Observer(){ for (Observer observer : observers) { observer.update(); } } public String getState() { return state; } public void setState(String state) { this.state = state; } } ConcreteObserver\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class ConcreteObserver implements Observer{ private String name; private Notifier notifier; public ConcreteObserver(String name, Notifier notifier) { this.name = name; this.notifier = notifier; } @Override public void update() { System.out.println(name + \":\" + notifier.getState()); } } ConcreteNotifier\n1 2 3 public class ConcreteNotifier extends Notifier { } main\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class ObserverTest { public static void main(String[] args) { Notifier notifier = new ConcreteNotifier(); Observer observer1 = new ConcreteObserver(\"a\", notifier); Observer observer2 = new ConcreteObserver(\"b\", notifier); notifier.attach(observer1); notifier.attach(observer2); notifier.setState(\"è€æ¿æ¥å•¦\"); notifier.notify2Observer(); notifier.detach(observer2); notifier.notify2Observer(); } } è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹ **å°†ä¸€ä¸ªç³»ç»Ÿåˆ†å‰²æˆä¸€ç³»åˆ—ç›¸äº’åä½œçš„ç±»æœ‰ä¸€ä¸ªå¾ˆä¸å¥½çš„å‰¯ä½œç”¨ï¼Œé‚£å°±æ˜¯éœ€è¦ç»´æŠ¤ç›¸å…³å¯¹è±¡é—´çš„ä¸€è‡´æ€§ã€‚æˆ‘ä»¬ä¸å¸Œæœ›ä¸ºäº†ç»´æŒä¸€è‡´æ€§è€Œä½¿å„ç±»ç´§å¯†è€¦åˆï¼Œè¿™æ ·ä¼šç»™ç»´æŠ¤ã€æ‰©å±•å’Œé‡ç”¨éƒ½å¸¦æ¥ä¸ä¾¿ã€‚**è€Œè§‚å¯Ÿè€…æ¨¡å¼çš„å…³é”®å¯¹è±¡æ˜¯ä¸»é¢˜Subjectå’Œè§‚å¯Ÿè€…Observerï¼Œä¸€ä¸ªSubjectå¯ä»¥æœ‰ä»»æ„æ•°ç›®çš„ä¾èµ–å®ƒçš„Observerï¼Œä¸€æ—¦Subject çš„çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€æœ‰çš„Observeréƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥ã€‚Subject å‘å‡ºé€šçŸ¥æ—¶å¹¶ä¸éœ€è¦çŸ¥é“è°æ˜¯å®ƒçš„è§‚å¯Ÿè€…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…·ä½“è§‚å¯Ÿè€…æ˜¯è°ï¼Œå®ƒæ ¹æœ¬ä¸éœ€è¦çŸ¥é“ã€‚è€Œä»»ä½•ä¸€ä¸ªå…·ä½“è§‚å¯Ÿè€…ä¸çŸ¥é“ä¹Ÿä¸éœ€è¦çŸ¥é“å…¶ä»–è§‚å¯Ÿè€…çš„å­˜åœ¨ã€‚\nä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€… å½“ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜éœ€è¦åŒæ—¶æ”¹å˜å…¶ä»–å¯¹è±¡çš„æ—¶å€™ï¼Œè€Œä¸”å®ƒä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡æœ‰å¾…æ”¹å˜æ—¶ï¼Œåº”è¯¥è€ƒè™‘ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚\nå½“ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€æ–¹é¢ä¾èµ–äºå¦ä¸€æ–¹é¢ï¼Œè¿™æ—¶ç”¨è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥å°†è¿™ä¸¤è€…å°è£…åœ¨ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä½¿å®ƒä»¬å„è‡ªç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨ã€‚\nè§‚å¯Ÿè€…æ¨¡å¼æ‰€åšçš„å·¥ä½œå…¶å®å°±æ˜¯åœ¨è§£é™¤è€¦åˆã€‚è®©è€¦åˆçš„åŒæ–¹éƒ½ä¾èµ–äºæŠ½è±¡ï¼Œè€Œä¸æ˜¯ä¾èµ–äºå…·ä½“ã€‚ä»è€Œä½¿å¾—å„è‡ªçš„å˜åŒ–éƒ½ä¸ä¼šå½±å“å¦ä¸€è¾¹çš„å˜åŒ–ã€‚\nè§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³ å°½ç®¡å·²ç»ç”¨äº†ä¾èµ–å€’è½¬åŸåˆ™ï¼Œä½†æ˜¯â€æŠ½è±¡é€šçŸ¥è€…â€œè¿˜æ˜¯ä¾èµ–â€æŠ½è±¡è§‚å¯Ÿè€…â€œâ€™ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‡ä¸€æ²¡æœ‰äº†æŠ½è±¡è§‚å¯Ÿè€…è¿™æ ·çš„æ¥å£ï¼Œé€šçŸ¥çš„åŠŸèƒ½å°±å®Œä¸æˆäº†ã€‚å¦å¤–å°±æ˜¯æ¯ä¸ªå…·ä½“è§‚å¯Ÿè€…ï¼Œå®ƒä¸ä¸€å®šæ˜¯â€æ›´æ–°â€œçš„æ–¹æ³•è¦è°ƒç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå¸Œæœ›çš„æ˜¯â€å·¥å…·ç®±â€œæ˜¯éšè—ï¼Œâ€è‡ªåŠ¨çª—å£â€œæ˜¯æ‰“å¼€ï¼Œè¿™è¿™äº›éƒ½ä¸æ˜¯åŒåçš„æ–¹æ³•ã€‚\nå¦‚æœé€šçŸ¥è€…å’Œè§‚å¯Ÿè€…ä¹‹é—´æ ¹æœ¬å°±äº’ç›¸ä¸çŸ¥é“ï¼Œç”±å®¢æˆ·ç«¯æ¥å†³å®šé€šçŸ¥è°ï¼Œé‚£å°±å¥½äº†ã€‚\näº‹ä»¶å§”æ‰˜ å§”æ‰˜æ˜¯ä¸€ç§å¼•ç”¨æ–¹æ³•çš„ç±»å‹ã€‚ä¸€æ—¦ä¸ºå§”æ‰˜åˆ†é…äº†æ–¹æ³•ï¼Œå§”æ‰˜å°†ä¸è¯¥æ–¹æ³•å…·æœ‰å®Œå…¨ç›¸åŒçš„è¡Œä¸ºã€‚å§”æ‰˜æ–¹æ³•çš„ä½¿ç”¨å¯ä»¥åƒå…¶ä»–ä»»ä½•æ–¹æ³•ä¸€æ ·ï¼Œå…·æœ‰å‚æ•°å’Œè¿”å›å€¼ã€‚å§”æ‰˜å¯ä»¥çœ‹ä½œæ˜¯å¯¹å‡½æ•°çš„æŠ½è±¡ï¼Œæ˜¯å‡½æ•°çš„â€ç±»â€œï¼Œå§”æ‰˜çš„å®ä¾‹å°†ä»£è¡¨ä¸€ä¸ªå…·ä½“çš„å‡½æ•°ã€‚\nä¸€ä¸ªå§”æ‰˜å¯ä»¥æ­è½½å¤šä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰æ–¹æ³•è¢«ä¾æ¬¡å”¤èµ·ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒå¯ä»¥ä½¿å¾—å§”æ‰˜å¯¹è±¡æ‰€æ­è½½çš„æ–¹æ³•å¹¶ä¸éœ€è¦å±äºåŒä¸€ä¸ªç±»ã€‚\nä½†å§”æ‰˜ä¹Ÿæ˜¯æœ‰å‰æçš„ï¼Œé‚£å°±æ˜¯å§”æ‰˜å¯¹è±¡æ‰€æ­è½½çš„æ‰€æœ‰æ–¹æ³•å¿…é¡»å…·æœ‰ç›¸åŒçš„åŸå½¢å’Œå½¢å¼ï¼Œä¹Ÿå°±æ˜¯æ‹¥æœ‰ç›¸åŒçš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ã€‚\n==â€œå§”æ‰˜â€åœ¨C#ä¸­æ˜¯ä¸€ä¸ªè¯­è¨€çº§ç‰¹æ€§ï¼Œè€Œåœ¨Javaè¯­è¨€ä¸­æ²¡æœ‰ç›´æ¥çš„å¯¹åº”ï¼Œä½†æ˜¯javaåˆ©ç”¨åå°„å³å¯å®ç°å§”æ‰˜ï¼==\nhttps://blog.csdn.net/Seriousplus/article/details/80462722\nå§”æ´¾å’Œç»§æ‰¿éƒ½æ˜¯ä¸ºäº†ä»£ç å¤ç”¨ï¼Œåªæ˜¯æ–¹å¼ä¸åŒã€‚\nå§”æ‰˜å¯ä»¥è¢«çœ‹ä½œæ˜¯å¯¹è±¡çº§åˆ«çš„é‡ç”¨æœºåˆ¶ï¼Œè€Œç»§æ‰¿æ˜¯ç±»çº§åˆ«çš„é‡ç”¨æœºåˆ¶ã€‚ æ­¤å¤–ï¼Œå¦‚æœå­ç±»åªéœ€è¦å¤ç”¨çˆ¶ç±»ä¸­çš„ä¸€å°éƒ¨åˆ†æ–¹æ³•ï¼Œå¯ä»¥ä¸éœ€ è¦ä½¿ç”¨ç»§æ‰¿ï¼Œè€Œæ˜¯é€šè¿‡å§”æ´¾æœºåˆ¶æ¥å®ç° çŠ¶æ€æ¨¡å¼â€”â€”å¤šåˆ†æ”¯åˆ¤æ–­ çŠ¶æ€æ¨¡å¼ï¼ˆState)ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶å…è®¸æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥åƒæ˜¯æ”¹å˜äº†å…¶ç±»ã€‚\n**çŠ¶æ€æ¨¡å¼ä¸»è¦è§£å†³çš„æ˜¯å½“æ§åˆ¶ä¸€ä¸ªå¯¹è±¡çŠ¶æ€è½¬æ¢çš„æ¡ä»¶è¡¨è¾¾å¼è¿‡äºå¤æ‚æ—¶çš„æƒ…å†µã€‚æŠŠçŠ¶æ€çš„åˆ¤æ–­é€»è¾‘è½¬ç§»åˆ°è¡¨ç¤ºä¸åŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç±»å½“ä¸­ï¼Œå¯ä»¥æŠŠå¤æ‚çš„åˆ¤æ–­é€»è¾‘ç®€åŒ–ã€‚**å½“ç„¶ï¼Œå¦‚æœè¿™ä¸ªçŠ¶æ€åˆ¤æ–­å¾ˆç®€å•ï¼Œé‚£å°±æ²¡å¿…è¦ç”¨â€çŠ¶æ€æ¨¡å¼â€œäº†ã€‚\nç»“æ„å›¾ çŠ¶æ€æ¨¡å¼å¥½å¤„ä¸ç”¨å¤„ å°†ç‰¹å®šçš„çŠ¶æ€ç›¸å…³çš„è¡Œä¸ºéƒ½æ”¾å…¥ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œç”±äºæ‰€æœ‰ä¸çŠ¶æ€ç›¸å…³çš„ä»£ç éƒ½å­˜åœ¨äºæŸä¸ªConcreteStateä¸­ï¼Œæ‰€ä»¥é€šè¿‡å®šä¹‰æ–°çš„å­ç±»å¯ä»¥å¾ˆå®¹æ˜“åœ°å¢åŠ æ–°çš„çŠ¶æ€å’Œè½¬æ¢ã€‚\nè¿™æ ·åšçš„ç›®çš„å°±æ˜¯ä¸ºäº†æ¶ˆé™¤åºå¤§çš„æ¡ä»¶åˆ†æ”¯è¯­å¥ï¼Œå¤§çš„åˆ†æ”¯åˆ¤æ–­ä¼šä½¿å¾—å®ƒä»¬éš¾ä»¥ä¿®æ”¹å’Œæ‰©å±•ï¼Œä»»ä½•æ”¹åŠ¨å’Œå˜åŒ–éƒ½æ˜¯è‡´å‘½çš„ã€‚çŠ¶æ€æ¨¡å¼é€šè¿‡æŠŠå„ç§çŠ¶æ€è½¬ç§»é€»è¾‘åˆ†å¸ƒåˆ°State çš„å­ç±»ä¹‹é—´ï¼Œæ¥å‡å°‘ç›¸äº’é—´çš„ä¾èµ–ï¼Œæ­¤æ—¶å°±å®¹æ˜“ç»´æŠ¤å’Œæ‰©å±•äº†ã€‚\nä½•æ—¶ä½¿ç”¨çŠ¶æ€æ¨¡å¼ **å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶åˆ»æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºæ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨çŠ¶æ€æ¨¡å¼äº†ã€‚**å¦å¤–å¦‚æœä¸šåŠ¡éœ€æ±‚æŸé¡¹ä¸šåŠ¡æœ‰å¤šä¸ªçŠ¶æ€ï¼Œé€šå¸¸éƒ½æ˜¯ä¸€äº›æšä¸¾å¸¸é‡ï¼ŒçŠ¶æ€çš„å˜åŒ–éƒ½æ˜¯ä¾é å¤§é‡çš„å¤šåˆ†æ”¯åˆ¤æ–­è¯­å¥æ¥å®ç°ï¼Œæ­¤æ—¶åº”è¯¥è€ƒè™‘å°†æ¯ä¸€ç§ä¸šåŠ¡çŠ¶æ€å®šä¹‰ä¸ºä¸€ä¸ªStateçš„å­ç±»ã€‚è¿™æ ·è¿™äº›å¯¹è±¡å°±å¯ä»¥ä¸ä¾èµ–äºå…¶ä»–å¯¹è±¡è€Œç‹¬ç«‹å˜åŒ–äº†ï¼ŒæŸä¸€å¤©å®¢æˆ·éœ€è¦æ›´æ”¹éœ€æ±‚ï¼Œå¢åŠ æˆ–å‡å°‘ä¸šåŠ¡çŠ¶æ€æˆ–æ”¹å˜çŠ¶æ€æµç¨‹ï¼Œéƒ½æ˜¯ä¸å›°éš¾çš„äº‹ã€‚\nä»£ç å®ç° State\n1 2 3 public interface State { void handle(Context context); } FirstState\n1 2 3 4 5 6 7 8 9 10 11 public class FirstState implements State{ @Override public void handle(Context context) { if (context.getFlag() \u003c 12) System.out.println(\"first state\"); else { context.setState(new SecondState()); context.request(); } } } SecondState\n1 2 3 4 5 6 7 8 9 10 11 public class SecondState implements State{ @Override public void handle(Context context) { if (context.getFlag() \u003c 17) System.out.println(\"second state\"); else { context.setState(new ThirdState()); context.request(); } } } ThirdState\n1 2 3 4 5 6 public class ThirdState implements State{ @Override public void handle(Context context) { System.out.println(\"third state\"); } } Context\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Context { private int flag; private State state; public Context(State state) { this.state = state; } public void request(){ state.handle(this); } // ... get and set } main\n1 2 3 4 5 6 7 8 9 public static void main(String[] args) { Context context = new Context(new FirstState()); context.setFlag(11); context.request(); context.setFlag(13); context.request(); context.setFlag(18); context.request(); } ç­–ç•¥æ¨¡å¼â€”â€”å•†åœºä¿ƒé”€ å¯¹äºå•†åœºä¿ƒé”€çš„ä¾‹å­ï¼Œç®€å•å·¥å‚æ¨¡å¼è™½ç„¶ä¹Ÿèƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†è¿™ä¸ªæ¨¡å¼åªæ˜¯è§£å†³å¯¹è±¡çš„åˆ›å»ºé—®é¢˜ï¼Œè€Œä¸”ç”±äºå·¥å‚æœ¬èº«åŒ…æ‹¬äº†æ‰€æœ‰çš„æ”¶è´¹æ–¹å¼ï¼Œå•†åœºæ˜¯å¯èƒ½ç»å¸¸æ€§åœ°æ›´æ”¹æ‰“æŠ˜é¢åº¦å’Œè¿”åˆ©é¢åº¦ï¼Œæ¯æ¬¡ç»´æŠ¤æˆ–æ‰©å±•æ”¶è´¹æ–¹å¼éƒ½è¦æ”¹åŠ¨è¿™ä¸ªå·¥å‚ï¼Œä»¥è‡´ä»£ç éœ€é‡æ–°ç¼–è¯‘éƒ¨ç½²ï¼Œæ‰€ä»¥ç”¨å®ƒä¸æ˜¯æœ€å¥½çš„åŠæ³•ã€‚é¢å¯¹ç®—æ³•çš„æ—¶å¸¸å˜åŠ¨ï¼Œæœ‰æ›´å¥½çš„åŠæ³•ã€‚\nç­–ç•¥æ¨¡å¼(Strategy)ï¼šå®ƒå®šä¹‰äº†ç®—æ³•å®¶æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ï¼Œä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚\nç»“æ„å›¾ ç­–ç•¥æ¨¡å¼å®ç° Strategyæ¥å£ï¼Œå„ç§ç®—æ³•éƒ½è¦å®ç°è¿™ä¸ªæ¥å£\n1 2 3 public interface Strategy { double getResult(double money); } ç®—æ³•å®ç°ç±»\n1 2 3 4 5 6 public class CashNormal implements Strategy{ @Override public double getResult(double money) { return money; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class CashRebate implements Strategy{ private double rebate = 1; public CashRebate(){ } public CashRebate(double rebate){ this.rebate = rebate; } @Override public double getResult(double money) { return money * rebate; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class CashReturn implements Strategy{ private double moneyCondition; private double moneyReturn; public CashReturn(double moneyCondition, double moneyReturn){ this.moneyCondition = moneyCondition; this.moneyReturn = moneyReturn; } @Override public double getResult(double money) { return money \u003e= moneyCondition ? money - Math.floor(money / moneyCondition) * moneyReturn : money; } } Context\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class CashContext { private Strategy strategy; public CashContext(Strategy strategy){ this.strategy = strategy; } public double getResult(double money){ return strategy.getResult(money); } } ä¸»å‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 public class StrategyTest { public static void main(String[] args) { System.out.println(StrategyTest.test(\"normal\", 200)); System.out.println(StrategyTest.test(\"rebate\", 200)); System.out.println(StrategyTest.test(\"return\", 200)); } public static double test(String op,double money){ CashContext cashContext = null; switch (op){ case \"normal\":{ cashContext = new CashContext(new CashNormal()); break; } case \"rebate\":{ cashContext = new CashContext(new CashRebate(0.8)); break; } case \"return\":{ cashContext = new CashContext(new CashReturn(200, 20)); break; } } return cashContext.getResult(money); } } è¿™ç§æ–¹å¼æ˜¯åœ¨å®¢æˆ·ç«¯å»åˆ¤æ–­ç”¨å“ªä¸€ä¸ªè’œè´©ï¼Œèƒ½å¦æŠŠè¿™ä¸ªåˆ¤æ–­çš„è¿‡ç¨‹ä»å®¢æˆ·ç«¯ç¨‹åºè½¬ç§»èµ°ï¼Ÿ â€“\u003e ç®€å•å·¥å‚\nç­–ç•¥ä¸ç®€å•å·¥å‚ç»“åˆ åªéœ€ä¿®æ”¹Contextç±»å³å¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 public class CashContextPro { private Strategy strategy; public CashContextPro(String op){ switch (op){ case \"normal\":{ strategy = new CashNormal(); break; } case \"rebate\":{ strategy = new CashRebate(0.8); break; } case \"return\":{ strategy = new CashReturn(200, 20); break; } } } public double getResult(double money){ return strategy.getResult(money); } } ä¸»å‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class StrategyTest { public static void main(String[] args) { System.out.println(StrategyTest.test2(\"normal\", 200)); System.out.println(StrategyTest.test2(\"rebate\", 200)); System.out.println(StrategyTest.test2(\"return\", 200)); } public static double test2(String op,double money){ return new CashContextPro(op).getResult(money); } } ç­–ç•¥æ¨¡å¼è§£æ ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•çš„æ–¹æ³•ï¼Œä»æ¦‚å¿µä¸Šæ¥çœ‹ï¼Œæ‰€æœ‰è¿™äº›ç®—æ³•å®Œæˆçš„éƒ½æ˜¯ç›¸åŒçš„å·¥ä½œï¼Œåªæ˜¯å®ç°ä¸åŒï¼Œå®ƒå¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼è°ƒç”¨æ‰€æœ‰çš„ç®—æ³•ï¼Œå‡å°‘äº†å„ç§ç®—æ³•ç±»ä¸ä½¿ç”¨ç®—æ³•ç±»ä¹‹é—´çš„è€¦åˆã€‚\nç­–ç•¥æ¨¡å¼çš„Strategyç±»å±‚æ¬¡ä¸ºContextå®šä¹‰äº†ä¸€ç³»åˆ—çš„å¯ä¾›é‡ç”¨çš„ç®—æ³•æˆ–è¡Œä¸ºã€‚ç»§æ‰¿æœ‰åŠ©äºæå–å‡ºè¿™äº›ç®—æ³•ä¸­çš„å…¬å…±åŠŸèƒ½ã€‚å¯¹äºæ‰“æŠ˜ã€è¿”åˆ©æˆ–è€…å…¶ä»–çš„ç®—æ³•ï¼Œå…¶å®éƒ½æ˜¯å¯¹å®é™…å•†å“æ”¶è´¹çš„ä¸€ç§è®¡ç®—æ–¹å¼ï¼Œé€šè¿‡ç»§æ‰¿ï¼Œå¯ä»¥å¾—åˆ°å®ƒä»¬çš„å…¬å…±åŠŸèƒ½ã€‚\nç­–ç•¥æ¨¡å¼å°±æ˜¯ç”¨æ¥å°è£…ç®—æ³•çš„ï¼Œä½†åœ¨å®è·µä¸­ï¼Œå¯ä»¥ç”¨å®ƒæ¥å°è£…å‡ ä¹ä»»ä½•ç±»å‹çš„è§„åˆ™ï¼Œåªè¦åœ¨åˆ†æè¿‡ç¨‹ä¸­å¬åˆ°éœ€è¦åœ¨ä¸åŒæ—¶é—´åº”ç”¨ä¸åŒçš„ä¸šåŠ¡è§„åˆ™ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç­–ç•¥æ¨¡å¼å¤„ç†è¿™ç§å˜åŒ–çš„å¯èƒ½æ€§ã€‚\nä½†æ˜¯è¿™ç§æ–¹å¼è¿˜æœ‰ä¸€äº›ä¸è¶³ï¼šå¦‚æœå¢åŠ ä¸€ç§ç®—æ³•å°±å¿…é¡»æ›´æ”¹switchçš„ä»£ç \næ›´å¥½çš„æ–¹æ³• ï¼š==åå°„==\næ³¨ï¼šåœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ç« èŠ‚æœ‰å¯¹åå°„çš„è®²è§£\næ¨¡æ¿æ–¹æ³•æ¨¡å¼â€”â€”ç­”é¢˜æ¨¡æ¿ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚\nç»“æ„å›¾ æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯é€šè¿‡æŠŠä¸å˜è¡Œä¸ºæ¬ç§»åˆ°è¶…ç±»ï¼Œå»é™¤å­ç±»ä¸­çš„é‡å¤ä»£ç æ¥ä½“ç°å®ƒçš„ä¼˜åŠ¿ã€‚\næ¨¡æ¿æ–¹æ³•æ¨¡å¼å°±æ˜¯æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„ä»£ç å¤ç”¨å¹³å°ã€‚\nå½“ä¸å˜çš„å’Œå¯å˜çš„è¡Œä¸ºåœ¨æ–¹æ³•çš„å­ç±»å®ç°ä¸­æ··åˆåœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œä¸å˜çš„è¡Œä¸ºå°±ä¼šåœ¨å­ç±»ä¸­é‡å¤å‡ºç°ã€‚é€šè¿‡æ¨¡æ¿æ–¹æ³•æ¨¡å¼æŠŠè¿™äº›è¡Œä¸ºæ¬ç§»åˆ°å•ä¸€çš„åœ°æ–¹ï¼Œè¿™æ ·å°±å¸®åŠ©å­ç±»æ‘†è„±é‡å¤çš„ä¸å˜è¡Œä¸ºçš„çº ç¼ ã€‚\næ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç å®ç° Templete class\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 public abstract class Template { public void test1(){ System.out.println(\"test1: \" + answer1()); } public void test2(){ System.out.println(\"test2: \" + answer2()); } public void test3(){ System.out.println(\"test3: \" + answer3()); } public abstract String answer1(); public abstract String answer2(); public abstract String answer3(); } Concrete class\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class Person1 extends Template{ @Override public String answer1() { return \"a\"; } @Override public String answer2() { return \"b\"; } @Override public String answer3() { return \"c\"; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class Person2 extends Template{ @Override public String answer1() { return \"c\"; } @Override public String answer2() { return \"b\"; } @Override public String answer3() { return \"a\"; } } test class\n1 2 3 4 5 6 7 8 9 10 11 12 public class TemplateMethodTest { public static void main(String[] args) { Template person1 = new Person1(); Template person2 = new Person2(); person1.test1(); person1.test2(); person1.test3(); person2.test1(); person2.test2(); person2.test3(); } } è®¿é—®è€…æ¨¡å¼â€”â€”ç”·å¥³å¯¹æ¯” è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰ï¼Œè¡¨ç¤ºä¸€ä¸ªä½œç”¨äºæŸå¯¹è±¡ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œã€‚å®ƒä½¿ä½ å¯ä»¥åœ¨ä¸æ”¹å˜å„å…ƒç´ çš„ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚\nè®¿é—®è€…æ¨¡å¼é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹ç¨³å®šçš„ç³»ç»Ÿã€‚\nå®ƒæŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–ã€‚\n**è®¿é—®è€…æ¨¡å¼çš„ç›®çš„æ˜¯è¦æŠŠå¤„ç†ä»æ•°æ®ç»“æ„åˆ†ç¦»å‡ºæ¥ã€‚å¾ˆå¤šç³»ç»Ÿå¯ä»¥æŒ‰ç…§ç®—æ³•å’Œæ•°æ®ç»“æ„åˆ†å¼€ï¼Œå¦‚æœè¿™æ ·çš„ç³»ç»Ÿæœ‰æ¯”è¾ƒç¨³å®šçš„æ•°æ®ç»“æ„ï¼Œåˆæœ‰æ˜“äºå˜åŒ–çš„ç®—æ³•çš„è¯ï¼Œä½¿ç”¨è®¿é—®è€…æ¨¡å¼å°±æ˜¯æ¯”è¾ƒåˆé€‚çš„ï¼Œå› ä¸ºè®¿é—®è€…æ¨¡å¼ä½¿å¾—ç®—æ³•æ“ä½œçš„å¢åŠ å˜å¾—å®¹æ˜“ã€‚**åä¹‹ï¼Œå¦‚æœè¿™æ ·çš„ç³»ç»Ÿçš„æ•°æ®ç»“æ„å¯¹è±¡æ˜“äºå˜åŒ–ï¼Œç»å¸¸è¦æœ‰æ–°çš„æ•°æ®å¯¹è±¡å¢åŠ è¿›æ¥ï¼Œå°±ä¸é€‚åˆä½¿ç”¨è®¿é—®è€…æ¨¡å¼ã€‚\nè®¿é—®è€…æ¨¡å¼çš„ä¼˜ç‚¹å°±æ˜¯å¢åŠ æ–°çš„æ“ä½œå¾ˆå®¹æ˜“ï¼Œå› ä¸ºå¢åŠ æ–°çš„æ“ä½œå°±æ„å‘³ç€å¢åŠ ä¸€ä¸ªæ–°çš„è®¿é—®è€…ã€‚è®¿é—®è€…æ¨¡å¼å°†æœ‰å…³çš„è¡Œä¸ºé›†ä¸­åˆ°ä¸€ä¸ªè®¿é—®è€…å¯¹è±¡ä¸­ã€‚\nè®¿é—®è€…çš„ç¼ºç‚¹å…¶å®ä¹Ÿå°±æ˜¯ä½¿å¢åŠ æ–°çš„æ•°æ®ç»“æ„å˜å¾—å›°éš¾äº†ã€‚\nç»“æ„å›¾ ä»£ç å®ç° Element\n1 2 3 public interface Element { void accept(Visitor visitor); } Visitor\n1 2 3 4 public interface Visitor { void visitorElementA(ConcreteElementA element); void visitorElementB(ConcreteElementB element); } ConcreteElement\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class ConcreteElementA implements Element{ String name; public ConcreteElementA(String name) { this.name = name; } public String getName() { return name; } @Override public void accept(Visitor visitor) { visitor.visitorElementA(this); } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class ConcreteElementB implements Element{ String name; public ConcreteElementB(String name) { this.name = name; } public String getName() { return name; } @Override public void accept(Visitor visitor) { visitor.visitorElementB(this); } } ConcreteVisitor\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 public class ConcreteVisitorA implements Visitor{ String name; public ConcreteVisitorA(String name) { this.name = name; } @Override public void visitorElementA(ConcreteElementA element) { System.out.println(this.name + \" visit \" + element.getName()); } @Override public void visitorElementB(ConcreteElementB element) { System.out.println(this.name + \" visit \" + element.getName()); } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 public class ConcreteVisitorB implements Visitor{ String name; public ConcreteVisitorB(String name) { this.name = name; } @Override public void visitorElementA(ConcreteElementA element) { System.out.println(this.name + \" visit \" + element.getName()); } @Override public void visitorElementB(ConcreteElementB element) { System.out.println(this.name + \" visit \" + element.getName()); } } ObjectStructure\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class ObjectStructure { List\u003cElement\u003e elements = new ArrayList\u003c\u003e(); public void attach(Element element){ elements.add(element); } public void detach(Element element){ elements.remove(element); } public void display(Visitor visitor){ for (Element element : elements) { element.accept(visitor); } } } Client\n1 2 3 4 5 6 7 8 public static void main(String[] args) { ObjectStructure objectStructure = new ObjectStructure(); ConcreteElementA elementA = new ConcreteElementA(\"element a\"); ConcreteElementB elementB = new ConcreteElementB(\"element b\"); objectStructure.attach(elementA); objectStructure.attach(elementB); objectStructure.display(new ConcreteVisitorA(\"visitor a\")); } ",
  "wordCount" : "7132",
  "inLanguage": "zh",
  "datePublished": "2021-09-14T00:00:00Z",
  "dateModified": "2021-09-14T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "chance7bin"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://chance7bin.github.io/posts/basic/pattern/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Binb's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://chance7bin.github.io/" accesskey="h" title="Binb&#39;s Blog (Alt + H)">
                <img src="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg" alt="" aria-label="logo"
                    height="35">Binb&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://chance7bin.github.io/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://chance7bin.github.io/" title="ğŸ  ä¸»é¡µ">
                    <span>ğŸ  ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://chance7bin.github.io/archives/" title="â±ï¸ æ—¶é—´è½´">
                    <span>â±ï¸ æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://chance7bin.github.io/posts" title="ğŸ“š æ–‡ç« ">
                    <span>ğŸ“š æ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://chance7bin.github.io/tags" title="ğŸ”– æ ‡ç­¾">
                    <span>ğŸ”– æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/chance7bin" title="GitHub">
                    <span>GitHub</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://chance7bin.github.io/">ğŸ  ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://chance7bin.github.io/posts/">ğŸ“š æ–‡ç« </a>&nbsp;Â»&nbsp;<a href="https://chance7bin.github.io/posts/basic/">ğŸ“• è®¡ç®—æœºåŸºç¡€</a>&nbsp;Â»&nbsp;<a href="https://chance7bin.github.io/posts/basic/pattern/">è®¾è®¡æ¨¡å¼</a></div>
    <h1 class="post-title">
      è¡Œä¸ºæ¨¡å¼
    </h1>
    <div class="post-meta">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">


<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2021-09-14
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>7132å­—
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>15åˆ†é’Ÿ
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>chance7bin
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
            <span class="post-tags-meta">
                <a href="https://chance7bin.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="color: var(--secondary)!important;">è®¾è®¡æ¨¡å¼</a>
            </span>
        </span>
    </span>

    
</span>


      
      
      
      
      
      
      
          
          
          
              
              
              
              
          
      
    </div>
  </header>
   <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">ç›®å½•</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e8%81%8c%e8%b4%a3%e9%93%be%e6%a8%a1%e5%bc%8f%e5%8a%a0%e8%96%aa" aria-label="èŒè´£é“¾æ¨¡å¼â€”â€”åŠ è–ª">èŒè´£é“¾æ¨¡å¼â€”â€”åŠ è–ª</a><ul>
                            
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e5%9b%be" aria-label="ç»“æ„å›¾">ç»“æ„å›¾</a></li>
                    <li>
                        <a href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0" aria-label="ä»£ç å®ç°">ä»£ç å®ç°</a></li>
                    <li>
                        <a href="#%e8%81%8c%e8%b4%a3%e9%93%be%e7%9a%84%e5%a5%bd%e5%a4%84" aria-label="èŒè´£é“¾çš„å¥½å¤„">èŒè´£é“¾çš„å¥½å¤„</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%91%bd%e4%bb%a4%e6%a8%a1%e5%bc%8f%e7%82%b9%e8%8f%9c" aria-label="å‘½ä»¤æ¨¡å¼â€”â€”ç‚¹èœ">å‘½ä»¤æ¨¡å¼â€”â€”ç‚¹èœ</a><ul>
                            
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e5%9b%be-1" aria-label="ç»“æ„å›¾">ç»“æ„å›¾</a></li>
                    <li>
                        <a href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0-1" aria-label="ä»£ç å®ç°">ä»£ç å®ç°</a></li>
                    <li>
                        <a href="#%e5%91%bd%e4%bb%a4%e6%a8%a1%e5%bc%8f%e4%bd%9c%e7%94%a8" aria-label="å‘½ä»¤æ¨¡å¼ä½œç”¨">å‘½ä»¤æ¨¡å¼ä½œç”¨</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%bf%ad%e4%bb%a3%e5%99%a8%e6%a8%a1%e5%bc%8f%e6%a3%80%e7%a5%a8" aria-label="è¿­ä»£å™¨æ¨¡å¼â€”â€”æ£€ç¥¨">è¿­ä»£å™¨æ¨¡å¼â€”â€”æ£€ç¥¨</a></li>
                    <li>
                        <a href="#%e4%b8%ad%e4%bb%8b%e8%80%85%e6%a8%a1%e5%bc%8f%e8%81%94%e5%90%88%e5%9b%bd" aria-label="ä¸­ä»‹è€…æ¨¡å¼â€”â€”è”åˆå›½">ä¸­ä»‹è€…æ¨¡å¼â€”â€”è”åˆå›½</a><ul>
                            
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e5%9b%be-2" aria-label="ç»“æ„å›¾">ç»“æ„å›¾</a></li>
                    <li>
                        <a href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0-2" aria-label="ä»£ç å®ç°">ä»£ç å®ç°</a></li>
                    <li>
                        <a href="#%e4%b8%ad%e4%bb%8b%e8%80%85%e6%a8%a1%e5%bc%8f%e4%bc%98%e7%bc%ba%e7%82%b9" aria-label="ä¸­ä»‹è€…æ¨¡å¼ä¼˜ç¼ºç‚¹">ä¸­ä»‹è€…æ¨¡å¼ä¼˜ç¼ºç‚¹</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%a4%87%e5%bf%98%e5%bd%95%e6%a8%a1%e5%bc%8f%e5%ad%98%e8%bf%9b%e5%ba%a6" aria-label="å¤‡å¿˜å½•æ¨¡å¼â€”â€”å­˜è¿›åº¦">å¤‡å¿˜å½•æ¨¡å¼â€”â€”å­˜è¿›åº¦</a><ul>
                            
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e5%9b%be-3" aria-label="ç»“æ„å›¾">ç»“æ„å›¾</a></li>
                    <li>
                        <a href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0-3" aria-label="ä»£ç å®ç°">ä»£ç å®ç°</a></li>
                    <li>
                        <a href="#%e5%ba%94%e7%94%a8" aria-label="åº”ç”¨">åº”ç”¨</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%a7%82%e5%af%9f%e8%80%85%e6%a8%a1%e5%bc%8fboss%e6%9d%a5%e4%ba%86" aria-label="è§‚å¯Ÿè€…æ¨¡å¼â€”â€”BOSSæ¥äº†">è§‚å¯Ÿè€…æ¨¡å¼â€”â€”BOSSæ¥äº†</a><ul>
                            
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e5%9b%be-4" aria-label="ç»“æ„å›¾">ç»“æ„å›¾</a></li>
                    <li>
                        <a href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0-4" aria-label="ä»£ç å®ç°">ä»£ç å®ç°</a></li>
                    <li>
                        <a href="#%e8%a7%82%e5%af%9f%e8%80%85%e6%a8%a1%e5%bc%8f%e7%9a%84%e7%89%b9%e7%82%b9" aria-label="è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹">è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹</a></li>
                    <li>
                        <a href="#%e4%bd%95%e6%97%b6%e4%bd%bf%e7%94%a8%e8%a7%82%e5%af%9f%e8%80%85" aria-label="ä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…">ä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…</a></li>
                    <li>
                        <a href="#%e8%a7%82%e5%af%9f%e8%80%85%e6%a8%a1%e5%bc%8f%e7%9a%84%e4%b8%8d%e8%b6%b3" aria-label="è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³">è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³</a></li>
                    <li>
                        <a href="#%e4%ba%8b%e4%bb%b6%e5%a7%94%e6%89%98" aria-label="äº‹ä»¶å§”æ‰˜">äº‹ä»¶å§”æ‰˜</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e7%8a%b6%e6%80%81%e6%a8%a1%e5%bc%8f%e5%a4%9a%e5%88%86%e6%94%af%e5%88%a4%e6%96%ad" aria-label="çŠ¶æ€æ¨¡å¼â€”â€”å¤šåˆ†æ”¯åˆ¤æ–­">çŠ¶æ€æ¨¡å¼â€”â€”å¤šåˆ†æ”¯åˆ¤æ–­</a><ul>
                            
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e5%9b%be-5" aria-label="ç»“æ„å›¾">ç»“æ„å›¾</a></li>
                    <li>
                        <a href="#%e7%8a%b6%e6%80%81%e6%a8%a1%e5%bc%8f%e5%a5%bd%e5%a4%84%e4%b8%8e%e7%94%a8%e5%a4%84" aria-label="çŠ¶æ€æ¨¡å¼å¥½å¤„ä¸ç”¨å¤„">çŠ¶æ€æ¨¡å¼å¥½å¤„ä¸ç”¨å¤„</a></li>
                    <li>
                        <a href="#%e4%bd%95%e6%97%b6%e4%bd%bf%e7%94%a8%e7%8a%b6%e6%80%81%e6%a8%a1%e5%bc%8f" aria-label="ä½•æ—¶ä½¿ç”¨çŠ¶æ€æ¨¡å¼">ä½•æ—¶ä½¿ç”¨çŠ¶æ€æ¨¡å¼</a></li>
                    <li>
                        <a href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0-5" aria-label="ä»£ç å®ç°">ä»£ç å®ç°</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f%e5%95%86%e5%9c%ba%e4%bf%83%e9%94%80" aria-label="ç­–ç•¥æ¨¡å¼â€”â€”å•†åœºä¿ƒé”€">ç­–ç•¥æ¨¡å¼â€”â€”å•†åœºä¿ƒé”€</a><ul>
                            
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e5%9b%be-6" aria-label="ç»“æ„å›¾">ç»“æ„å›¾</a></li>
                    <li>
                        <a href="#%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f%e5%ae%9e%e7%8e%b0" aria-label="ç­–ç•¥æ¨¡å¼å®ç°">ç­–ç•¥æ¨¡å¼å®ç°</a></li>
                    <li>
                        <a href="#%e7%ad%96%e7%95%a5%e4%b8%8e%e7%ae%80%e5%8d%95%e5%b7%a5%e5%8e%82%e7%bb%93%e5%90%88" aria-label="ç­–ç•¥ä¸ç®€å•å·¥å‚ç»“åˆ">ç­–ç•¥ä¸ç®€å•å·¥å‚ç»“åˆ</a></li>
                    <li>
                        <a href="#%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f%e8%a7%a3%e6%9e%90" aria-label="ç­–ç•¥æ¨¡å¼è§£æ">ç­–ç•¥æ¨¡å¼è§£æ</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%a8%a1%e6%9d%bf%e6%96%b9%e6%b3%95%e6%a8%a1%e5%bc%8f%e7%ad%94%e9%a2%98%e6%a8%a1%e6%9d%bf" aria-label="æ¨¡æ¿æ–¹æ³•æ¨¡å¼â€”â€”ç­”é¢˜æ¨¡æ¿">æ¨¡æ¿æ–¹æ³•æ¨¡å¼â€”â€”ç­”é¢˜æ¨¡æ¿</a><ul>
                            
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e5%9b%be-7" aria-label="ç»“æ„å›¾">ç»“æ„å›¾</a></li>
                    <li>
                        <a href="#%e6%a8%a1%e6%9d%bf%e6%96%b9%e6%b3%95%e6%a8%a1%e5%bc%8f%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0" aria-label="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç å®ç°">æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç å®ç°</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%ae%bf%e9%97%ae%e8%80%85%e6%a8%a1%e5%bc%8f%e7%94%b7%e5%a5%b3%e5%af%b9%e6%af%94" aria-label="è®¿é—®è€…æ¨¡å¼â€”â€”ç”·å¥³å¯¹æ¯”">è®¿é—®è€…æ¨¡å¼â€”â€”ç”·å¥³å¯¹æ¯”</a><ul>
                            
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e5%9b%be-8" aria-label="ç»“æ„å›¾">ç»“æ„å›¾</a></li>
                    <li>
                        <a href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0-6" aria-label="ä»£ç å®ç°">ä»£ç å®ç°</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><h3 id="èŒè´£é“¾æ¨¡å¼åŠ è–ª">èŒè´£é“¾æ¨¡å¼â€”â€”åŠ è–ª<a hidden class="anchor" aria-hidden="true" href="#èŒè´£é“¾æ¨¡å¼åŠ è–ª">#</a></h3>
<p><strong>èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ï¼šä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™ä¸ªå¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</strong></p>
<h4 id="ç»“æ„å›¾">ç»“æ„å›¾<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„å›¾">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282337527.png" alt="image-20210913150115072"  />
</p>
<h4 id="ä»£ç å®ç°">ä»£ç å®ç°<a hidden class="anchor" aria-hidden="true" href="#ä»£ç å®ç°">#</a></h4>
<p><strong>Handler</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Handler</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Handler</span> <span class="n">successor</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSuccessor</span><span class="o">(</span><span class="n">Handler</span> <span class="n">successor</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">successor</span> <span class="o">=</span> <span class="n">successor</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">request</span><span class="o">(</span><span class="kt">int</span> <span class="n">type</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ConcreteHandler</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Handler1</span> <span class="kd">extends</span> <span class="n">Handler</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">request</span><span class="o">(</span><span class="kt">int</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">type</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;handler 1 print&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="kd">super</span><span class="o">.</span><span class="na">successor</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">super</span><span class="o">.</span><span class="na">successor</span><span class="o">.</span><span class="na">request</span><span class="o">(</span><span class="n">type</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;can&#39;t solve&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Handler2</span> <span class="kd">extends</span> <span class="n">Handler</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">request</span><span class="o">(</span><span class="kt">int</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">type</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;handler 2 print&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="kd">super</span><span class="o">.</span><span class="na">successor</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">super</span><span class="o">.</span><span class="na">successor</span><span class="o">.</span><span class="na">request</span><span class="o">(</span><span class="n">type</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;can&#39;t solve&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Handler3</span> <span class="kd">extends</span> <span class="n">Handler</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">request</span><span class="o">(</span><span class="kt">int</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">type</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;handler 2 print&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="kd">super</span><span class="o">.</span><span class="na">successor</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">super</span><span class="o">.</span><span class="na">successor</span><span class="o">.</span><span class="na">request</span><span class="o">(</span><span class="n">type</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;can&#39;t solve&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Client</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Handler1</span> <span class="n">handler1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Handler1</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">Handler2</span> <span class="n">handler2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Handler2</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">Handler3</span> <span class="n">handler3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Handler3</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">handler1</span><span class="o">.</span><span class="na">setSuccessor</span><span class="o">(</span><span class="n">handler2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">handler2</span><span class="o">.</span><span class="na">setSuccessor</span><span class="o">(</span><span class="n">handler3</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span><span class="o">[]</span> <span class="n">test</span> <span class="o">=</span> <span class="o">{</span><span class="mi">5</span><span class="o">,</span><span class="mi">15</span><span class="o">,</span><span class="mi">25</span><span class="o">,</span><span class="mi">35</span><span class="o">};</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="n">test</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">handler1</span><span class="o">.</span><span class="na">request</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">handler 1 print
</span></span><span class="line"><span class="cl">handler 2 print
</span></span><span class="line"><span class="cl">handler 2 print
</span></span><span class="line"><span class="cl">can&#39;t solve
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="èŒè´£é“¾çš„å¥½å¤„">èŒè´£é“¾çš„å¥½å¤„<a hidden class="anchor" aria-hidden="true" href="#èŒè´£é“¾çš„å¥½å¤„">#</a></h4>
<p>å½“å®¢æˆ·æäº¤ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œè¯·æ±‚æ˜¯æ²¿é“¾ä¼ é€’ç›´è‡³æœ‰ä¸€ä¸ªConcreteHandlerå¯¹è±¡è´Ÿè´£å¤„ç†å®ƒã€‚</p>
<p>è¿™å°±ä½¿å¾—æ¥æ”¶è€…å’Œå‘é€è€…éƒ½æ²¡æœ‰å¯¹æ–¹çš„æ˜ç¡®ä¿¡æ¯ï¼Œä¸”é“¾ä¸­çš„å¯¹è±¡è‡ªå·±ä¹Ÿå¹¶ä¸çŸ¥é“é“¾çš„ç»“æ„ã€‚ç»“æœæ˜¯èŒè´£é“¾å¯ç®€åŒ–å¯¹è±¡çš„ç›¸äº’è¿æ¥ï¼Œå®ƒä»¬ä»…éœ€ä¿æŒä¸€ä¸ªæŒ‡å‘å…¶åç»§è€…çš„å¼•ç”¨ï¼Œè€Œä¸éœ€ä¿æŒå®ƒæ‰€æœ‰çš„å€™é€‰æ¥å—è€…çš„å¼•ç”¨ã€‚è¿™å¤§å¤§é™ä½äº†è€¦åˆåº¦ã€‚</p>
<p>ç”±äºæ˜¯åœ¨å®¢æˆ·ç«¯æ¥å®šä¹‰é“¾çš„ç»“æ„ï¼Œå¯ä»¥éšæ—¶åœ°å¢åŠ æˆ–ä¿®æ”¹å¤„ç†ä¸€ä¸ªè¯·æ±‚çš„ç»“æ„ã€‚å¢å¼ºäº†ç»™å¯¹è±¡æŒ‡æ´¾èŒè´£çš„çµæ´»æ€§ã€‚</p>
<h3 id="å‘½ä»¤æ¨¡å¼ç‚¹èœ">å‘½ä»¤æ¨¡å¼â€”â€”ç‚¹èœ<a hidden class="anchor" aria-hidden="true" href="#å‘½ä»¤æ¨¡å¼ç‚¹èœ">#</a></h3>
<p><strong>å‘½ä»¤æ¨¡å¼ï¼ˆCommand)ï¼Œå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–;å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚</strong></p>
<h4 id="ç»“æ„å›¾-1">ç»“æ„å›¾<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„å›¾-1">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282337543.png" alt="image-20210913105412344"  />
</p>
<h4 id="ä»£ç å®ç°-1">ä»£ç å®ç°<a hidden class="anchor" aria-hidden="true" href="#ä»£ç å®ç°-1">#</a></h4>
<p><strong>Receiver</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Receiver</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">action1</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;action1&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">action2</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;action2&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Command</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Commend</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Receiver</span> <span class="n">receiver</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Commend</span><span class="o">(</span><span class="n">Receiver</span> <span class="n">receiver</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">receiver</span> <span class="o">=</span> <span class="n">receiver</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ConcreteCommand</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteCommend1</span> <span class="kd">extends</span> <span class="n">Commend</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">ConcreteCommend1</span><span class="o">(</span><span class="n">Receiver</span> <span class="n">receiver</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">(</span><span class="n">receiver</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">receiver</span><span class="o">.</span><span class="na">action1</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Invoker</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Invoker</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Commend</span> <span class="n">commend</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Invoker</span><span class="o">(</span><span class="n">Commend</span> <span class="n">commend</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">commend</span> <span class="o">=</span> <span class="n">commend</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">execute</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">commend</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Client</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Receiver</span> <span class="n">receiver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Receiver</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">ConcreteCommend1</span> <span class="n">concreteCommend1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteCommend1</span><span class="o">(</span><span class="n">receiver</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">Invoker</span> <span class="n">invoker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Invoker</span><span class="o">(</span><span class="n">concreteCommend1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">invoker</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å‘½ä»¤æ¨¡å¼ä½œç”¨">å‘½ä»¤æ¨¡å¼ä½œç”¨<a hidden class="anchor" aria-hidden="true" href="#å‘½ä»¤æ¨¡å¼ä½œç”¨">#</a></h4>
<p>ç¬¬ä¸€ï¼Œå®ƒèƒ½è¾ƒå®¹æ˜“åœ°è®¾è®¡ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—ï¼›</p>
<p>ç¬¬äºŒï¼Œåœ¨éœ€è¦çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¾ƒå®¹æ˜“åœ°å°†å‘½ä»¤è®°å…¥æ—¥å¿—ï¼›</p>
<p>ç¬¬ä¸‰ï¼Œå…è®¸æ¥æ”¶è¯·æ±‚çš„ä¸€æ–¹å†³å®šæ˜¯å¦è¦å¦å†³è¯·æ±‚ã€‚</p>
<p>ç¬¬å››ï¼Œå¯ä»¥å®¹æ˜“åœ°å®ç°å¯¹è¯·æ±‚çš„æ’¤é”€å’Œé‡åš;</p>
<p>ç¬¬äº”ï¼Œç”±äºåŠ è¿›æ–°çš„å…·ä½“å‘½ä»¤ç±»ä¸å½±å“å…¶ä»–çš„ç±»ï¼Œå› æ­¤å¢åŠ æ–°çš„å…·ä½“å‘½ä»¤ç±»å¾ˆå®¹æ˜“ã€‚</p>
<p>å…¶å®è¿˜æœ‰æœ€å…³é”®çš„ä¼˜ç‚¹å°±æ˜¯å‘½ä»¤æ¨¡å¼æŠŠè¯·æ±‚ä¸€ä¸ªæ“ä½œçš„å¯¹è±¡ä¸çŸ¥é“æ€ä¹ˆæ‰§è¡Œä¸€ä¸ªæ“ä½œçš„å¯¹è±¡åˆ†å‰²å¼€ã€‚</p>
<p>å‘½ä»¤æ¨¡å¼æ”¯æŒæ’¤é”€/æ¢å¤æ“ä½œåŠŸèƒ½ï¼Œä½†è¿˜ä¸æ¸…æ¥šæ˜¯å¦éœ€è¦è¿™ä¸ªåŠŸèƒ½æ—¶ï¼Œè¦ä¸è¦å®ç°å‘½ä»¤æ¨¡å¼ï¼Ÿ</p>
<p>åº”è¯¥æ˜¯ä¸è¦å®ç°ã€‚æ•æ·å¼€å‘åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼Œä¸è¦ä¸ºä»£ç æ·»åŠ åŸºäºçŒœæµ‹çš„ã€å®é™…ä¸éœ€è¦çš„åŠŸèƒ½ã€‚å¦‚æœä¸æ¸…æ¥šä¸€ä¸ªç³»ç»Ÿæ˜¯å¦éœ€è¦å‘½ä»¤æ¨¡å¼ï¼Œä¸€èˆ¬å°±ä¸è¦ç€æ€¥å»å®ç°å®ƒï¼Œäº‹å®ä¸Šï¼Œåœ¨éœ€è¦çš„æ—¶å€™é€šè¿‡é‡æ„å®ç°è¿™ä¸ªæ¨¡å¼å¹¶ä¸å›°éš¾ï¼Œåªæœ‰åœ¨çœŸæ­£éœ€è¦å¦‚æ’¤é”€/æ¢å¤æ“ä½œç­‰åŠŸèƒ½æ—¶ï¼ŒæŠŠåŸæ¥çš„ä»£ç é‡æ„ä¸ºå‘½ä»¤æ¨¡å¼æ‰æœ‰æ„ä¹‰ã€‚</p>
<h3 id="è¿­ä»£å™¨æ¨¡å¼æ£€ç¥¨">è¿­ä»£å™¨æ¨¡å¼â€”â€”æ£€ç¥¨<a hidden class="anchor" aria-hidden="true" href="#è¿­ä»£å™¨æ¨¡å¼æ£€ç¥¨">#</a></h3>
<p><strong>è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator)ï¼Œæä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</strong></p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282338859.png" alt="image-20210913215321421"  />
</p>
<p>è·³è¿‡&hellip;</p>
<h3 id="ä¸­ä»‹è€…æ¨¡å¼è”åˆå›½">ä¸­ä»‹è€…æ¨¡å¼â€”â€”è”åˆå›½<a hidden class="anchor" aria-hidden="true" href="#ä¸­ä»‹è€…æ¨¡å¼è”åˆå›½">#</a></h3>
<p><strong>ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator)ï¼Œç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</strong></p>
<h4 id="ç»“æ„å›¾-2">ç»“æ„å›¾<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„å›¾-2">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282338396.png" alt="image-20210913155157051"  />
</p>
<h4 id="ä»£ç å®ç°-2">ä»£ç å®ç°<a hidden class="anchor" aria-hidden="true" href="#ä»£ç å®ç°-2">#</a></h4>
<p><strong>Mediator</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Mediator</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">send</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">,</span> <span class="n">Colleague</span> <span class="n">colleague</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Colleague</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Colleague</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Mediator</span> <span class="n">mediator</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Colleague</span><span class="o">(</span><span class="n">Mediator</span> <span class="n">mediator</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">mediator</span> <span class="o">=</span> <span class="n">mediator</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ConcreteColleague</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Colleague1</span> <span class="kd">extends</span> <span class="n">Colleague</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Colleague1</span><span class="o">(</span><span class="n">Mediator</span> <span class="n">mediator</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">(</span><span class="n">mediator</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">.</span><span class="na">mediator</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">msg</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;colleague 1 receive: &#34;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Colleague2</span> <span class="kd">extends</span> <span class="n">Colleague</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Colleague2</span><span class="o">(</span><span class="n">Mediator</span> <span class="n">mediator</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">(</span><span class="n">mediator</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">.</span><span class="na">mediator</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">msg</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;colleague 2 receive: &#34;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ConcreteMediator</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteMediator</span> <span class="kd">extends</span> <span class="n">Mediator</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Colleague1</span> <span class="n">colleague1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Colleague2</span> <span class="n">colleague2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setColleague1</span><span class="o">(</span><span class="n">Colleague1</span> <span class="n">colleague1</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">colleague1</span> <span class="o">=</span> <span class="n">colleague1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setColleague2</span><span class="o">(</span><span class="n">Colleague2</span> <span class="n">colleague2</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">colleague2</span> <span class="o">=</span> <span class="n">colleague2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">send</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">,</span> <span class="n">Colleague</span> <span class="n">colleague</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">colleague</span> <span class="k">instanceof</span> <span class="n">Colleague1</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">colleague2</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="n">colleague1</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">colleague 2 receive: hello man
</span></span><span class="line"><span class="cl">colleague 1 receive: see you man
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ä¸­ä»‹è€…æ¨¡å¼ä¼˜ç¼ºç‚¹">ä¸­ä»‹è€…æ¨¡å¼ä¼˜ç¼ºç‚¹<a hidden class="anchor" aria-hidden="true" href="#ä¸­ä»‹è€…æ¨¡å¼ä¼˜ç¼ºç‚¹">#</a></h4>
<p>ä¸­ä»‹è€…æ¨¡å¼å¾ˆå®¹æ˜“åœ¨ç³»ç»Ÿä¸­åº”ç”¨ï¼Œä¹Ÿå¾ˆå®¹æ˜“åœ¨ç³»ç»Ÿä¸­è¯¯ç”¨ã€‚å½“ç³»ç»Ÿå‡ºç°äº†â€œå¤šå¯¹å¤šâ€äº¤äº’å¤æ‚çš„å¯¹è±¡ç¾¤æ—¶ï¼Œä¸è¦æ€¥äºä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼Œè€Œè¦å…ˆåæ€ç³»ç»Ÿåœ¨è®¾è®¡ä¸Šæ˜¯ä¸æ˜¯åˆç†ã€‚</p>
<p>ä¸­ä»‹è€…æ¨¡å¼çš„ä¼˜ç‚¹é¦–å…ˆæ˜¯Mediatorçš„å‡ºç°å‡å°‘äº†å„ä¸ªColleagueçš„è€¦åˆï¼Œä½¿å¾—å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨å„ä¸ªColleagueç±»å’ŒMediatorï¼Œæ¯”å¦‚ä»»ä½•å›½å®¶çš„æ”¹å˜ä¸ä¼šå½±å“åˆ°å…¶ä»–å›½å®¶ï¼Œè€Œåªæ˜¯ä¸å®‰ç†ä¼šå‘ç”Ÿå˜åŒ–ã€‚å…¶æ¬¡ï¼Œç”±äºæŠŠå¯¹è±¡å¦‚ä½•åä½œè¿›è¡Œäº†æŠ½è±¡ï¼Œå°†ä¸­ä»‹ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¦‚å¿µå¹¶å°†å…¶å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¿™æ ·å…³æ³¨çš„å¯¹è±¡å°±ä»å¯¹è±¡å„è‡ªæœ¬èº«çš„è¡Œä¸ºè½¬ç§»åˆ°å®ƒä»¬ä¹‹é—´çš„äº¤äº’ä¸Šæ¥ï¼Œä¹Ÿå°±æ˜¯ç«™åœ¨ä¸€ä¸ªæ›´å®è§‚çš„è§’åº¦å»çœ‹å¾…ç³»ç»Ÿã€‚</p>
<p>ç”±äºConcreteMediator æ§åˆ¶äº†é›†ä¸­åŒ–ï¼Œäºæ˜¯å°±æŠŠäº¤äº’å¤æ‚æ€§å˜ä¸ºäº†ä¸­ä»‹è€…çš„å¤æ‚æ€§ï¼Œè¿™å°±ä½¿å¾—ä¸­ä»‹è€…ä¼šå˜å¾—æ¯”ä»»ä½•ä¸€ä¸ª ConcreteColleagueéƒ½å¤æ‚ã€‚</p>
<p>ä¸­ä»‹è€…æ¨¡å¼ä¸€èˆ¬åº”ç”¨äºä¸€ç»„å¯¹è±¡ä»¥å®šä¹‰è‰¯å¥½ä½†æ˜¯å¤æ‚çš„æ–¹å¼è¿›è¡Œé€šä¿¡çš„åœºåˆï¼Œæ¯”å¦‚çª—ä½“Formå¯¹è±¡ï¼ˆè®¡ç®—å™¨ï¼‰ï¼Œä»¥åŠæƒ³å®šåˆ¶ä¸€ä¸ªåˆ†å¸ƒåœ¨å¤šä¸ªç±»ä¸­çš„è¡Œä¸ºï¼Œè€Œåˆä¸æƒ³ç”Ÿæˆå¤ªå¤šçš„å­ç±»çš„åœºåˆã€‚</p>
<h3 id="å¤‡å¿˜å½•æ¨¡å¼å­˜è¿›åº¦">å¤‡å¿˜å½•æ¨¡å¼â€”â€”å­˜è¿›åº¦<a hidden class="anchor" aria-hidden="true" href="#å¤‡å¿˜å½•æ¨¡å¼å­˜è¿›åº¦">#</a></h3>
<p><strong>å¤‡å¿˜å½•(Memento)ï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚</strong></p>
<h4 id="ç»“æ„å›¾-3">ç»“æ„å›¾<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„å›¾-3">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282338140.png" alt="image-20210910143733697"  />
</p>
<h4 id="ä»£ç å®ç°-3">ä»£ç å®ç°<a hidden class="anchor" aria-hidden="true" href="#ä»£ç å®ç°-3">#</a></h4>
<p><strong>å‘èµ·äººï¼ˆOriginatorï¼‰ç±»</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Originator</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// éœ€è¦ä¿å­˜çš„å±æ€§ï¼Œå¯èƒ½æœ‰å¤šä¸ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">hp</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">attack</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">defence</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Memento</span> <span class="nf">save</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// åˆ›å»ºå¤‡å¿˜å½•,å°†å½“å‰éœ€è¦ä¿å­˜çš„ä¿¡æ¯å¯¼å…¥å¹¶å®ä¾‹åŒ–å‡ºä¸€ä¸ªMementoå¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="k">new</span> <span class="n">Memento</span><span class="o">(</span><span class="n">attack</span><span class="o">,</span><span class="n">defence</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">grow</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">hp</span> <span class="o">+=</span> <span class="mi">10</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">attack</span> <span class="o">+=</span> <span class="mi">10</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">defence</span> <span class="o">+=</span> <span class="mi">10</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;grow...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">reload</span><span class="o">(</span><span class="n">Memento</span> <span class="n">memento</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// æ¢å¤å¤‡å¿˜å½•ï¼Œå°† Mementoå¯¼å…¥å¹¶å°†ç›¸å…³æ•°æ®æ¢å¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">attack</span> <span class="o">=</span> <span class="n">memento</span><span class="o">.</span><span class="na">attack</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">defence</span> <span class="o">=</span> <span class="n">memento</span><span class="o">.</span><span class="na">defence</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;reload...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;Originator{&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;hp=&#34;</span> <span class="o">+</span> <span class="n">hp</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;, attack=&#34;</span> <span class="o">+</span> <span class="n">attack</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;, defence=&#34;</span> <span class="o">+</span> <span class="n">defence</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">            <span class="sc">&#39;}&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// éœ€è¦ä¿å­˜çš„å±æ€§ï¼Œå¯èƒ½æœ‰å¤šä¸ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// getter and setter...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>å¤‡å¿˜å½•ï¼ˆMementoï¼‰ç±»</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Memento</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">attack</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">defence</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Memento</span><span class="o">(</span><span class="kt">int</span> <span class="n">attack</span><span class="o">,</span> <span class="kt">int</span> <span class="n">defence</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">attack</span> <span class="o">=</span> <span class="n">attack</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">defence</span> <span class="o">=</span> <span class="n">defence</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ç®¡ç†è€…ï¼ˆCaretakerï¼‰ç±»</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CareTaker</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Memento</span> <span class="n">memento</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Memento</span> <span class="nf">getMemento</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">memento</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMemento</span><span class="o">(</span><span class="n">Memento</span> <span class="n">memento</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">memento</span> <span class="o">=</span> <span class="n">memento</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>å®¢æˆ·ç«¯ç¨‹åº</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Originator</span> <span class="n">originator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Originator</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">CareTaker</span> <span class="n">careTaker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CareTaker</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">originator</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ä¿å­˜çŠ¶æ€æ—¶ï¼Œç”±äºæœ‰äº†å¾ˆå¥½çš„å°è£…,å¯ä»¥éšè— Originatorçš„å®ç°ç»†èŠ‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">careTaker</span><span class="o">.</span><span class="na">setMemento</span><span class="o">(</span><span class="n">originator</span><span class="o">.</span><span class="na">save</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">originator</span><span class="o">.</span><span class="na">grow</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">originator</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">originator</span><span class="o">.</span><span class="na">reload</span><span class="o">(</span><span class="n">careTaker</span><span class="o">.</span><span class="na">getMemento</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">originator</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="åº”ç”¨">åº”ç”¨<a hidden class="anchor" aria-hidden="true" href="#åº”ç”¨">#</a></h4>
<p><strong>Mementoæ¨¡å¼æ¯”è¾ƒé€‚ç”¨äºåŠŸèƒ½æ¯”è¾ƒå¤æ‚çš„ï¼Œä½†éœ€è¦ç»´æŠ¤æˆ–è®°å½•å±æ€§å†å²çš„ç±»ï¼Œæˆ–è€…éœ€è¦ä¿å­˜çš„å±æ€§åªæ˜¯ä¼—å¤šå±æ€§ä¸­çš„ä¸€å°éƒ¨åˆ†æ—¶ï¼ŒOriginatorå¯ä»¥æ ¹æ®ä¿å­˜çš„Mementoä¿¡æ¯è¿˜åŸåˆ°å‰ä¸€çŠ¶æ€ã€‚</strong></p>
<p>**å¦‚æœåœ¨æŸä¸ªç³»ç»Ÿä¸­ä½¿ç”¨å‘½ä»¤æ¨¡å¼æ—¶ï¼Œéœ€è¦å®ç°å‘½ä»¤çš„æ’¤é”€åŠŸèƒ½ï¼Œé‚£ä¹ˆå‘½ä»¤æ¨¡å¼å¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•æ¨¡å¼æ¥å­˜å‚¨å¯æ’¤é”€æ“ä½œçš„çŠ¶æ€ã€‚**æœ‰æ—¶ä¸€äº›å¯¹è±¡çš„å†…éƒ¨ä¿¡æ¯å¿…é¡»ä¿å­˜åœ¨å¯¹è±¡ä»¥å¤–çš„åœ°æ–¹ï¼Œä½†æ˜¯å¿…é¡»è¦ç”±å¯¹è±¡è‡ªå·±è¯»å–ï¼Œè¿™æ—¶ï¼Œ<strong>ä½¿ç”¨å¤‡å¿˜å½•å¯ä»¥æŠŠå¤æ‚çš„å¯¹è±¡å†…éƒ¨ä¿¡æ¯å¯¹å…¶ä»–çš„å¯¹è±¡å±è”½èµ·æ¥</strong>ï¼Œä»è€Œå¯ä»¥æ°å½“åœ°ä¿æŒå°è£…çš„è¾¹ç•Œã€‚</p>
<p><strong>å½“è§’è‰²çš„çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½è¿™ä¸ªçŠ¶æ€æ— æ•ˆï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨æš‚æ—¶å­˜å‚¨èµ·æ¥çš„å¤‡å¿˜å½•å°†çŠ¶æ€å¤åŸã€‚</strong></p>
<h3 id="è§‚å¯Ÿè€…æ¨¡å¼bossæ¥äº†">è§‚å¯Ÿè€…æ¨¡å¼â€”â€”BOSSæ¥äº†<a hidden class="anchor" aria-hidden="true" href="#è§‚å¯Ÿè€…æ¨¡å¼bossæ¥äº†">#</a></h3>
<p><strong>è§‚å¯Ÿè€…æ¨¡å¼åˆå«åšå‘å¸ƒ-è®¢é˜…ï¼ˆPublish/Subscribeï¼‰æ¨¡å¼ã€‚è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚</strong></p>
<p><strong>ç¤ºä¾‹ç»“æ„å›¾</strong></p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282338437.png" alt="image-20210820103345649"  />
</p>
<h4 id="ç»“æ„å›¾-4">ç»“æ„å›¾<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„å›¾-4">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282338455.png" alt="image-20210820103326508"  />
</p>
<h4 id="ä»£ç å®ç°-4">ä»£ç å®ç°<a hidden class="anchor" aria-hidden="true" href="#ä»£ç å®ç°-4">#</a></h4>
<p><strong>Observer</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Observer</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">update</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Notifier</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Notifier</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">List</span><span class="o">&lt;</span><span class="n">Observer</span><span class="o">&gt;</span> <span class="n">observers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">state</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">attach</span><span class="o">(</span><span class="n">Observer</span> <span class="n">observer</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">observers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">observer</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">detach</span><span class="o">(</span><span class="n">Observer</span> <span class="n">observer</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">observers</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">observer</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">notify2Observer</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">Observer</span> <span class="n">observer</span> <span class="o">:</span> <span class="n">observers</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">observer</span><span class="o">.</span><span class="na">update</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getState</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">state</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setState</span><span class="o">(</span><span class="n">String</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ConcreteObserver</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteObserver</span> <span class="kd">implements</span> <span class="n">Observer</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Notifier</span> <span class="n">notifier</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">ConcreteObserver</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Notifier</span> <span class="n">notifier</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">notifier</span> <span class="o">=</span> <span class="n">notifier</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span> <span class="o">+</span> <span class="s">&#34;:&#34;</span> <span class="o">+</span> <span class="n">notifier</span><span class="o">.</span><span class="na">getState</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ConcreteNotifier</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteNotifier</span> <span class="kd">extends</span> <span class="n">Notifier</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>main</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObserverTest</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Notifier</span> <span class="n">notifier</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteNotifier</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Observer</span> <span class="n">observer1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteObserver</span><span class="o">(</span><span class="s">&#34;a&#34;</span><span class="o">,</span> <span class="n">notifier</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Observer</span> <span class="n">observer2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteObserver</span><span class="o">(</span><span class="s">&#34;b&#34;</span><span class="o">,</span> <span class="n">notifier</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">notifier</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">observer1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">notifier</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">observer2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">notifier</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="s">&#34;è€æ¿æ¥å•¦&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">notifier</span><span class="o">.</span><span class="na">notify2Observer</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">notifier</span><span class="o">.</span><span class="na">detach</span><span class="o">(</span><span class="n">observer2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">notifier</span><span class="o">.</span><span class="na">notify2Observer</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹">è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹<a hidden class="anchor" aria-hidden="true" href="#è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹">#</a></h4>
<p>**å°†ä¸€ä¸ªç³»ç»Ÿåˆ†å‰²æˆä¸€ç³»åˆ—ç›¸äº’åä½œçš„ç±»æœ‰ä¸€ä¸ªå¾ˆä¸å¥½çš„å‰¯ä½œç”¨ï¼Œé‚£å°±æ˜¯éœ€è¦ç»´æŠ¤ç›¸å…³å¯¹è±¡é—´çš„ä¸€è‡´æ€§ã€‚æˆ‘ä»¬ä¸å¸Œæœ›ä¸ºäº†ç»´æŒä¸€è‡´æ€§è€Œä½¿å„ç±»ç´§å¯†è€¦åˆï¼Œè¿™æ ·ä¼šç»™ç»´æŠ¤ã€æ‰©å±•å’Œé‡ç”¨éƒ½å¸¦æ¥ä¸ä¾¿ã€‚**è€Œè§‚å¯Ÿè€…æ¨¡å¼çš„å…³é”®å¯¹è±¡æ˜¯ä¸»é¢˜Subjectå’Œè§‚å¯Ÿè€…Observerï¼Œä¸€ä¸ªSubjectå¯ä»¥æœ‰ä»»æ„æ•°ç›®çš„ä¾èµ–å®ƒçš„Observerï¼Œä¸€æ—¦Subject çš„çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€æœ‰çš„Observeréƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥ã€‚Subject å‘å‡ºé€šçŸ¥æ—¶å¹¶ä¸éœ€è¦çŸ¥é“è°æ˜¯å®ƒçš„è§‚å¯Ÿè€…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…·ä½“è§‚å¯Ÿè€…æ˜¯è°ï¼Œå®ƒæ ¹æœ¬ä¸éœ€è¦çŸ¥é“ã€‚è€Œä»»ä½•ä¸€ä¸ªå…·ä½“è§‚å¯Ÿè€…ä¸çŸ¥é“ä¹Ÿä¸éœ€è¦çŸ¥é“å…¶ä»–è§‚å¯Ÿè€…çš„å­˜åœ¨ã€‚</p>
<h4 id="ä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…">ä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…<a hidden class="anchor" aria-hidden="true" href="#ä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…">#</a></h4>
<p>å½“ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜éœ€è¦åŒæ—¶æ”¹å˜å…¶ä»–å¯¹è±¡çš„æ—¶å€™ï¼Œè€Œä¸”å®ƒä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡æœ‰å¾…æ”¹å˜æ—¶ï¼Œåº”è¯¥è€ƒè™‘ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p>
<p>å½“ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€æ–¹é¢ä¾èµ–äºå¦ä¸€æ–¹é¢ï¼Œè¿™æ—¶ç”¨è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥å°†è¿™ä¸¤è€…å°è£…åœ¨ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä½¿å®ƒä»¬å„è‡ªç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨ã€‚</p>
<p>è§‚å¯Ÿè€…æ¨¡å¼æ‰€åšçš„å·¥ä½œå…¶å®å°±æ˜¯åœ¨è§£é™¤è€¦åˆã€‚è®©è€¦åˆçš„åŒæ–¹éƒ½ä¾èµ–äºæŠ½è±¡ï¼Œè€Œä¸æ˜¯ä¾èµ–äºå…·ä½“ã€‚ä»è€Œä½¿å¾—å„è‡ªçš„å˜åŒ–éƒ½ä¸ä¼šå½±å“å¦ä¸€è¾¹çš„å˜åŒ–ã€‚</p>
<h4 id="è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³">è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³<a hidden class="anchor" aria-hidden="true" href="#è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³">#</a></h4>
<p>å°½ç®¡å·²ç»ç”¨äº†ä¾èµ–å€’è½¬åŸåˆ™ï¼Œä½†æ˜¯â€æŠ½è±¡é€šçŸ¥è€…â€œè¿˜æ˜¯ä¾èµ–â€æŠ½è±¡è§‚å¯Ÿè€…â€œ&rsquo;ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‡ä¸€æ²¡æœ‰äº†æŠ½è±¡è§‚å¯Ÿè€…è¿™æ ·çš„æ¥å£ï¼Œé€šçŸ¥çš„åŠŸèƒ½å°±å®Œä¸æˆäº†ã€‚å¦å¤–å°±æ˜¯æ¯ä¸ªå…·ä½“è§‚å¯Ÿè€…ï¼Œå®ƒä¸ä¸€å®šæ˜¯â€æ›´æ–°â€œçš„æ–¹æ³•è¦è°ƒç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå¸Œæœ›çš„æ˜¯â€å·¥å…·ç®±â€œæ˜¯éšè—ï¼Œâ€è‡ªåŠ¨çª—å£â€œæ˜¯æ‰“å¼€ï¼Œè¿™è¿™äº›éƒ½ä¸æ˜¯åŒåçš„æ–¹æ³•ã€‚</p>
<p>å¦‚æœé€šçŸ¥è€…å’Œè§‚å¯Ÿè€…ä¹‹é—´æ ¹æœ¬å°±äº’ç›¸ä¸çŸ¥é“ï¼Œç”±å®¢æˆ·ç«¯æ¥å†³å®šé€šçŸ¥è°ï¼Œé‚£å°±å¥½äº†ã€‚</p>
<h4 id="äº‹ä»¶å§”æ‰˜">äº‹ä»¶å§”æ‰˜<a hidden class="anchor" aria-hidden="true" href="#äº‹ä»¶å§”æ‰˜">#</a></h4>
<p>å§”æ‰˜æ˜¯ä¸€ç§å¼•ç”¨æ–¹æ³•çš„ç±»å‹ã€‚ä¸€æ—¦ä¸ºå§”æ‰˜åˆ†é…äº†æ–¹æ³•ï¼Œå§”æ‰˜å°†ä¸è¯¥æ–¹æ³•å…·æœ‰å®Œå…¨ç›¸åŒçš„è¡Œä¸ºã€‚å§”æ‰˜æ–¹æ³•çš„ä½¿ç”¨å¯ä»¥åƒå…¶ä»–ä»»ä½•æ–¹æ³•ä¸€æ ·ï¼Œå…·æœ‰å‚æ•°å’Œè¿”å›å€¼ã€‚å§”æ‰˜å¯ä»¥çœ‹ä½œæ˜¯å¯¹å‡½æ•°çš„æŠ½è±¡ï¼Œæ˜¯å‡½æ•°çš„â€ç±»â€œï¼Œå§”æ‰˜çš„å®ä¾‹å°†ä»£è¡¨ä¸€ä¸ªå…·ä½“çš„å‡½æ•°ã€‚</p>
<p>ä¸€ä¸ªå§”æ‰˜å¯ä»¥æ­è½½å¤šä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰æ–¹æ³•è¢«ä¾æ¬¡å”¤èµ·ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒå¯ä»¥ä½¿å¾—å§”æ‰˜å¯¹è±¡æ‰€æ­è½½çš„æ–¹æ³•å¹¶ä¸éœ€è¦å±äºåŒä¸€ä¸ªç±»ã€‚</p>
<p>ä½†å§”æ‰˜ä¹Ÿæ˜¯æœ‰å‰æçš„ï¼Œé‚£å°±æ˜¯å§”æ‰˜å¯¹è±¡æ‰€æ­è½½çš„æ‰€æœ‰æ–¹æ³•å¿…é¡»å…·æœ‰ç›¸åŒçš„åŸå½¢å’Œå½¢å¼ï¼Œä¹Ÿå°±æ˜¯æ‹¥æœ‰ç›¸åŒçš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ã€‚</p>
<p><strong>==â€œå§”æ‰˜â€åœ¨C#ä¸­æ˜¯ä¸€ä¸ªè¯­è¨€çº§ç‰¹æ€§ï¼Œè€Œåœ¨Javaè¯­è¨€ä¸­æ²¡æœ‰ç›´æ¥çš„å¯¹åº”ï¼Œä½†æ˜¯javaåˆ©ç”¨åå°„å³å¯å®ç°å§”æ‰˜ï¼==</strong></p>
<p><a href="https://blog.csdn.net/Seriousplus/article/details/80462722">https://blog.csdn.net/Seriousplus/article/details/80462722</a></p>
<p>å§”æ´¾å’Œç»§æ‰¿éƒ½æ˜¯ä¸ºäº†ä»£ç å¤ç”¨ï¼Œåªæ˜¯æ–¹å¼ä¸åŒã€‚</p>
<ul>
<li>å§”æ‰˜å¯ä»¥è¢«çœ‹ä½œæ˜¯å¯¹è±¡çº§åˆ«çš„é‡ç”¨æœºåˆ¶ï¼Œè€Œç»§æ‰¿æ˜¯ç±»çº§åˆ«çš„é‡ç”¨æœºåˆ¶ã€‚</li>
<li>æ­¤å¤–ï¼Œå¦‚æœå­ç±»åªéœ€è¦å¤ç”¨çˆ¶ç±»ä¸­çš„ä¸€å°éƒ¨åˆ†æ–¹æ³•ï¼Œå¯ä»¥ä¸éœ€ è¦ä½¿ç”¨ç»§æ‰¿ï¼Œè€Œæ˜¯é€šè¿‡å§”æ´¾æœºåˆ¶æ¥å®ç°</li>
</ul>
<h3 id="çŠ¶æ€æ¨¡å¼å¤šåˆ†æ”¯åˆ¤æ–­">çŠ¶æ€æ¨¡å¼â€”â€”å¤šåˆ†æ”¯åˆ¤æ–­<a hidden class="anchor" aria-hidden="true" href="#çŠ¶æ€æ¨¡å¼å¤šåˆ†æ”¯åˆ¤æ–­">#</a></h3>
<p><strong>çŠ¶æ€æ¨¡å¼ï¼ˆState)ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶å…è®¸æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥åƒæ˜¯æ”¹å˜äº†å…¶ç±»ã€‚</strong></p>
<p>**çŠ¶æ€æ¨¡å¼ä¸»è¦è§£å†³çš„æ˜¯å½“æ§åˆ¶ä¸€ä¸ªå¯¹è±¡çŠ¶æ€è½¬æ¢çš„æ¡ä»¶è¡¨è¾¾å¼è¿‡äºå¤æ‚æ—¶çš„æƒ…å†µã€‚æŠŠçŠ¶æ€çš„åˆ¤æ–­é€»è¾‘è½¬ç§»åˆ°è¡¨ç¤ºä¸åŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç±»å½“ä¸­ï¼Œå¯ä»¥æŠŠå¤æ‚çš„åˆ¤æ–­é€»è¾‘ç®€åŒ–ã€‚**å½“ç„¶ï¼Œå¦‚æœè¿™ä¸ªçŠ¶æ€åˆ¤æ–­å¾ˆç®€å•ï¼Œé‚£å°±æ²¡å¿…è¦ç”¨â€çŠ¶æ€æ¨¡å¼â€œäº†ã€‚</p>
<h4 id="ç»“æ„å›¾-5">ç»“æ„å›¾<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„å›¾-5">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282339893.png" alt="image-20210821101018906"  />
</p>
<h4 id="çŠ¶æ€æ¨¡å¼å¥½å¤„ä¸ç”¨å¤„">çŠ¶æ€æ¨¡å¼å¥½å¤„ä¸ç”¨å¤„<a hidden class="anchor" aria-hidden="true" href="#çŠ¶æ€æ¨¡å¼å¥½å¤„ä¸ç”¨å¤„">#</a></h4>
<p><strong>å°†ç‰¹å®šçš„çŠ¶æ€ç›¸å…³çš„è¡Œä¸ºéƒ½æ”¾å…¥ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œç”±äºæ‰€æœ‰ä¸çŠ¶æ€ç›¸å…³çš„ä»£ç éƒ½å­˜åœ¨äºæŸä¸ªConcreteStateä¸­ï¼Œæ‰€ä»¥é€šè¿‡å®šä¹‰æ–°çš„å­ç±»å¯ä»¥å¾ˆå®¹æ˜“åœ°å¢åŠ æ–°çš„çŠ¶æ€å’Œè½¬æ¢ã€‚</strong></p>
<p>è¿™æ ·åšçš„ç›®çš„å°±æ˜¯ä¸ºäº†<strong>æ¶ˆé™¤åºå¤§çš„æ¡ä»¶åˆ†æ”¯è¯­å¥</strong>ï¼Œå¤§çš„åˆ†æ”¯åˆ¤æ–­ä¼šä½¿å¾—å®ƒä»¬éš¾ä»¥ä¿®æ”¹å’Œæ‰©å±•ï¼Œä»»ä½•æ”¹åŠ¨å’Œå˜åŒ–éƒ½æ˜¯è‡´å‘½çš„ã€‚<strong>çŠ¶æ€æ¨¡å¼é€šè¿‡æŠŠå„ç§çŠ¶æ€è½¬ç§»é€»è¾‘åˆ†å¸ƒåˆ°State çš„å­ç±»ä¹‹é—´ï¼Œæ¥å‡å°‘ç›¸äº’é—´çš„ä¾èµ–</strong>ï¼Œæ­¤æ—¶å°±å®¹æ˜“ç»´æŠ¤å’Œæ‰©å±•äº†ã€‚</p>
<h4 id="ä½•æ—¶ä½¿ç”¨çŠ¶æ€æ¨¡å¼">ä½•æ—¶ä½¿ç”¨çŠ¶æ€æ¨¡å¼<a hidden class="anchor" aria-hidden="true" href="#ä½•æ—¶ä½¿ç”¨çŠ¶æ€æ¨¡å¼">#</a></h4>
<p>**å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶åˆ»æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºæ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨çŠ¶æ€æ¨¡å¼äº†ã€‚**å¦å¤–å¦‚æœä¸šåŠ¡éœ€æ±‚æŸé¡¹ä¸šåŠ¡æœ‰å¤šä¸ªçŠ¶æ€ï¼Œé€šå¸¸éƒ½æ˜¯ä¸€äº›æšä¸¾å¸¸é‡ï¼ŒçŠ¶æ€çš„å˜åŒ–éƒ½æ˜¯ä¾é å¤§é‡çš„å¤šåˆ†æ”¯åˆ¤æ–­è¯­å¥æ¥å®ç°ï¼Œæ­¤æ—¶åº”è¯¥è€ƒè™‘å°†æ¯ä¸€ç§ä¸šåŠ¡çŠ¶æ€å®šä¹‰ä¸ºä¸€ä¸ªStateçš„å­ç±»ã€‚è¿™æ ·è¿™äº›å¯¹è±¡å°±å¯ä»¥ä¸ä¾èµ–äºå…¶ä»–å¯¹è±¡è€Œç‹¬ç«‹å˜åŒ–äº†ï¼ŒæŸä¸€å¤©å®¢æˆ·éœ€è¦æ›´æ”¹éœ€æ±‚ï¼Œå¢åŠ æˆ–å‡å°‘ä¸šåŠ¡çŠ¶æ€æˆ–æ”¹å˜çŠ¶æ€æµç¨‹ï¼Œéƒ½æ˜¯ä¸å›°éš¾çš„äº‹ã€‚</p>
<h4 id="ä»£ç å®ç°-5">ä»£ç å®ç°<a hidden class="anchor" aria-hidden="true" href="#ä»£ç å®ç°-5">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282339900.png" alt="image-20210821102730182"  />
</p>
<p><strong>State</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">State</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>FirstState</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FirstState</span> <span class="kd">implements</span> <span class="n">State</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getFlag</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;first state&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">context</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="k">new</span> <span class="n">SecondState</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">context</span><span class="o">.</span><span class="na">request</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>SecondState</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecondState</span> <span class="kd">implements</span> <span class="n">State</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getFlag</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">17</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;second state&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">context</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="k">new</span> <span class="n">ThirdState</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">context</span><span class="o">.</span><span class="na">request</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ThirdState</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThirdState</span> <span class="kd">implements</span> <span class="n">State</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;third state&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Context</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Context</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kt">int</span> <span class="n">flag</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">State</span> <span class="n">state</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Context</span><span class="o">(</span><span class="n">State</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">request</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">state</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// ... get and set
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>main</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Context</span><span class="o">(</span><span class="k">new</span> <span class="n">FirstState</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="o">.</span><span class="na">setFlag</span><span class="o">(</span><span class="mi">11</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="o">.</span><span class="na">request</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="o">.</span><span class="na">setFlag</span><span class="o">(</span><span class="mi">13</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="o">.</span><span class="na">request</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="o">.</span><span class="na">setFlag</span><span class="o">(</span><span class="mi">18</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="o">.</span><span class="na">request</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç­–ç•¥æ¨¡å¼å•†åœºä¿ƒé”€">ç­–ç•¥æ¨¡å¼â€”â€”å•†åœºä¿ƒé”€<a hidden class="anchor" aria-hidden="true" href="#ç­–ç•¥æ¨¡å¼å•†åœºä¿ƒé”€">#</a></h3>
<p>å¯¹äºå•†åœºä¿ƒé”€çš„ä¾‹å­ï¼Œç®€å•å·¥å‚æ¨¡å¼è™½ç„¶ä¹Ÿèƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†è¿™ä¸ªæ¨¡å¼åªæ˜¯è§£å†³å¯¹è±¡çš„åˆ›å»ºé—®é¢˜ï¼Œè€Œä¸”ç”±äºå·¥å‚æœ¬èº«åŒ…æ‹¬äº†æ‰€æœ‰çš„æ”¶è´¹æ–¹å¼ï¼Œå•†åœºæ˜¯å¯èƒ½ç»å¸¸æ€§åœ°æ›´æ”¹æ‰“æŠ˜é¢åº¦å’Œè¿”åˆ©é¢åº¦ï¼Œæ¯æ¬¡ç»´æŠ¤æˆ–æ‰©å±•æ”¶è´¹æ–¹å¼éƒ½è¦æ”¹åŠ¨è¿™ä¸ªå·¥å‚ï¼Œä»¥è‡´ä»£ç éœ€é‡æ–°ç¼–è¯‘éƒ¨ç½²ï¼Œæ‰€ä»¥ç”¨å®ƒä¸æ˜¯æœ€å¥½çš„åŠæ³•ã€‚é¢å¯¹ç®—æ³•çš„æ—¶å¸¸å˜åŠ¨ï¼Œæœ‰æ›´å¥½çš„åŠæ³•ã€‚</p>
<p><strong>ç­–ç•¥æ¨¡å¼(Strategy)ï¼šå®ƒå®šä¹‰äº†ç®—æ³•å®¶æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ï¼Œä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚</strong></p>
<h4 id="ç»“æ„å›¾-6">ç»“æ„å›¾<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„å›¾-6">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282339687.png" alt="image-20210818151006167"  />
</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282339695.png" alt="image-20210818151117837"  />
</p>
<h4 id="ç­–ç•¥æ¨¡å¼å®ç°">ç­–ç•¥æ¨¡å¼å®ç°<a hidden class="anchor" aria-hidden="true" href="#ç­–ç•¥æ¨¡å¼å®ç°">#</a></h4>
<p><strong>Strategyæ¥å£ï¼Œå„ç§ç®—æ³•éƒ½è¦å®ç°è¿™ä¸ªæ¥å£</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Strategy</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">getResult</span><span class="o">(</span><span class="kt">double</span> <span class="n">money</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ç®—æ³•å®ç°ç±»</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CashNormal</span> <span class="kd">implements</span> <span class="n">Strategy</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getResult</span><span class="o">(</span><span class="kt">double</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">money</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CashRebate</span> <span class="kd">implements</span> <span class="n">Strategy</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kt">double</span> <span class="n">rebate</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">CashRebate</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">CashRebate</span><span class="o">(</span><span class="kt">double</span> <span class="n">rebate</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">rebate</span> <span class="o">=</span> <span class="n">rebate</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getResult</span><span class="o">(</span><span class="kt">double</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">money</span> <span class="o">*</span> <span class="n">rebate</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CashReturn</span> <span class="kd">implements</span> <span class="n">Strategy</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kt">double</span> <span class="n">moneyCondition</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kt">double</span> <span class="n">moneyReturn</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">CashReturn</span><span class="o">(</span><span class="kt">double</span> <span class="n">moneyCondition</span><span class="o">,</span> <span class="kt">double</span> <span class="n">moneyReturn</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">moneyCondition</span> <span class="o">=</span> <span class="n">moneyCondition</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">moneyReturn</span> <span class="o">=</span> <span class="n">moneyReturn</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getResult</span><span class="o">(</span><span class="kt">double</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">money</span> <span class="o">&gt;=</span> <span class="n">moneyCondition</span> <span class="o">?</span> <span class="n">money</span> <span class="o">-</span> <span class="n">Math</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="n">money</span> <span class="o">/</span> <span class="n">moneyCondition</span><span class="o">)</span> <span class="o">*</span> <span class="n">moneyReturn</span> <span class="o">:</span> <span class="n">money</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Context</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CashContext</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Strategy</span> <span class="n">strategy</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">CashContext</span><span class="o">(</span><span class="n">Strategy</span> <span class="n">strategy</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">strategy</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getResult</span><span class="o">(</span><span class="kt">double</span> <span class="n">money</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">strategy</span><span class="o">.</span><span class="na">getResult</span><span class="o">(</span><span class="n">money</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¸»å‡½æ•°</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StrategyTest</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">StrategyTest</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="s">&#34;normal&#34;</span><span class="o">,</span> <span class="mi">200</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">StrategyTest</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="s">&#34;rebate&#34;</span><span class="o">,</span> <span class="mi">200</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">StrategyTest</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="s">&#34;return&#34;</span><span class="o">,</span> <span class="mi">200</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">test</span><span class="o">(</span><span class="n">String</span> <span class="n">op</span><span class="o">,</span><span class="kt">double</span> <span class="n">money</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">CashContext</span> <span class="n">cashContext</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">switch</span> <span class="o">(</span><span class="n">op</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="s">&#34;normal&#34;</span><span class="o">:{</span>
</span></span><span class="line"><span class="cl">                <span class="n">cashContext</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CashContext</span><span class="o">(</span><span class="k">new</span> <span class="n">CashNormal</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="s">&#34;rebate&#34;</span><span class="o">:{</span>
</span></span><span class="line"><span class="cl">                <span class="n">cashContext</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CashContext</span><span class="o">(</span><span class="k">new</span> <span class="n">CashRebate</span><span class="o">(</span><span class="mf">0.8</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="s">&#34;return&#34;</span><span class="o">:{</span>
</span></span><span class="line"><span class="cl">                <span class="n">cashContext</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CashContext</span><span class="o">(</span><span class="k">new</span> <span class="n">CashReturn</span><span class="o">(</span><span class="mi">200</span><span class="o">,</span> <span class="mi">20</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">cashContext</span><span class="o">.</span><span class="na">getResult</span><span class="o">(</span><span class="n">money</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ç§æ–¹å¼æ˜¯åœ¨å®¢æˆ·ç«¯å»åˆ¤æ–­ç”¨å“ªä¸€ä¸ªè’œè´©ï¼Œèƒ½å¦æŠŠè¿™ä¸ªåˆ¤æ–­çš„è¿‡ç¨‹ä»å®¢æˆ·ç«¯ç¨‹åºè½¬ç§»èµ°ï¼Ÿ &ndash;&gt; ç®€å•å·¥å‚</p>
<h4 id="ç­–ç•¥ä¸ç®€å•å·¥å‚ç»“åˆ">ç­–ç•¥ä¸ç®€å•å·¥å‚ç»“åˆ<a hidden class="anchor" aria-hidden="true" href="#ç­–ç•¥ä¸ç®€å•å·¥å‚ç»“åˆ">#</a></h4>
<p><strong>åªéœ€ä¿®æ”¹Contextç±»å³å¯</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CashContextPro</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Strategy</span> <span class="n">strategy</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">CashContextPro</span><span class="o">(</span><span class="n">String</span> <span class="n">op</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">switch</span> <span class="o">(</span><span class="n">op</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="s">&#34;normal&#34;</span><span class="o">:{</span>
</span></span><span class="line"><span class="cl">                <span class="n">strategy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CashNormal</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="s">&#34;rebate&#34;</span><span class="o">:{</span>
</span></span><span class="line"><span class="cl">                <span class="n">strategy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CashRebate</span><span class="o">(</span><span class="mf">0.8</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="s">&#34;return&#34;</span><span class="o">:{</span>
</span></span><span class="line"><span class="cl">                <span class="n">strategy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CashReturn</span><span class="o">(</span><span class="mi">200</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getResult</span><span class="o">(</span><span class="kt">double</span> <span class="n">money</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">strategy</span><span class="o">.</span><span class="na">getResult</span><span class="o">(</span><span class="n">money</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¸»å‡½æ•°</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StrategyTest</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">StrategyTest</span><span class="o">.</span><span class="na">test2</span><span class="o">(</span><span class="s">&#34;normal&#34;</span><span class="o">,</span> <span class="mi">200</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">StrategyTest</span><span class="o">.</span><span class="na">test2</span><span class="o">(</span><span class="s">&#34;rebate&#34;</span><span class="o">,</span> <span class="mi">200</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">StrategyTest</span><span class="o">.</span><span class="na">test2</span><span class="o">(</span><span class="s">&#34;return&#34;</span><span class="o">,</span> <span class="mi">200</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">test2</span><span class="o">(</span><span class="n">String</span> <span class="n">op</span><span class="o">,</span><span class="kt">double</span> <span class="n">money</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">CashContextPro</span><span class="o">(</span><span class="n">op</span><span class="o">).</span><span class="na">getResult</span><span class="o">(</span><span class="n">money</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç­–ç•¥æ¨¡å¼è§£æ">ç­–ç•¥æ¨¡å¼è§£æ<a hidden class="anchor" aria-hidden="true" href="#ç­–ç•¥æ¨¡å¼è§£æ">#</a></h4>
<p>ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•çš„æ–¹æ³•ï¼Œä»æ¦‚å¿µä¸Šæ¥çœ‹ï¼Œæ‰€æœ‰è¿™äº›ç®—æ³•å®Œæˆçš„éƒ½æ˜¯ç›¸åŒçš„å·¥ä½œï¼Œåªæ˜¯å®ç°ä¸åŒï¼Œå®ƒå¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼è°ƒç”¨æ‰€æœ‰çš„ç®—æ³•ï¼Œå‡å°‘äº†å„ç§ç®—æ³•ç±»ä¸ä½¿ç”¨ç®—æ³•ç±»ä¹‹é—´çš„è€¦åˆã€‚</p>
<p>ç­–ç•¥æ¨¡å¼çš„Strategyç±»å±‚æ¬¡ä¸ºContextå®šä¹‰äº†ä¸€ç³»åˆ—çš„å¯ä¾›é‡ç”¨çš„ç®—æ³•æˆ–è¡Œä¸ºã€‚ç»§æ‰¿æœ‰åŠ©äºæå–å‡ºè¿™äº›ç®—æ³•ä¸­çš„å…¬å…±åŠŸèƒ½ã€‚å¯¹äºæ‰“æŠ˜ã€è¿”åˆ©æˆ–è€…å…¶ä»–çš„ç®—æ³•ï¼Œå…¶å®éƒ½æ˜¯å¯¹å®é™…å•†å“æ”¶è´¹çš„ä¸€ç§è®¡ç®—æ–¹å¼ï¼Œé€šè¿‡ç»§æ‰¿ï¼Œå¯ä»¥å¾—åˆ°å®ƒä»¬çš„å…¬å…±åŠŸèƒ½ã€‚</p>
<p>ç­–ç•¥æ¨¡å¼å°±æ˜¯ç”¨æ¥å°è£…ç®—æ³•çš„ï¼Œä½†åœ¨å®è·µä¸­ï¼Œå¯ä»¥ç”¨å®ƒæ¥å°è£…å‡ ä¹ä»»ä½•ç±»å‹çš„è§„åˆ™ï¼Œåªè¦åœ¨åˆ†æè¿‡ç¨‹ä¸­å¬åˆ°éœ€è¦åœ¨ä¸åŒæ—¶é—´åº”ç”¨ä¸åŒçš„ä¸šåŠ¡è§„åˆ™ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç­–ç•¥æ¨¡å¼å¤„ç†è¿™ç§å˜åŒ–çš„å¯èƒ½æ€§ã€‚</p>
<p>ä½†æ˜¯è¿™ç§æ–¹å¼è¿˜æœ‰ä¸€äº›ä¸è¶³ï¼šå¦‚æœå¢åŠ ä¸€ç§ç®—æ³•å°±å¿…é¡»æ›´æ”¹switchçš„ä»£ç </p>
<p>æ›´å¥½çš„æ–¹æ³• ï¼š<strong>==åå°„==</strong></p>
<p>æ³¨ï¼šåœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ç« èŠ‚æœ‰å¯¹åå°„çš„è®²è§£</p>
<h3 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç­”é¢˜æ¨¡æ¿">æ¨¡æ¿æ–¹æ³•æ¨¡å¼â€”â€”ç­”é¢˜æ¨¡æ¿<a hidden class="anchor" aria-hidden="true" href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç­”é¢˜æ¨¡æ¿">#</a></h3>
<p><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚</strong></p>
<h4 id="ç»“æ„å›¾-7">ç»“æ„å›¾<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„å›¾-7">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282339950.png" alt="image-20210819155822961"  />
</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282339959.png" alt="image-20210819155903600"  />
</p>
<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯é€šè¿‡æŠŠä¸å˜è¡Œä¸ºæ¬ç§»åˆ°è¶…ç±»ï¼Œå»é™¤å­ç±»ä¸­çš„é‡å¤ä»£ç æ¥ä½“ç°å®ƒçš„ä¼˜åŠ¿ã€‚</p>
<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼å°±æ˜¯æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„ä»£ç å¤ç”¨å¹³å°ã€‚</p>
<p>å½“ä¸å˜çš„å’Œå¯å˜çš„è¡Œä¸ºåœ¨æ–¹æ³•çš„å­ç±»å®ç°ä¸­æ··åˆåœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œä¸å˜çš„è¡Œä¸ºå°±ä¼šåœ¨å­ç±»ä¸­é‡å¤å‡ºç°ã€‚é€šè¿‡æ¨¡æ¿æ–¹æ³•æ¨¡å¼æŠŠè¿™äº›è¡Œä¸ºæ¬ç§»åˆ°å•ä¸€çš„åœ°æ–¹ï¼Œè¿™æ ·å°±å¸®åŠ©å­ç±»æ‘†è„±é‡å¤çš„ä¸å˜è¡Œä¸ºçš„çº ç¼ ã€‚</p>
<h4 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç å®ç°">æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç å®ç°<a hidden class="anchor" aria-hidden="true" href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç å®ç°">#</a></h4>
<p><strong>Templete class</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Template</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test1</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;test1: &#34;</span> <span class="o">+</span> <span class="n">answer1</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;test2: &#34;</span> <span class="o">+</span> <span class="n">answer2</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test3</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;test3: &#34;</span> <span class="o">+</span> <span class="n">answer3</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">answer1</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">answer2</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">answer3</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Concrete  class</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person1</span> <span class="kd">extends</span> <span class="n">Template</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">answer1</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;a&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">answer2</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;b&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">answer3</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;c&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person2</span> <span class="kd">extends</span> <span class="n">Template</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">answer1</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;c&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">answer2</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;b&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">answer3</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;a&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>test  class</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TemplateMethodTest</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Template</span> <span class="n">person1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person1</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Template</span> <span class="n">person2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person2</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person1</span><span class="o">.</span><span class="na">test1</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person1</span><span class="o">.</span><span class="na">test2</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person1</span><span class="o">.</span><span class="na">test3</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person2</span><span class="o">.</span><span class="na">test1</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person2</span><span class="o">.</span><span class="na">test2</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person2</span><span class="o">.</span><span class="na">test3</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è®¿é—®è€…æ¨¡å¼ç”·å¥³å¯¹æ¯”">è®¿é—®è€…æ¨¡å¼â€”â€”ç”·å¥³å¯¹æ¯”<a hidden class="anchor" aria-hidden="true" href="#è®¿é—®è€…æ¨¡å¼ç”·å¥³å¯¹æ¯”">#</a></h3>
<p><strong>è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰ï¼Œè¡¨ç¤ºä¸€ä¸ªä½œç”¨äºæŸå¯¹è±¡ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œã€‚å®ƒä½¿ä½ å¯ä»¥åœ¨ä¸æ”¹å˜å„å…ƒç´ çš„ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚</strong></p>
<p>è®¿é—®è€…æ¨¡å¼é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹ç¨³å®šçš„ç³»ç»Ÿã€‚</p>
<p>å®ƒæŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–ã€‚</p>
<p>**è®¿é—®è€…æ¨¡å¼çš„ç›®çš„æ˜¯è¦æŠŠå¤„ç†ä»æ•°æ®ç»“æ„åˆ†ç¦»å‡ºæ¥ã€‚<strong>å¾ˆå¤šç³»ç»Ÿå¯ä»¥æŒ‰ç…§ç®—æ³•å’Œæ•°æ®ç»“æ„åˆ†å¼€ï¼Œå¦‚æœè¿™æ ·çš„ç³»ç»Ÿ</strong>æœ‰æ¯”è¾ƒç¨³å®šçš„æ•°æ®ç»“æ„ï¼Œåˆæœ‰æ˜“äºå˜åŒ–çš„ç®—æ³•çš„è¯ï¼Œä½¿ç”¨è®¿é—®è€…æ¨¡å¼å°±æ˜¯æ¯”è¾ƒåˆé€‚çš„ï¼Œå› ä¸ºè®¿é—®è€…æ¨¡å¼ä½¿å¾—ç®—æ³•æ“ä½œçš„å¢åŠ å˜å¾—å®¹æ˜“ã€‚**åä¹‹ï¼Œå¦‚æœè¿™æ ·çš„ç³»ç»Ÿçš„æ•°æ®ç»“æ„å¯¹è±¡æ˜“äºå˜åŒ–ï¼Œç»å¸¸è¦æœ‰æ–°çš„æ•°æ®å¯¹è±¡å¢åŠ è¿›æ¥ï¼Œå°±ä¸é€‚åˆä½¿ç”¨è®¿é—®è€…æ¨¡å¼ã€‚</p>
<p>è®¿é—®è€…æ¨¡å¼çš„ä¼˜ç‚¹å°±æ˜¯å¢åŠ æ–°çš„æ“ä½œå¾ˆå®¹æ˜“ï¼Œå› ä¸ºå¢åŠ æ–°çš„æ“ä½œå°±æ„å‘³ç€å¢åŠ ä¸€ä¸ªæ–°çš„è®¿é—®è€…ã€‚è®¿é—®è€…æ¨¡å¼å°†æœ‰å…³çš„è¡Œä¸ºé›†ä¸­åˆ°ä¸€ä¸ªè®¿é—®è€…å¯¹è±¡ä¸­ã€‚</p>
<p>è®¿é—®è€…çš„ç¼ºç‚¹å…¶å®ä¹Ÿå°±æ˜¯ä½¿å¢åŠ æ–°çš„æ•°æ®ç»“æ„å˜å¾—å›°éš¾äº†ã€‚</p>
<h4 id="ç»“æ„å›¾-8">ç»“æ„å›¾<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„å›¾-8">#</a></h4>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307282339718.png" alt="image-20210914095957448"  />
</p>
<h4 id="ä»£ç å®ç°-6">ä»£ç å®ç°<a hidden class="anchor" aria-hidden="true" href="#ä»£ç å®ç°-6">#</a></h4>
<p><strong>Element</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Element</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="n">Visitor</span> <span class="n">visitor</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Visitor</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Visitor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">visitorElementA</span><span class="o">(</span><span class="n">ConcreteElementA</span> <span class="n">element</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">visitorElementB</span><span class="o">(</span><span class="n">ConcreteElementB</span> <span class="n">element</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ConcreteElement</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteElementA</span> <span class="kd">implements</span> <span class="n">Element</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">ConcreteElementA</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="n">Visitor</span> <span class="n">visitor</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">visitor</span><span class="o">.</span><span class="na">visitorElementA</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteElementB</span> <span class="kd">implements</span> <span class="n">Element</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">ConcreteElementB</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="n">Visitor</span> <span class="n">visitor</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">visitor</span><span class="o">.</span><span class="na">visitorElementB</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ConcreteVisitor</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteVisitorA</span> <span class="kd">implements</span> <span class="n">Visitor</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">ConcreteVisitorA</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitorElementA</span><span class="o">(</span><span class="n">ConcreteElementA</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">&#34; visit &#34;</span> <span class="o">+</span> <span class="n">element</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitorElementB</span><span class="o">(</span><span class="n">ConcreteElementB</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">&#34; visit &#34;</span> <span class="o">+</span> <span class="n">element</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteVisitorB</span> <span class="kd">implements</span> <span class="n">Visitor</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">ConcreteVisitorB</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitorElementA</span><span class="o">(</span><span class="n">ConcreteElementA</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">&#34; visit &#34;</span> <span class="o">+</span> <span class="n">element</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitorElementB</span><span class="o">(</span><span class="n">ConcreteElementB</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">&#34; visit &#34;</span> <span class="o">+</span> <span class="n">element</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ObjectStructure</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObjectStructure</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">List</span><span class="o">&lt;</span><span class="n">Element</span><span class="o">&gt;</span> <span class="n">elements</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">attach</span><span class="o">(</span><span class="n">Element</span> <span class="n">element</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">elements</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">detach</span><span class="o">(</span><span class="n">Element</span> <span class="n">element</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">elements</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">(</span><span class="n">Visitor</span> <span class="n">visitor</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">Element</span> <span class="n">element</span> <span class="o">:</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">element</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">visitor</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Client</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ObjectStructure</span> <span class="n">objectStructure</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectStructure</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">ConcreteElementA</span> <span class="n">elementA</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteElementA</span><span class="o">(</span><span class="s">&#34;element a&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">ConcreteElementB</span> <span class="n">elementB</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcreteElementB</span><span class="o">(</span><span class="s">&#34;element b&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">objectStructure</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">elementA</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">objectStructure</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">elementB</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">objectStructure</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="k">new</span> <span class="n">ConcreteVisitorA</span><span class="o">(</span><span class="s">&#34;visitor a&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    
<nav class="paginav">
  <a class="prev" href="https://chance7bin.github.io/posts/basic/pattern/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>ç»“æ„å‹æ¨¡å¼</span>
  </a>
  <a class="next" href="https://chance7bin.github.io/posts/note/%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9Cvmwaredocker/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>è™šæ‹Ÿæœºç½‘ç»œâ€”â€”vmware&amp;docker</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://chance7bin.github.io/">Binb&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerHTML = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerHTML = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
